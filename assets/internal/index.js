System.register("chunks:///_virtual/builtin-pipeline-settings.ts",["./rollupPluginModLoBabelHelpers.js","cc","./builtin-pipeline-types.ts"],(function(t){var e,o,i,n,r,s,a,p,l,g,c,y,u,d,b,m,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.createClass,n=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,p=t.Camera,l=t.CCBoolean,g=t.CCInteger,c=t.CCFloat,y=t.Material,u=t.Texture2D,d=t.rendering,b=t.Component},function(t){m=t.fillRequiredPipelineSettings,h=t.makePipelineSettings}],execute:function(){var f,_,P,M,S,O,w,E,G,k,D,C,A,j,v,x,F,B,R,I,T,L,X,z,H,q,Y,N;s._RF.push({},"de1c2EHcMhAIYRZY5nyTQHG","builtin-pipeline-settings",void 0);var Q=a.ccclass,Z=a.disallowMultiple,J=a.executeInEditMode,K=a.menu,U=a.property,V=a.requireComponent;a.type,t("BuiltinPipelineSettings",(f=Q("BuiltinPipelineSettings"),_=K("Rendering/BuiltinPipelineSettings"),P=V(p),M=U(l),S=U({displayName:"Editor Preview (Experimental)",type:l}),O=U({group:{id:"MSAA",name:"Multisample Anti-Aliasing"},type:l}),w=U({group:{id:"MSAA",name:"Multisample Anti-Aliasing",style:"section"},type:g,range:[2,4,2]}),E=U({group:{id:"ShadingScale",name:"ShadingScale",style:"section"},type:l}),G=U({tooltip:"i18n:postprocess.shadingScale",group:{id:"ShadingScale",name:"ShadingScale"},type:c,range:[.01,4,.01],slide:!0}),k=U({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:l}),D=U({group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:y}),C=U({tooltip:"i18n:bloom.enableAlphaMask",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:l}),A=U({tooltip:"i18n:bloom.iterations",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:g,range:[1,6,1],slide:!0}),j=U({tooltip:"i18n:bloom.threshold",group:{id:"Bloom",name:"Bloom (PostProcessing)",style:"section"},type:c,min:0}),v=U({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:l}),x=U({group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:y}),F=U({tooltip:"i18n:color_grading.contribute",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:c,range:[0,1,.01],slide:!0}),B=U({tooltip:"i18n:color_grading.originalMap",group:{id:"Color Grading",name:"ColorGrading (LDR) (PostProcessing)",style:"section"},type:u}),R=U({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:l}),I=U({group:{id:"FXAA",name:"Fast Approximate Anti-Aliasing (PostProcessing)",style:"section"},type:y}),T=U({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:l}),L=U({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:y}),X=U({group:{id:"FSR",name:"FidelityFX Super Resolution",style:"section"},type:c,range:[0,1,.01],slide:!0}),z=U({group:{id:"ToneMapping",name:"ToneMapping",style:"section"},type:y}),f(H=_(H=P(H=Z(H=J((Y=e((q=function(t){function e(){for(var e,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,n(e,"_settings",Y,r(e)),n(e,"_editorPreview",N,r(e)),e}o(e,t);var s=e.prototype;return s.getPipelineSettings=function(){return this._settings},s.onEnable=function(){m(this._settings),this.getComponent(p).camera.pipelineSettings=this._settings},s.onDisable=function(){this.getComponent(p).camera.pipelineSettings=null},s._tryEnableEditorPreview=function(){void 0!==d&&(this._editorPreview?d.setEditorPipelineSettings(this._settings):this._disableEditorPreview())},s._disableEditorPreview=function(){void 0!==d&&(d.getEditorPipelineSettings()===this._settings&&d.setEditorPipelineSettings(null))},i(e,[{key:"editorPreview",get:function(){return this._editorPreview},set:function(t){this._editorPreview=t}},{key:"MsaaEnable",get:function(){return this._settings.msaa.enabled},set:function(t){this._settings.msaa.enabled=t}},{key:"msaaSampleCount",get:function(){return this._settings.msaa.sampleCount},set:function(t){t=Math.pow(2,Math.ceil(Math.log2(Math.max(t,2)))),t=Math.min(t,4),this._settings.msaa.sampleCount=t}},{key:"shadingScaleEnable",get:function(){return this._settings.enableShadingScale},set:function(t){this._settings.enableShadingScale=t}},{key:"shadingScale",get:function(){return this._settings.shadingScale},set:function(t){this._settings.shadingScale=t}},{key:"bloomEnable",get:function(){return this._settings.bloom.enabled},set:function(t){this._settings.bloom.enabled=t}},{key:"bloomMaterial",get:function(){return this._settings.bloom.material},set:function(t){this._settings.bloom.material!==t&&(this._settings.bloom.material=t)}},{key:"bloomEnableAlphaMask",get:function(){return this._settings.bloom.enableAlphaMask},set:function(t){this._settings.bloom.enableAlphaMask=t}},{key:"bloomIterations",get:function(){return this._settings.bloom.iterations},set:function(t){this._settings.bloom.iterations=t}},{key:"bloomThreshold",get:function(){return this._settings.bloom.threshold},set:function(t){this._settings.bloom.threshold=t}},{key:"bloomIntensity",get:function(){return this._settings.bloom.intensity},set:function(t){this._settings.bloom.intensity=t}},{key:"colorGradingEnable",get:function(){return this._settings.colorGrading.enabled},set:function(t){this._settings.colorGrading.enabled=t}},{key:"colorGradingMaterial",get:function(){return this._settings.colorGrading.material},set:function(t){this._settings.colorGrading.material!==t&&(this._settings.colorGrading.material=t)}},{key:"colorGradingContribute",get:function(){return this._settings.colorGrading.contribute},set:function(t){this._settings.colorGrading.contribute=t}},{key:"colorGradingMap",get:function(){return this._settings.colorGrading.colorGradingMap},set:function(t){this._settings.colorGrading.colorGradingMap=t}},{key:"fxaaEnable",get:function(){return this._settings.fxaa.enabled},set:function(t){this._settings.fxaa.enabled=t}},{key:"fxaaMaterial",get:function(){return this._settings.fxaa.material},set:function(t){this._settings.fxaa.material!==t&&(this._settings.fxaa.material=t)}},{key:"fsrEnable",get:function(){return this._settings.fsr.enabled},set:function(t){this._settings.fsr.enabled=t}},{key:"fsrMaterial",get:function(){return this._settings.fsr.material},set:function(t){this._settings.fsr.material!==t&&(this._settings.fsr.material=t)}},{key:"fsrSharpness",get:function(){return this._settings.fsr.sharpness},set:function(t){this._settings.fsr.sharpness=t}},{key:"toneMappingMaterial",get:function(){return this._settings.toneMapping.material},set:function(t){this._settings.toneMapping.material!==t&&(this._settings.toneMapping.material=t)}}]),e}(b)).prototype,"_settings",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return h()}}),N=e(q.prototype,"_editorPreview",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),e(q.prototype,"editorPreview",[S],Object.getOwnPropertyDescriptor(q.prototype,"editorPreview"),q.prototype),e(q.prototype,"MsaaEnable",[O],Object.getOwnPropertyDescriptor(q.prototype,"MsaaEnable"),q.prototype),e(q.prototype,"msaaSampleCount",[w],Object.getOwnPropertyDescriptor(q.prototype,"msaaSampleCount"),q.prototype),e(q.prototype,"shadingScaleEnable",[E],Object.getOwnPropertyDescriptor(q.prototype,"shadingScaleEnable"),q.prototype),e(q.prototype,"shadingScale",[G],Object.getOwnPropertyDescriptor(q.prototype,"shadingScale"),q.prototype),e(q.prototype,"bloomEnable",[k],Object.getOwnPropertyDescriptor(q.prototype,"bloomEnable"),q.prototype),e(q.prototype,"bloomMaterial",[D],Object.getOwnPropertyDescriptor(q.prototype,"bloomMaterial"),q.prototype),e(q.prototype,"bloomEnableAlphaMask",[C],Object.getOwnPropertyDescriptor(q.prototype,"bloomEnableAlphaMask"),q.prototype),e(q.prototype,"bloomIterations",[A],Object.getOwnPropertyDescriptor(q.prototype,"bloomIterations"),q.prototype),e(q.prototype,"bloomThreshold",[j],Object.getOwnPropertyDescriptor(q.prototype,"bloomThreshold"),q.prototype),e(q.prototype,"colorGradingEnable",[v],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingEnable"),q.prototype),e(q.prototype,"colorGradingMaterial",[x],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingMaterial"),q.prototype),e(q.prototype,"colorGradingContribute",[F],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingContribute"),q.prototype),e(q.prototype,"colorGradingMap",[B],Object.getOwnPropertyDescriptor(q.prototype,"colorGradingMap"),q.prototype),e(q.prototype,"fxaaEnable",[R],Object.getOwnPropertyDescriptor(q.prototype,"fxaaEnable"),q.prototype),e(q.prototype,"fxaaMaterial",[I],Object.getOwnPropertyDescriptor(q.prototype,"fxaaMaterial"),q.prototype),e(q.prototype,"fsrEnable",[T],Object.getOwnPropertyDescriptor(q.prototype,"fsrEnable"),q.prototype),e(q.prototype,"fsrMaterial",[L],Object.getOwnPropertyDescriptor(q.prototype,"fsrMaterial"),q.prototype),e(q.prototype,"fsrSharpness",[X],Object.getOwnPropertyDescriptor(q.prototype,"fsrSharpness"),q.prototype),e(q.prototype,"toneMappingMaterial",[z],Object.getOwnPropertyDescriptor(q.prototype,"toneMappingMaterial"),q.prototype),H=q))||H)||H)||H)||H)||H));s._RF.pop()}}}));

System.register("chunks:///_virtual/builtin-pipeline-types.ts",["cc"],(function(e){var a,n;return{setters:[function(e){a=e.cclegacy,n=e.gfx}],execute:function(){e({fillRequiredBloom:o,fillRequiredColorGrading:u,fillRequiredFSR:c,fillRequiredFXAA:m,fillRequiredHBAO:function(e){void 0===e.enabled&&(e.enabled=!1);void 0===e.radiusScale&&(e.radiusScale=1);void 0===e.angleBiasDegree&&(e.angleBiasDegree=10);void 0===e.blurSharpness&&(e.blurSharpness=3);void 0===e.aoSaturation&&(e.aoSaturation=1);void 0===e.needBlur&&(e.needBlur=!1)},fillRequiredMSAA:r,fillRequiredPipelineSettings:function(e){e.msaa?r(e.msaa):e.msaa=i();void 0===e.enableShadingScale&&(e.enableShadingScale=!1);void 0===e.shadingScale&&(e.shadingScale=.5);e.bloom?o(e.bloom):e.bloom={enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3};e.toneMapping?f(e.toneMapping):e.toneMapping={material:null};e.colorGrading?u(e.colorGrading):e.colorGrading={enabled:!1,material:null,contribute:1,colorGradingMap:null};e.fsr?c(e.fsr):e.fsr={enabled:!1,material:null,sharpness:.8};e.fxaa?m(e.fxaa):e.fxaa={enabled:!1,material:null}},fillRequiredToneMapping:f,makeBloom:t,makeColorGrading:d,makeFSR:s,makeFXAA:b,makeHBAO:function(){return{enabled:!1,radiusScale:1,angleBiasDegree:10,blurSharpness:3,aoSaturation:1,needBlur:!1}},makeMSAA:i,makePipelineSettings:function(){return{msaa:i(),enableShadingScale:!1,shadingScale:.5,bloom:{enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3},toneMapping:{material:null},colorGrading:{enabled:!1,material:null,contribute:1,colorGradingMap:null},fsr:{enabled:!1,material:null,sharpness:.8},fxaa:{enabled:!1,material:null}}},makeToneMapping:p}),a._RF.push({},"cbf30kCUX9A3K+QpVC6wnzx","builtin-pipeline-types",void 0);var l=n.SampleCount;function i(){return{enabled:!1,sampleCount:l.X4}}function r(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.sampleCount&&(e.sampleCount=l.X4)}function t(){return{enabled:!1,material:null,enableAlphaMask:!1,iterations:3,threshold:.8,intensity:2.3}}function o(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.enableAlphaMask&&(e.enableAlphaMask=!1),void 0===e.iterations&&(e.iterations=3),void 0===e.threshold&&(e.threshold=.8),void 0===e.intensity&&(e.intensity=2.3)}function d(){return{enabled:!1,material:null,contribute:1,colorGradingMap:null}}function u(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.contribute&&(e.contribute=1),void 0===e.colorGradingMap&&(e.colorGradingMap=null)}function s(){return{enabled:!1,material:null,sharpness:.8}}function c(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null),void 0===e.sharpness&&(e.sharpness=.8)}function b(){return{enabled:!1,material:null}}function m(e){void 0===e.enabled&&(e.enabled=!1),void 0===e.material&&(e.material=null)}function p(){return{material:null}}function f(e){void 0===e.material&&(e.material=null)}a._RF.pop()}}}));

System.register("chunks:///_virtual/builtin-pipeline.ts",["./rollupPluginModLoBabelHelpers.js","cc","./env","./builtin-pipeline-types.ts"],(function(e){var a,t,i,n,r,s,o,d,l,h,c,u,p,g,m,S,f,_;return{setters:[function(e){a=e.createForOfIteratorHelperLoose},function(e){t=e.cclegacy,i=e.geometry,n=e.gfx,r=e.renderer,s=e.Vec2,o=e.Vec4,d=e.rendering,l=e.assert,h=e.clamp,c=e.Vec3,u=e.Material,p=e.Layers,g=e.PipelineEventType,m=e.sys,S=e.pipeline},function(e){f=e.DEBUG},function(e){_=e.makePipelineSettings}],execute:function(){e("getPingPongRenderTarget",G),t._RF.push({},"ff9b0GZzgRM/obMbHGfCNbk","builtin-pipeline",void 0);var w=i.AABB,b=i.Sphere,P=i.intersect,R=n.ClearFlagBit,T=n.Color,M=n.Format,E=n.FormatFeatureBit,v=n.LoadOp,C=n.StoreOp,A=n.TextureType,L=n.Viewport,x=r.scene,D=x.CameraUsage,F=x.CSMLevel,N=x.LightType;function O(e){return!!(e.clearFlag&(R.COLOR|R.STENCIL<<1))}function B(e,a,t,i,n,r){e.shadowFixedArea||e.csmLevel===F.LEVEL_1?(n.left=0,n.top=0,n.width=Math.trunc(a),n.height=Math.trunc(t)):(n.left=Math.trunc(i%2*.5*a),n.top=r>0?Math.trunc(.5*(1-Math.floor(i/2))*t):Math.trunc(.5*Math.floor(i/2)*t),n.width=Math.trunc(.5*a),n.height=Math.trunc(.5*t)),n.left=Math.max(0,n.left),n.top=Math.max(0,n.top),n.width=Math.max(1,n.width),n.height=Math.max(1,n.height)}var Q=e("PipelineConfigs",(function(){this.isWeb=!1,this.isWebGL1=!1,this.isWebGPU=!1,this.isMobile=!1,this.isHDR=!1,this.useFloatOutput=!1,this.toneMappingType=0,this.shadowEnabled=!1,this.shadowMapFormat=M.R32F,this.shadowMapSize=new s(1,1),this.usePlanarShadow=!1,this.screenSpaceSignY=1,this.supportDepthSample=!1,this.mobileMaxSpotLightShadowMaps=1,this.platform=new o(0,0,0,0)}));function y(e,a){var t=E.SAMPLED_TEXTURE|E.LINEAR_FILTER,i=e.device;a.isWeb=!m.isNative,a.isWebGL1=i.gfxAPI===n.API.WEBGL,a.isWebGPU=i.gfxAPI===n.API.WEBGPU,a.isMobile=m.isMobile,a.isHDR=e.pipelineSceneData.isHDR,a.useFloatOutput=e.getMacroBool("CC_USE_FLOAT_OUTPUT"),a.toneMappingType=e.pipelineSceneData.postSettings.toneMappingType;var s=e.pipelineSceneData.shadows;a.shadowEnabled=s.enabled,a.shadowMapFormat=S.supportsR32FloatTexture(e.device)?M.R32F:M.RGBA8,a.shadowMapSize.set(s.size),a.usePlanarShadow=s.enabled&&s.type===r.scene.ShadowType.Planar,a.screenSpaceSignY=e.device.capabilities.screenSpaceSignY,a.supportDepthSample=(e.device.getFormatFeatures(M.DEPTH_STENCIL)&t)===t;var o=i.capabilities.screenSpaceSignY;a.platform.x=a.isMobile?1:0,a.platform.w=.5*o+.5<<1|.5*i.capabilities.clipSpaceSignY+.5}var H=_(),z=e("CameraConfigs",(function(){this.settings=H,this.isMainGameWindow=!1,this.renderWindowId=0,this.colorName="",this.depthStencilName="",this.enableFullPipeline=!1,this.enableProfiler=!1,this.remainingPasses=0,this.enableShadingScale=!1,this.shadingScale=1,this.nativeWidth=1,this.nativeHeight=1,this.width=1,this.height=1,this.enableHDR=!1,this.radianceFormat=n.Format.RGBA8,this.copyAndTonemapMaterial=null,this.enableStoreSceneDepth=!1})),I=new T(0,0,0,0);function W(e,a,t,i){l(!!t.copyAndTonemapMaterial);var n=e.addRenderPass(t.nativeWidth,t.nativeHeight,"cc-tone-mapping");return n.addRenderTarget(t.colorName,v.CLEAR,C.STORE,I),n.addTexture(i,"inputTexture"),n.setVec4("g_platform",a.platform),n.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(t.copyAndTonemapMaterial,1),n}function G(e,a,t){return e.startsWith(a)?""+a+(1-Number(e.charAt(a.length)))+"_"+t:a+"0_"+t}var U=function(){function e(){this.lights=[],this.shadowEnabledSpotLights=[],this._sphere=b.create(0,0,0,1),this._boundingBox=new w,this._rangedDirLightBoundingBox=new w(0,0,0,.5,.5,.5)}var t=e.prototype;return t.cullLights=function(e,t,i){this.lights.length=0,this.shadowEnabledSpotLights.length=0;for(var n,r=a(e.spotLights);!(n=r()).done;){var s=n.value;s.baked||(b.set(this._sphere,s.position.x,s.position.y,s.position.z,s.range),P.sphereFrustum(this._sphere,t)&&(s.shadowEnabled?this.shadowEnabledSpotLights.push(s):this.lights.push(s)))}for(var o,d=a(e.sphereLights);!(o=d()).done;){var l=o.value;l.baked||(b.set(this._sphere,l.position.x,l.position.y,l.position.z,l.range),P.sphereFrustum(this._sphere,t)&&this.lights.push(l))}for(var h,u=a(e.pointLights);!(h=u()).done;){var p=h.value;p.baked||(b.set(this._sphere,p.position.x,p.position.y,p.position.z,p.range),P.sphereFrustum(this._sphere,t)&&this.lights.push(p))}for(var g,m=a(e.rangedDirLights);!(g=m()).done;){var S=g.value;w.transform(this._boundingBox,this._rangedDirLightBoundingBox,S.node.getWorldMatrix()),P.aabbFrustum(this._boundingBox,t)&&this.lights.push(S)}i&&this.shadowEnabledSpotLights.sort((function(e,a){return c.squaredDistance(i,e.position)-c.squaredDistance(i,a.position)}))},t._addLightQueues=function(e,t){for(var i,n=a(this.lights);!(i=n()).done;){var r=i.value,s=t.addQueue(d.QueueHint.BLEND,"forward-add");switch(r.type){case N.SPHERE:s.name="sphere-light";break;case N.SPOT:s.name="spot-light";break;case N.POINT:s.name="point-light";break;case N.RANGED_DIRECTIONAL:s.name="ranged-directional-light";break;default:s.name="unknown-light"}s.addScene(e,d.SceneFlags.BLEND,r)}},t.addSpotlightShadowPasses=function(e,t,i){for(var n,r=0,s=a(this.shadowEnabledSpotLights);!(n=s()).done;){var o=n.value,l=e.pipelineSceneData.shadows.size,h=e.addRenderPass(l.x,l.y,"default");if(h.name="SpotLightShadowPass"+r,h.addRenderTarget("SpotShadowMap"+r,v.CLEAR,C.STORE,new T(1,1,1,1)),h.addDepthStencil("SpotShadowDepth"+r,v.CLEAR,C.DISCARD),h.addQueue(d.QueueHint.NONE,"shadow-caster").addScene(t,d.SceneFlags.OPAQUE|d.SceneFlags.MASK|d.SceneFlags.SHADOW_CASTER).useLightFrustum(o),++r>=i)break}},t.addLightQueues=function(e,t,i){this._addLightQueues(t,e);for(var n,r=0,s=a(this.shadowEnabledSpotLights);!(n=s()).done;){var o=n.value;if(e.addTexture("SpotShadowMap"+r,"cc_spotShadowMap"),e.addQueue(d.QueueHint.BLEND,"forward-add").addScene(t,d.SceneFlags.BLEND,o),++r>=i)break}},t.addLightPasses=function(e,t,i,n,r,s,o,l,h,c){this._addLightQueues(o,c);for(var u,p=0,g=h.pipelineSceneData.shadows.size,m=a(this.shadowEnabledSpotLights);!(u=m()).done;){var S=u.value,f=h.addRenderPass(g.x,g.y,"default");f.name="SpotlightShadowPass",f.addRenderTarget("ShadowMap"+n,v.CLEAR,C.STORE,new T(1,1,1,1)),f.addDepthStencil("ShadowDepth"+n,v.CLEAR,C.DISCARD),f.addQueue(d.QueueHint.NONE,"shadow-caster").addScene(o,d.SceneFlags.OPAQUE|d.SceneFlags.MASK|d.SceneFlags.SHADOW_CASTER).useLightFrustum(S);var _=++p===this.shadowEnabledSpotLights.length?i:C.STORE;(c=h.addRenderPass(r,s,"default")).name="SpotlightWithShadowMap",c.setViewport(l),c.addRenderTarget(e,v.LOAD),c.addDepthStencil(t,v.LOAD,_),c.addTexture("ShadowMap"+n,"cc_spotShadowMap"),c.addQueue(d.QueueHint.BLEND,"forward-add").addScene(o,d.SceneFlags.BLEND,S)}return c},t.isMultipleLightPassesNeeded=function(){return this.shadowEnabledSpotLights.length>0},e}(),V=e("BuiltinForwardPassBuilder",function(){function e(){this.forwardLighting=new U,this._viewport=new L,this._clearColor=new T(0,0,0,1),this._reflectionProbeClearColor=new c(0,0,0)}var i=e.prototype;return i.getConfigOrder=function(){return e.ConfigOrder},i.getRenderOrder=function(){return e.RenderOrder},i.configCamera=function(e,a,t){t.enableMainLightShadowMap=a.shadowEnabled&&!a.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,t.enableMainLightPlanarShadowMap=a.shadowEnabled&&a.usePlanarShadow&&!!e.scene&&!!e.scene.mainLight&&e.scene.mainLight.shadowEnabled,t.enablePlanarReflectionProbe=t.isMainGameWindow||e.cameraUsage===D.SCENE_VIEW,t.enableMSAA=t.settings.msaa.enabled&&!t.enableStoreSceneDepth&&!a.isWeb&&!a.isWebGL1,t.enableSingleForwardPass=a.isMobile||t.enableMSAA,++t.remainingPasses},i.windowResize=function(e,a,t,i,n,r,s){var o=d.ResourceFlags,l=d.ResourceResidency,h=i.renderWindowId,c=t.settings,u=t.enableShadingScale?Math.max(Math.floor(r*t.shadingScale),1):r,p=t.enableShadingScale?Math.max(Math.floor(s*t.shadingScale),1):s;if(t.enableMSAA&&(t.enableHDR?e.addTexture("MsaaRadiance"+h,A.TEX2D,t.radianceFormat,u,p,1,1,1,c.msaa.sampleCount,o.COLOR_ATTACHMENT,l.MEMORYLESS):e.addTexture("MsaaRadiance"+h,A.TEX2D,M.RGBA8,u,p,1,1,1,c.msaa.sampleCount,o.COLOR_ATTACHMENT,l.MEMORYLESS),e.addTexture("MsaaDepthStencil"+h,A.TEX2D,M.DEPTH_STENCIL,u,p,1,1,1,c.msaa.sampleCount,o.DEPTH_STENCIL_ATTACHMENT,l.MEMORYLESS)),e.addRenderTarget("ShadowMap"+h,a.shadowMapFormat,a.shadowMapSize.x,a.shadowMapSize.y),e.addDepthStencil("ShadowDepth"+h,M.DEPTH_STENCIL,a.shadowMapSize.x,a.shadowMapSize.y),t.enableSingleForwardPass)for(var g=a.mobileMaxSpotLightShadowMaps,m=0;m!==g;++m)e.addRenderTarget("SpotShadowMap"+m,a.shadowMapFormat,a.shadowMapSize.x,a.shadowMapSize.y),e.addDepthStencil("SpotShadowDepth"+m,M.DEPTH_STENCIL,a.shadowMapSize.x,a.shadowMapSize.y)},i.setup=function(e,a,t,i,n){var r=i.window.renderWindowId,s=i.scene,o=s.mainLight;--t.remainingPasses,l(t.remainingPasses>=0),this.forwardLighting.cullLights(s,i.frustum),t.enableMainLightShadowMap&&(l(!!o),this._addCascadedShadowMapPass(e,a,r,o,i)),t.enableSingleForwardPass&&this.forwardLighting.addSpotlightShadowPasses(e,i,a.mobileMaxSpotLightShadowMaps),this._tryAddReflectionProbePasses(e,t,r,o,i.scene),t.remainingPasses>0||t.enableShadingScale?(n.colorName=t.enableShadingScale?"ScaledRadiance0_"+r:"Radiance0_"+r,n.depthStencilName=t.enableShadingScale?"ScaledSceneDepth_"+r:"SceneDepth_"+r):(n.colorName=t.colorName,n.depthStencilName=t.depthStencilName);var d=this._addForwardRadiancePasses(e,a,t,r,i,t.width,t.height,o,n.colorName,n.depthStencilName,!t.enableMSAA,t.enableStoreSceneDepth?C.STORE:C.DISCARD);return t.enableStoreSceneDepth||(n.depthStencilName=""),0===t.remainingPasses&&t.enableShadingScale?W(e,a,t,n.colorName):d},i._addCascadedShadowMapPass=function(e,a,t,i,n){var r=d.QueueHint,s=d.SceneFlags,o=e.pipelineSceneData.shadows.size,l=o.x,h=o.y,c=this._viewport;c.left=c.top=0,c.width=l,c.height=h;var u=e.addRenderPass(l,h,"default");u.name="CascadedShadowMap",u.addRenderTarget("ShadowMap"+t,v.CLEAR,C.STORE,new T(1,1,1,1)),u.addDepthStencil("ShadowDepth"+t,v.CLEAR,C.DISCARD);for(var p=e.pipelineSceneData.csmSupported?i.csmLevel:1,g=0;g!==p;++g){B(i,l,h,g,this._viewport,a.screenSpaceSignY);var m=u.addQueue(r.NONE,"shadow-caster");a.isWebGPU||m.setViewport(this._viewport),m.addScene(n,s.OPAQUE|s.MASK|s.SHADOW_CASTER).useLightFrustum(i,g)}},i._tryAddReflectionProbePasses=function(e,i,s,o,l){var h=t.internal.reflectionProbeManager;if(h)for(var c,u=d.ResourceResidency,p=h.getProbes(),g=0,m=a(p);!(c=m()).done;){var S=c.value;if(S.needRender){var f=S.renderArea(),_=Math.max(Math.floor(f.x),1),w=Math.max(Math.floor(f.y),1);if(S.probeType===r.scene.ProbeType.PLANAR){if(!i.enablePlanarReflectionProbe)continue;var b=S.realtimePlanarTexture.window,P="PlanarProbeRT"+g,R="PlanarProbeDS"+g;e.addRenderWindow(P,i.radianceFormat,_,w,b),e.addDepthStencil(R,n.Format.DEPTH_STENCIL,_,w,u.MEMORYLESS);var T=e.addRenderPass(_,w,"default");T.name="PlanarReflectionProbe"+g,this._buildReflectionProbePass(T,i,s,S.camera,P,R,o,l)}if(4===++g)break}}},i._buildReflectionProbePass=function(e,a,t,i,n,r,s,o){void 0===o&&(o=null);var l=d.QueueHint,h=d.SceneFlags,c=a.enableMSAA?C.DISCARD:C.STORE;if(O(i)){this._reflectionProbeClearColor.x=i.clearColor.x,this._reflectionProbeClearColor.y=i.clearColor.y,this._reflectionProbeClearColor.z=i.clearColor.z;var u=d.packRGBE(this._reflectionProbeClearColor);this._clearColor.x=u.x,this._clearColor.y=u.y,this._clearColor.z=u.z,this._clearColor.w=u.w,e.addRenderTarget(n,v.CLEAR,c,this._clearColor)}else e.addRenderTarget(n,v.LOAD,c);i.clearFlag&R.DEPTH_STENCIL?e.addDepthStencil(r,v.CLEAR,C.DISCARD,i.clearDepth,i.clearStencil,i.clearFlag&R.DEPTH_STENCIL):e.addDepthStencil(r,v.LOAD,C.DISCARD),a.enableMainLightShadowMap&&e.addTexture("ShadowMap"+t,"cc_shadowMap"),e.addQueue(l.NONE,"reflect-map").addScene(i,h.OPAQUE|h.MASK|h.REFLECTION_PROBE,s||void 0,o||void 0)},i._addForwardRadiancePasses=function(e,a,t,i,n,r,s,o,h,c,u,p){void 0===u&&(u=!1),void 0===p&&(p=C.DISCARD);var g=d.QueueHint,m=d.SceneFlags,S=n.clearColor;this._clearColor.x=S.x,this._clearColor.y=S.y,this._clearColor.z=S.z,this._clearColor.w=S.w;var f=n.viewport;this._viewport.left=Math.round(f.x*r),this._viewport.top=Math.round(f.y*s),this._viewport.width=Math.max(Math.round(f.width*r),1),this._viewport.height=Math.max(Math.round(f.height*s),1);var _=!u&&t.enableMSAA;l(!_||t.enableSingleForwardPass);var w=t.enableSingleForwardPass?this._addForwardSingleRadiancePass(e,a,t,i,n,_,r,s,o,h,c,p):this._addForwardMultipleRadiancePasses(e,t,i,n,r,s,o,h,c,p);t.enableMainLightPlanarShadowMap&&this._addPlanarShadowQueue(n,o,w);var b=m.BLEND|(n.geometryRenderer?m.GEOMETRY:m.NONE);return w.addQueue(g.BLEND).addScene(n,b,o||void 0),w},i._addForwardSingleRadiancePass=function(e,a,t,i,n,r,s,o,d,h,c,u){var p;if(l(t.enableSingleForwardPass),r){var g="MsaaRadiance"+i,m="MsaaDepthStencil"+i,S=t.settings.msaa.sampleCount,f=e.addMultisampleRenderPass(s,o,S,0,"default");f.name="MsaaForwardPass",this._buildForwardMainLightPass(f,t,i,n,g,m,C.DISCARD,d),f.resolveRenderTarget(g,h),p=f}else(p=e.addRenderPass(s,o,"default")).name="ForwardPass",this._buildForwardMainLightPass(p,t,i,n,h,c,u,d);return l(void 0!==p),this.forwardLighting.addLightQueues(p,n,a.mobileMaxSpotLightShadowMaps),p},i._addForwardMultipleRadiancePasses=function(e,a,t,i,n,r,s,o,d,h){l(!a.enableSingleForwardPass);var c=e.addRenderPass(n,r,"default");c.name="ForwardPass";var u=this.forwardLighting.isMultipleLightPassesNeeded()?C.STORE:h;return this._buildForwardMainLightPass(c,a,t,i,o,d,u,s),c=this.forwardLighting.addLightPasses(o,d,h,t,n,r,i,this._viewport,e,c)},i._buildForwardMainLightPass=function(e,a,t,i,n,r,s,o,l){void 0===l&&(l=null);var h=d.QueueHint,c=d.SceneFlags;e.setViewport(this._viewport);var u=a.enableMSAA?C.DISCARD:C.STORE;O(i)?e.addRenderTarget(n,v.CLEAR,u,this._clearColor):e.addRenderTarget(n,v.LOAD,u),i.clearFlag&R.DEPTH_STENCIL?e.addDepthStencil(r,v.CLEAR,s,i.clearDepth,i.clearStencil,i.clearFlag&R.DEPTH_STENCIL):e.addDepthStencil(r,v.LOAD,s),a.enableMainLightShadowMap&&e.addTexture("ShadowMap"+t,"cc_shadowMap"),e.addQueue(h.NONE).addScene(i,c.OPAQUE|c.MASK,o||void 0,l||void 0)},i._addPlanarShadowQueue=function(e,a,t){var i=d.QueueHint,n=d.SceneFlags;t.addQueue(i.BLEND,"planar-shadow").addScene(e,n.SHADOW_CASTER|n.PLANAR_SHADOW|n.BLEND,a||void 0)},e}());V.ConfigOrder=100,V.RenderOrder=100;var k=e("BuiltinBloomPassBuilder",function(){function e(){this._clearColorTransparentBlack=new T(0,0,0,0),this._bloomParams=new o(0,0,0,0),this._bloomTexSize=new o(0,0,0,0),this._bloomWidths=[],this._bloomHeights=[],this._bloomTexNames=[]}var a=e.prototype;return a.getConfigOrder=function(){return 0},a.getRenderOrder=function(){return 200},a.configCamera=function(e,a,t){t.enableBloom=t.settings.bloom.enabled&&!!t.settings.bloom.material,t.enableBloom&&++t.remainingPasses},a.windowResize=function(e,a,t,i){if(t.enableBloom)for(var n=i.renderWindowId,r=t.width,s=t.height,o=0;o!==t.settings.bloom.iterations+1;++o)r=Math.max(Math.floor(r/2),1),s=Math.max(Math.floor(s/2),1),e.addRenderTarget("BloomTex"+n+"_"+o,t.radianceFormat,r,s)},a.setup=function(e,a,t,i,n,r){if(!t.enableBloom)return r;--t.remainingPasses,l(t.remainingPasses>=0);var s=i.window.renderWindowId;return l(!!t.settings.bloom.material),this._addKawaseDualFilterBloomPasses(e,a,t,t.settings,t.settings.bloom.material,s,t.width,t.height,n.colorName)},a._addKawaseDualFilterBloomPasses=function(e,a,t,i,n,r,s,o,l){var h=d.QueueHint,c=i.bloom.iterations,u=c+1;this._bloomWidths.length=u,this._bloomHeights.length=u,this._bloomWidths[0]=Math.max(Math.floor(s/2),1),this._bloomHeights[0]=Math.max(Math.floor(o/2),1);for(var p=1;p!==u;++p)this._bloomWidths[p]=Math.max(Math.floor(this._bloomWidths[p-1]/2),1),this._bloomHeights[p]=Math.max(Math.floor(this._bloomHeights[p-1]/2),1);this._bloomTexNames.length=u;for(var g=0;g!==u;++g)this._bloomTexNames[g]="BloomTex"+r+"_"+g;this._bloomParams.x=a.useFloatOutput?1:0,this._bloomParams.x=0,this._bloomParams.z=i.bloom.threshold,this._bloomParams.w=i.bloom.enableAlphaMask?1:0;var m=e.addRenderPass(this._bloomWidths[0],this._bloomHeights[0],"cc-bloom-prefilter");m.addRenderTarget(this._bloomTexNames[0],v.CLEAR,C.STORE,this._clearColorTransparentBlack),m.addTexture(l,"inputTexture"),m.setVec4("g_platform",a.platform),m.setVec4("bloomParams",this._bloomParams),m.addQueue(h.OPAQUE).addFullscreenQuad(n,0);for(var S=1;S!==u;++S){var f=e.addRenderPass(this._bloomWidths[S],this._bloomHeights[S],"cc-bloom-downsample");f.addRenderTarget(this._bloomTexNames[S],v.CLEAR,C.STORE,this._clearColorTransparentBlack),f.addTexture(this._bloomTexNames[S-1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[S-1],this._bloomTexSize.y=this._bloomHeights[S-1],f.setVec4("g_platform",a.platform),f.setVec4("bloomTexSize",this._bloomTexSize),f.addQueue(h.OPAQUE).addFullscreenQuad(n,1)}for(var _=c;_-- >0;){var w=e.addRenderPass(this._bloomWidths[_],this._bloomHeights[_],"cc-bloom-upsample");w.addRenderTarget(this._bloomTexNames[_],v.CLEAR,C.STORE,this._clearColorTransparentBlack),w.addTexture(this._bloomTexNames[_+1],"bloomTexture"),this._bloomTexSize.x=this._bloomWidths[_+1],this._bloomTexSize.y=this._bloomHeights[_+1],w.setVec4("g_platform",a.platform),w.setVec4("bloomTexSize",this._bloomTexSize),w.addQueue(h.OPAQUE).addFullscreenQuad(n,2)}var b=e.addRenderPass(s,o,"cc-bloom-combine");return b.addRenderTarget(l,v.LOAD,C.STORE),b.addTexture(this._bloomTexNames[0],"bloomTexture"),b.setVec4("g_platform",a.platform),b.setVec4("bloomParams",this._bloomParams),b.addQueue(h.BLEND).addFullscreenQuad(n,3),0===t.remainingPasses?W(e,a,t,l):b},e}()),Y=e("BuiltinToneMappingPassBuilder",function(){function e(){this._colorGradingTexSize=new s(0,0)}var a=e.prototype;return a.getConfigOrder=function(){return 0},a.getRenderOrder=function(){return 300},a.configCamera=function(e,a,t){var i=t.settings;t.enableColorGrading=i.colorGrading.enabled&&!!i.colorGrading.material&&!!i.colorGrading.colorGradingMap,t.enableToneMapping=t.enableHDR||t.enableColorGrading,t.enableToneMapping&&++t.remainingPasses},a.windowResize=function(e,a,t){t.enableColorGrading&&(l(!!t.settings.colorGrading.material),t.settings.colorGrading.material.setProperty("colorGradingMap",t.settings.colorGrading.colorGradingMap))},a.setup=function(e,a,t,i,n,r){if(!t.enableToneMapping)return r;if(--t.remainingPasses,l(t.remainingPasses>=0),0===t.remainingPasses)return this._addCopyAndTonemapPass(e,a,t,t.nativeWidth,t.nativeHeight,n.colorName,t.colorName);var s=t.renderWindowId,o=t.enableShadingScale?"ScaledLdrColor":"LdrColor",d=G(n.colorName,o,s),h=n.colorName;return n.colorName=d,this._addCopyAndTonemapPass(e,a,t,t.width,t.height,h,d)},a._addCopyAndTonemapPass=function(e,a,t,i,n,r,s){var o,h=t.settings;if(t.enableColorGrading){l(!!h.colorGrading.material),l(!!h.colorGrading.colorGradingMap);var c=h.colorGrading.colorGradingMap;this._colorGradingTexSize.x=c.width,this._colorGradingTexSize.y=c.height;var u=c.width===c.height;(o=u?e.addRenderPass(i,n,"cc-color-grading-8x8"):e.addRenderPass(i,n,"cc-color-grading-nx1")).addRenderTarget(s,v.CLEAR,C.STORE,I),o.addTexture(r,"sceneColorMap"),o.setVec4("g_platform",a.platform),o.setVec2("lutTextureSize",this._colorGradingTexSize),o.setFloat("contribute",h.colorGrading.contribute),o.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(h.colorGrading.material,u?1:0)}else(o=e.addRenderPass(i,n,"cc-tone-mapping")).addRenderTarget(s,v.CLEAR,C.STORE,I),o.addTexture(r,"inputTexture"),o.setVec4("g_platform",a.platform),h.toneMapping.material?o.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(h.toneMapping.material,0):(l(!!t.copyAndTonemapMaterial),o.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(t.copyAndTonemapMaterial,0));return o},e}()),X=e("BuiltinFXAAPassBuilder",function(){function e(){this._fxaaParams=new o(0,0,0,0)}var a=e.prototype;return a.getConfigOrder=function(){return 0},a.getRenderOrder=function(){return 400},a.configCamera=function(e,a,t){t.enableFXAA=t.settings.fxaa.enabled&&!!t.settings.fxaa.material,t.enableFXAA&&++t.remainingPasses},a.setup=function(e,a,t,i,n,r){if(!t.enableFXAA)return r;--t.remainingPasses,l(t.remainingPasses>=0);var s=t.renderWindowId,o=t.enableShadingScale?"ScaledLdrColor":"LdrColor",d=G(n.colorName,o,s);if(l(!!t.settings.fxaa.material),0===t.remainingPasses)return t.enableShadingScale?(this._addFxaaPass(e,a,t.settings.fxaa.material,t.width,t.height,n.colorName,d),W(e,a,t,d)):(l(t.width===t.nativeWidth),l(t.height===t.nativeHeight),this._addFxaaPass(e,a,t.settings.fxaa.material,t.width,t.height,n.colorName,t.colorName));var h=n.colorName;return n.colorName=d,this._addFxaaPass(e,a,t.settings.fxaa.material,t.width,t.height,h,d)},a._addFxaaPass=function(e,a,t,i,n,r,s){this._fxaaParams.x=i,this._fxaaParams.y=n,this._fxaaParams.z=1/i,this._fxaaParams.w=1/n;var o=e.addRenderPass(i,n,"cc-fxaa");return o.addRenderTarget(s,v.CLEAR,C.STORE,I),o.addTexture(r,"sceneColorMap"),o.setVec4("g_platform",a.platform),o.setVec4("texSize",this._fxaaParams),o.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(t,0),o},e}()),K=e("BuiltinFsrPassBuilder",function(){function e(){this._fsrParams=new o(0,0,0,0),this._fsrTexSize=new o(0,0,0,0)}var a=e.prototype;return a.getConfigOrder=function(){return 0},a.getRenderOrder=function(){return 500},a.configCamera=function(e,a,t){t.enableFSR=t.settings.fsr.enabled&&!!t.settings.fsr.material&&t.enableShadingScale&&t.shadingScale<1,t.enableFSR&&++t.remainingPasses},a.setup=function(e,a,t,i,n,r){if(!t.enableFSR)return r;--t.remainingPasses;var s=n.colorName,o=0===t.remainingPasses?t.colorName:G(n.colorName,"UiColor",t.renderWindowId);return n.colorName=o,l(!!t.settings.fsr.material),this._addFsrPass(e,a,t,t.settings,t.settings.fsr.material,t.renderWindowId,t.width,t.height,s,t.nativeWidth,t.nativeHeight,o)},a._addFsrPass=function(e,a,t,i,n,r,s,o,l,c,u,p){this._fsrTexSize.x=s,this._fsrTexSize.y=o,this._fsrTexSize.z=c,this._fsrTexSize.w=u,this._fsrParams.x=h(1-i.fsr.sharpness,.02,.98);var g=G(p,"UiColor",r),m=e.addRenderPass(c,u,"cc-fsr-easu");m.addRenderTarget(g,v.CLEAR,C.STORE,I),m.addTexture(l,"outputResultMap"),m.setVec4("g_platform",a.platform),m.setVec4("fsrTexSize",this._fsrTexSize),m.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(n,0);var S=e.addRenderPass(c,u,"cc-fsr-rcas");return S.addRenderTarget(p,v.CLEAR,C.STORE,I),S.addTexture(g,"outputResultMap"),S.setVec4("g_platform",a.platform),S.setVec4("fsrTexSize",this._fsrTexSize),S.setVec4("fsrParams",this._fsrParams),S.addQueue(d.QueueHint.OPAQUE).addFullscreenQuad(n,1),S},e}()),q=e("BuiltinUiPassBuilder",function(){function e(){}var a=e.prototype;return a.getConfigOrder=function(){return 0},a.getRenderOrder=function(){return 1e3},a.setup=function(e,a,t,i,n,r){l(!!r);var s=d.SceneFlags.UI;return t.enableProfiler&&(s|=d.SceneFlags.PROFILER,r.showStatistics=!0),r.addQueue(d.QueueHint.BLEND,"default","default").addScene(i,s),r},e}());if(d){var j=d.QueueHint,Z=d.SceneFlags,J=function(){function e(){this._pipelineEvent=t.director.root.pipelineEvent,this._forwardPass=new V,this._bloomPass=new k,this._toneMappingPass=new Y,this._fxaaPass=new X,this._fsrPass=new K,this._uiPass=new q,this._clearColor=new T(0,0,0,1),this._viewport=new L,this._configs=new Q,this._cameraConfigs=new z,this._copyAndTonemapMaterial=new u,this._initialized=!1,this._passBuilders=[]}var i=e.prototype;return i._setupPipelinePreview=function(e,a){if(e.cameraUsage===D.SCENE_VIEW||e.cameraUsage===D.PREVIEW){var t=d.getEditorPipelineSettings();a.settings=t||H}else e.pipelineSettings?a.settings=e.pipelineSettings:a.settings=H},i._preparePipelinePasses=function(e){var t=this._passBuilders;t.length=0;var i=e.settings;if(i._passes){for(var n,r=a(i._passes);!(n=r()).done;){var s=n.value;t.push(s)}l(t.length===i._passes.length)}t.push(this._forwardPass),i.bloom.enabled&&t.push(this._bloomPass),t.push(this._toneMappingPass),i.fxaa.enabled&&t.push(this._fxaaPass),i.fsr.enabled&&t.push(this._fsrPass),t.push(this._uiPass)},i._setupBuiltinCameraConfigs=function(e,a,t){var i=e.window,r=e.cameraUsage===D.GAME&&!!i.swapchain;t.isMainGameWindow=r,t.renderWindowId=i.renderWindowId,t.colorName=i.colorName,t.depthStencilName=i.depthStencilName,t.enableFullPipeline=0!=(e.visibility&p.Enum.DEFAULT),t.enableProfiler=f,t.remainingPasses=0,t.shadingScale=t.settings.shadingScale,t.enableShadingScale=t.settings.enableShadingScale&&1!==t.shadingScale,t.nativeWidth=Math.max(Math.floor(i.width),1),t.nativeHeight=Math.max(Math.floor(i.height),1),t.width=t.enableShadingScale?Math.max(Math.floor(t.nativeWidth*t.shadingScale),1):t.nativeWidth,t.height=t.enableShadingScale?Math.max(Math.floor(t.nativeHeight*t.shadingScale),1):t.nativeHeight,t.enableHDR=t.enableFullPipeline&&a.useFloatOutput,t.radianceFormat=t.enableHDR?n.Format.RGBA16F:n.Format.RGBA8,t.copyAndTonemapMaterial=this._copyAndTonemapMaterial,t.enableStoreSceneDepth=!1},i._setupCameraConfigs=function(e,t,i){this._setupPipelinePreview(e,i),this._preparePipelinePasses(i),this._passBuilders.sort((function(e,a){return e.getConfigOrder()-a.getConfigOrder()})),this._setupBuiltinCameraConfigs(e,t,i);for(var n,r=a(this._passBuilders);!(n=r()).done;){var s=n.value;s.configCamera&&s.configCamera(e,t,i)}},i.windowResize=function(e,t,i,n,r){y(e,this._configs),this._setupCameraConfigs(i,this._configs,this._cameraConfigs);var s=t.renderWindowId;e.addRenderWindow(this._cameraConfigs.colorName,M.RGBA8,n,r,t,this._cameraConfigs.depthStencilName);var o=this._cameraConfigs.width,d=this._cameraConfigs.height;this._cameraConfigs.enableShadingScale?(e.addDepthStencil("ScaledSceneDepth_"+s,M.DEPTH_STENCIL,o,d),e.addRenderTarget("ScaledRadiance0_"+s,this._cameraConfigs.radianceFormat,o,d),e.addRenderTarget("ScaledRadiance1_"+s,this._cameraConfigs.radianceFormat,o,d),e.addRenderTarget("ScaledLdrColor0_"+s,M.RGBA8,o,d),e.addRenderTarget("ScaledLdrColor1_"+s,M.RGBA8,o,d)):(e.addDepthStencil("SceneDepth_"+s,M.DEPTH_STENCIL,o,d),e.addRenderTarget("Radiance0_"+s,this._cameraConfigs.radianceFormat,o,d),e.addRenderTarget("Radiance1_"+s,this._cameraConfigs.radianceFormat,o,d),e.addRenderTarget("LdrColor0_"+s,M.RGBA8,o,d),e.addRenderTarget("LdrColor1_"+s,M.RGBA8,o,d)),e.addRenderTarget("UiColor0_"+s,M.RGBA8,n,r),e.addRenderTarget("UiColor1_"+s,M.RGBA8,n,r);for(var l,h=a(this._passBuilders);!(l=h()).done;){var c=l.value;c.windowResize&&c.windowResize(e,this._configs,this._cameraConfigs,t,i,n,r)}},i.setup=function(e,t){if(!this._initMaterials(t))for(var i,n=a(e);!(i=n()).done;){var r=i.value;r.scene&&r.window&&(this._setupCameraConfigs(r,this._configs,this._cameraConfigs),this._pipelineEvent.emit(g.RENDER_CAMERA_BEGIN,r),this._cameraConfigs.enableFullPipeline?this._buildForwardPipeline(t,r,r.scene,this._passBuilders):this._buildSimplePipeline(t,r),this._pipelineEvent.emit(g.RENDER_CAMERA_END,r))}},i._buildSimplePipeline=function(e,a){var t=Math.max(Math.floor(a.window.width),1),i=Math.max(Math.floor(a.window.height),1),n=this._cameraConfigs.colorName,r=this._cameraConfigs.depthStencilName,s=a.viewport;this._viewport.left=Math.round(s.x*t),this._viewport.top=Math.round(s.y*i),this._viewport.width=Math.max(Math.round(s.width*t),1),this._viewport.height=Math.max(Math.round(s.height*i),1);var o=a.clearColor;this._clearColor.x=o.x,this._clearColor.y=o.y,this._clearColor.z=o.z,this._clearColor.w=o.w;var d=e.addRenderPass(t,i,"default");O(a)?d.addRenderTarget(n,v.CLEAR,C.STORE,this._clearColor):d.addRenderTarget(n,v.LOAD,C.STORE),a.clearFlag&R.DEPTH_STENCIL?d.addDepthStencil(r,v.CLEAR,C.DISCARD,a.clearDepth,a.clearStencil,a.clearFlag&R.DEPTH_STENCIL):d.addDepthStencil(r,v.LOAD,C.DISCARD),d.setViewport(this._viewport),d.addQueue(j.OPAQUE).addScene(a,Z.OPAQUE);var l=Z.BLEND|Z.UI;this._cameraConfigs.enableProfiler&&(l|=Z.PROFILER,d.showStatistics=!0),d.addQueue(j.BLEND).addScene(a,l)},i._buildForwardPipeline=function(e,t,i,n){!function(e){e.sort((function(e,a){return e.getRenderOrder()-a.getRenderOrder()}))}(n);for(var r,s={colorName:"",depthStencilName:""},o=void 0,d=a(n);!(r=d()).done;){var h=r.value;h.setup&&(o=h.setup(e,this._configs,this._cameraConfigs,t,s,o))}l(0===this._cameraConfigs.remainingPasses)},i._initMaterials=function(e){return this._initialized?0:(y(e,this._configs),this._copyAndTonemapMaterial._uuid="builtin-pipeline-tone-mapping-material",this._copyAndTonemapMaterial.initialize({effectName:"pipeline/post-process/tone-mapping"}),this._copyAndTonemapMaterial.effectAsset&&(this._initialized=!0),this._initialized?0:1)},e}();d.setCustomPipeline("Builtin",new J)}t._RF.pop()}}}));

System.register("chunks:///_virtual/internal",["./builtin-pipeline-settings.ts","./builtin-pipeline-types.ts","./builtin-pipeline.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/internal', 'chunks:///_virtual/internal'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2ZpbGU6L0FwcGxpY2F0aW9ucy9Db2Nvcy9DcmVhdG9yLzMuOC41L0NvY29zQ3JlYXRvci5hcHAvQ29udGVudHMvUmVzb3VyY2VzL3Jlc291cmNlcy8zZC9lbmdpbmUvZWRpdG9yL2Fzc2V0cy9kZWZhdWx0X3JlbmRlcnBpcGVsaW5lL2ZpbGU6L0FwcGxpY2F0aW9ucy9Db2Nvcy9DcmVhdG9yLzMuOC41L0NvY29zQ3JlYXRvci5hcHAvQ29udGVudHMvUmVzb3VyY2VzL3Jlc291cmNlcy8zZC9lbmdpbmUvZWRpdG9yL2Fzc2V0cy9kZWZhdWx0X3JlbmRlcnBpcGVsaW5lL2J1aWx0aW4tcGlwZWxpbmUtc2V0dGluZ3MudHMiLCIuLi9maWxlOi9BcHBsaWNhdGlvbnMvQ29jb3MvQ3JlYXRvci8zLjguNS9Db2Nvc0NyZWF0b3IuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9yZXNvdXJjZXMvM2QvZW5naW5lL2VkaXRvci9hc3NldHMvZGVmYXVsdF9yZW5kZXJwaXBlbGluZS9maWxlOi9BcHBsaWNhdGlvbnMvQ29jb3MvQ3JlYXRvci8zLjguNS9Db2Nvc0NyZWF0b3IuYXBwL0NvbnRlbnRzL1Jlc291cmNlcy9yZXNvdXJjZXMvM2QvZW5naW5lL2VkaXRvci9hc3NldHMvZGVmYXVsdF9yZW5kZXJwaXBlbGluZS9idWlsdGluLXBpcGVsaW5lLXR5cGVzLnRzIiwiLi4vZmlsZTovQXBwbGljYXRpb25zL0NvY29zL0NyZWF0b3IvMy44LjUvQ29jb3NDcmVhdG9yLmFwcC9Db250ZW50cy9SZXNvdXJjZXMvcmVzb3VyY2VzLzNkL2VuZ2luZS9lZGl0b3IvYXNzZXRzL2RlZmF1bHRfcmVuZGVycGlwZWxpbmUvZmlsZTovQXBwbGljYXRpb25zL0NvY29zL0NyZWF0b3IvMy44LjUvQ29jb3NDcmVhdG9yLmFwcC9Db250ZW50cy9SZXNvdXJjZXMvcmVzb3VyY2VzLzNkL2VuZ2luZS9lZGl0b3IvYXNzZXRzL2RlZmF1bHRfcmVuZGVycGlwZWxpbmUvYnVpbHRpbi1waXBlbGluZS50cyJdLCJuYW1lcyI6WyJjY2NsYXNzIiwiX2RlY29yYXRvciIsImRpc2FsbG93TXVsdGlwbGUiLCJleGVjdXRlSW5FZGl0TW9kZSIsIm1lbnUiLCJwcm9wZXJ0eSIsInJlcXVpcmVDb21wb25lbnQiLCJ0eXBlIiwiX2RlYyIsIl9kZWMyIiwiX2RlYzMiLCJDYW1lcmEiLCJfZGVjNCIsIkNDQm9vbGVhbiIsIl9kZWM1IiwiZGlzcGxheU5hbWUiLCJfZGVjNiIsImdyb3VwIiwiaWQiLCJuYW1lIiwiX2RlYzciLCJzdHlsZSIsIkNDSW50ZWdlciIsInJhbmdlIiwiX2RlYzgiLCJfZGVjOSIsInRvb2x0aXAiLCJDQ0Zsb2F0Iiwic2xpZGUiLCJfZGVjMTAiLCJfZGVjMTEiLCJNYXRlcmlhbCIsIl9kZWMxMiIsIl9kZWMxMyIsIl9kZWMxNCIsIm1pbiIsIl9kZWMxNSIsIl9kZWMxNiIsIl9kZWMxNyIsIl9kZWMxOCIsIlRleHR1cmUyRCIsIl9kZWMxOSIsIl9kZWMyMCIsIl9kZWMyMSIsIl9kZWMyMiIsIl9kZWMyMyIsIl9kZWMyNCIsIl9jbGFzcyIsIl9kZXNjcmlwdG9yIiwiX2FwcGx5RGVjb3JhdGVkRGVzY3JpcHRvciIsIl9jbGFzczIiLCJfQ29tcG9uZW50IiwiQnVpbHRpblBpcGVsaW5lU2V0dGluZ3MiLCJfdGhpcyIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiY2FsbCIsImFwcGx5IiwiY29uY2F0IiwiX2luaXRpYWxpemVyRGVmaW5lUHJvcGVydHkiLCJfYXNzZXJ0VGhpc0luaXRpYWxpemVkIiwiX2Rlc2NyaXB0b3IyIiwiX2luaGVyaXRzTG9vc2UiLCJfcHJvdG8iLCJwcm90b3R5cGUiLCJnZXRQaXBlbGluZVNldHRpbmdzIiwidGhpcyIsIl9zZXR0aW5ncyIsIm9uRW5hYmxlIiwiZmlsbFJlcXVpcmVkUGlwZWxpbmVTZXR0aW5ncyIsImdldENvbXBvbmVudCIsImNhbWVyYSIsInBpcGVsaW5lU2V0dGluZ3MiLCJvbkRpc2FibGUiLCJfdHJ5RW5hYmxlRWRpdG9yUHJldmlldyIsInVuZGVmaW5lZCIsInJlbmRlcmluZyIsIl9lZGl0b3JQcmV2aWV3Iiwic2V0RWRpdG9yUGlwZWxpbmVTZXR0aW5ncyIsIl9kaXNhYmxlRWRpdG9yUHJldmlldyIsImdldEVkaXRvclBpcGVsaW5lU2V0dGluZ3MiLCJfY3JlYXRlQ2xhc3MiLCJrZXkiLCJnZXQiLCJzZXQiLCJ2IiwibXNhYSIsImVuYWJsZWQiLCJ2YWx1ZSIsInNhbXBsZUNvdW50IiwiTWF0aCIsInBvdyIsImNlaWwiLCJsb2cyIiwibWF4IiwiZW5hYmxlU2hhZGluZ1NjYWxlIiwic2hhZGluZ1NjYWxlIiwiYmxvb20iLCJtYXRlcmlhbCIsImVuYWJsZUFscGhhTWFzayIsIml0ZXJhdGlvbnMiLCJ0aHJlc2hvbGQiLCJpbnRlbnNpdHkiLCJjb2xvckdyYWRpbmciLCJjb250cmlidXRlIiwiY29sb3JHcmFkaW5nTWFwIiwidmFsIiwiZnhhYSIsImZzciIsInNoYXJwbmVzcyIsInRvbmVNYXBwaW5nIiwiQ29tcG9uZW50IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiaW5pdGlhbGl6ZXIiLCJtYWtlUGlwZWxpbmVTZXR0aW5ncyIsIk9iamVjdCIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIl9SRiIsInBvcCIsInJhZGl1c1NjYWxlIiwiYW5nbGVCaWFzRGVncmVlIiwiYmx1clNoYXJwbmVzcyIsImFvU2F0dXJhdGlvbiIsIm5lZWRCbHVyIiwiZmlsbFJlcXVpcmVkTVNBQSIsIm1ha2VNU0FBIiwiZmlsbFJlcXVpcmVkQmxvb20iLCJmaWxsUmVxdWlyZWRUb25lTWFwcGluZyIsImZpbGxSZXF1aXJlZENvbG9yR3JhZGluZyIsImZpbGxSZXF1aXJlZEZTUiIsImZpbGxSZXF1aXJlZEZYQUEiLCJTYW1wbGVDb3VudCIsImdmeCIsIlg0IiwibWFrZUJsb29tIiwibWFrZUNvbG9yR3JhZGluZyIsIm1ha2VGU1IiLCJtYWtlRlhBQSIsIm1ha2VUb25lTWFwcGluZyIsIkFBQkIiLCJnZW9tZXRyeSIsIlNwaGVyZSIsImludGVyc2VjdCIsIkNsZWFyRmxhZ0JpdCIsIkNvbG9yIiwiRm9ybWF0IiwiRm9ybWF0RmVhdHVyZUJpdCIsIkxvYWRPcCIsIlN0b3JlT3AiLCJUZXh0dXJlVHlwZSIsIlZpZXdwb3J0Iiwic2NlbmUiLCJyZW5kZXJlciIsIkNhbWVyYVVzYWdlIiwiQ1NNTGV2ZWwiLCJMaWdodFR5cGUiLCJmb3J3YXJkTmVlZENsZWFyQ29sb3IiLCJjbGVhckZsYWciLCJDT0xPUiIsIlNURU5DSUwiLCJnZXRDc21NYWluTGlnaHRWaWV3cG9ydCIsImxpZ2h0IiwidyIsImgiLCJsZXZlbCIsInZwIiwic2NyZWVuU3BhY2VTaWduWSIsInNoYWRvd0ZpeGVkQXJlYSIsImNzbUxldmVsIiwiTEVWRUxfMSIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsInRydW5jIiwiaGVpZ2h0IiwiZmxvb3IiLCJQaXBlbGluZUNvbmZpZ3MiLCJpc1dlYiIsImlzV2ViR0wxIiwiaXNXZWJHUFUiLCJpc01vYmlsZSIsImlzSERSIiwidXNlRmxvYXRPdXRwdXQiLCJ0b25lTWFwcGluZ1R5cGUiLCJzaGFkb3dFbmFibGVkIiwic2hhZG93TWFwRm9ybWF0IiwiUjMyRiIsInNoYWRvd01hcFNpemUiLCJWZWMyIiwidXNlUGxhbmFyU2hhZG93Iiwic3VwcG9ydERlcHRoU2FtcGxlIiwibW9iaWxlTWF4U3BvdExpZ2h0U2hhZG93TWFwcyIsInBsYXRmb3JtIiwiVmVjNCIsInNldHVwUGlwZWxpbmVDb25maWdzIiwicHBsIiwiY29uZmlncyIsInNhbXBsZUZlYXR1cmUiLCJTQU1QTEVEX1RFWFRVUkUiLCJMSU5FQVJfRklMVEVSIiwiZGV2aWNlIiwic3lzIiwiaXNOYXRpdmUiLCJnZnhBUEkiLCJBUEkiLCJXRUJHTCIsIldFQkdQVSIsInBpcGVsaW5lU2NlbmVEYXRhIiwiZ2V0TWFjcm9Cb29sIiwicG9zdFNldHRpbmdzIiwic2hhZG93SW5mbyIsInNoYWRvd3MiLCJwaXBlbGluZSIsInN1cHBvcnRzUjMyRmxvYXRUZXh0dXJlIiwiUkdCQTgiLCJzaXplIiwiU2hhZG93VHlwZSIsIlBsYW5hciIsImNhcGFiaWxpdGllcyIsImdldEZvcm1hdEZlYXR1cmVzIiwiREVQVEhfU1RFTkNJTCIsIngiLCJjbGlwU3BhY2VTaWduWSIsImRlZmF1bHRTZXR0aW5ncyIsIkNhbWVyYUNvbmZpZ3MiLCJzZXR0aW5ncyIsImlzTWFpbkdhbWVXaW5kb3ciLCJyZW5kZXJXaW5kb3dJZCIsImNvbG9yTmFtZSIsImRlcHRoU3RlbmNpbE5hbWUiLCJlbmFibGVGdWxsUGlwZWxpbmUiLCJlbmFibGVQcm9maWxlciIsInJlbWFpbmluZ1Bhc3NlcyIsIm5hdGl2ZVdpZHRoIiwibmF0aXZlSGVpZ2h0IiwiZW5hYmxlSERSIiwicmFkaWFuY2VGb3JtYXQiLCJjb3B5QW5kVG9uZW1hcE1hdGVyaWFsIiwiZW5hYmxlU3RvcmVTY2VuZURlcHRoIiwic0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrIiwiYWRkQ29weVRvU2NyZWVuUGFzcyIsInBwbENvbmZpZ3MiLCJjYW1lcmFDb25maWdzIiwiaW5wdXQiLCJhc3NlcnQiLCJwYXNzIiwiYWRkUmVuZGVyUGFzcyIsImFkZFJlbmRlclRhcmdldCIsIkNMRUFSIiwiU1RPUkUiLCJhZGRUZXh0dXJlIiwic2V0VmVjNCIsImFkZFF1ZXVlIiwiUXVldWVIaW50IiwiT1BBUVVFIiwiYWRkRnVsbHNjcmVlblF1YWQiLCJnZXRQaW5nUG9uZ1JlbmRlclRhcmdldCIsInByZXZOYW1lIiwicHJlZml4Iiwic3RhcnRzV2l0aCIsIk51bWJlciIsImNoYXJBdCIsIkZvcndhcmRMaWdodGluZyIsImxpZ2h0cyIsInNoYWRvd0VuYWJsZWRTcG90TGlnaHRzIiwiX3NwaGVyZSIsImNyZWF0ZSIsIl9ib3VuZGluZ0JveCIsIl9yYW5nZWREaXJMaWdodEJvdW5kaW5nQm94IiwiY3VsbExpZ2h0cyIsImZydXN0dW0iLCJjYW1lcmFQb3MiLCJfc3RlcCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyTG9vc2UiLCJzcG90TGlnaHRzIiwiZG9uZSIsImJha2VkIiwicG9zaXRpb24iLCJ5IiwieiIsInNwaGVyZUZydXN0dW0iLCJwdXNoIiwiX3N0ZXAyIiwiX2l0ZXJhdG9yMiIsInNwaGVyZUxpZ2h0cyIsIl9zdGVwMyIsIl9pdGVyYXRvcjMiLCJwb2ludExpZ2h0cyIsIl9zdGVwNCIsIl9pdGVyYXRvcjQiLCJyYW5nZWREaXJMaWdodHMiLCJ0cmFuc2Zvcm0iLCJub2RlIiwiZ2V0V29ybGRNYXRyaXgiLCJhYWJiRnJ1c3R1bSIsInNvcnQiLCJsaHMiLCJyaHMiLCJWZWMzIiwic3F1YXJlZERpc3RhbmNlIiwiX2FkZExpZ2h0UXVldWVzIiwiX3N0ZXA1IiwiX2l0ZXJhdG9yNSIsInF1ZXVlIiwiQkxFTkQiLCJTUEhFUkUiLCJTUE9UIiwiUE9JTlQiLCJSQU5HRURfRElSRUNUSU9OQUwiLCJhZGRTY2VuZSIsIlNjZW5lRmxhZ3MiLCJhZGRTcG90bGlnaHRTaGFkb3dQYXNzZXMiLCJtYXhOdW1TaGFkb3dNYXBzIiwiX3N0ZXA2IiwiaSIsIl9pdGVyYXRvcjYiLCJzaGFkb3dQYXNzIiwiYWRkRGVwdGhTdGVuY2lsIiwiRElTQ0FSRCIsIk5PTkUiLCJNQVNLIiwiU0hBRE9XX0NBU1RFUiIsInVzZUxpZ2h0RnJ1c3R1bSIsImFkZExpZ2h0UXVldWVzIiwiX3N0ZXA3IiwiX2l0ZXJhdG9yNyIsImFkZExpZ2h0UGFzc2VzIiwiZGVwdGhTdGVuY2lsU3RvcmVPcCIsInZpZXdwb3J0IiwiX3N0ZXA4IiwiY291bnQiLCJfaXRlcmF0b3I4Iiwic3RvcmVPcCIsInNldFZpZXdwb3J0IiwiTE9BRCIsImlzTXVsdGlwbGVMaWdodFBhc3Nlc05lZWRlZCIsIkJ1aWx0aW5Gb3J3YXJkUGFzc0J1aWxkZXIiLCJmb3J3YXJkTGlnaHRpbmciLCJfdmlld3BvcnQiLCJfY2xlYXJDb2xvciIsIl9yZWZsZWN0aW9uUHJvYmVDbGVhckNvbG9yIiwiX3Byb3RvMiIsImdldENvbmZpZ09yZGVyIiwiQ29uZmlnT3JkZXIiLCJnZXRSZW5kZXJPcmRlciIsIlJlbmRlck9yZGVyIiwiY29uZmlnQ2FtZXJhIiwicGlwZWxpbmVDb25maWdzIiwiZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwIiwibWFpbkxpZ2h0IiwiZW5hYmxlTWFpbkxpZ2h0UGxhbmFyU2hhZG93TWFwIiwiZW5hYmxlUGxhbmFyUmVmbGVjdGlvblByb2JlIiwiY2FtZXJhVXNhZ2UiLCJTQ0VORV9WSUVXIiwiZW5hYmxlTVNBQSIsImVuYWJsZVNpbmdsZUZvcndhcmRQYXNzIiwid2luZG93UmVzaXplIiwid2luZG93IiwiUmVzb3VyY2VGbGFncyIsIlJlc291cmNlUmVzaWRlbmN5IiwiVEVYMkQiLCJDT0xPUl9BVFRBQ0hNRU5UIiwiTUVNT1JZTEVTUyIsIkRFUFRIX1NURU5DSUxfQVRUQUNITUVOVCIsInNldHVwIiwiY29udGV4dCIsIl9hZGRDYXNjYWRlZFNoYWRvd01hcFBhc3MiLCJfdHJ5QWRkUmVmbGVjdGlvblByb2JlUGFzc2VzIiwiX2FkZEZvcndhcmRSYWRpYW5jZVBhc3NlcyIsInNoYWRvd1NpemUiLCJjc21TdXBwb3J0ZWQiLCJyZWZsZWN0aW9uUHJvYmVNYW5hZ2VyIiwiY2NsZWdhY3kiLCJpbnRlcm5hbCIsIl9zdGVwOSIsInByb2JlcyIsImdldFByb2JlcyIsInByb2JlSUQiLCJfaXRlcmF0b3I5IiwicHJvYmUiLCJuZWVkUmVuZGVyIiwiYXJlYSIsInJlbmRlckFyZWEiLCJwcm9iZVR5cGUiLCJQcm9iZVR5cGUiLCJQTEFOQVIiLCJyZWFsdGltZVBsYW5hclRleHR1cmUiLCJhZGRSZW5kZXJXaW5kb3ciLCJwcm9iZVBhc3MiLCJfYnVpbGRSZWZsZWN0aW9uUHJvYmVQYXNzIiwiY29sb3JTdG9yZU9wIiwiY2xlYXJDb2xvciIsInBhY2tSR0JFIiwiY2xlYXJEZXB0aCIsImNsZWFyU3RlbmNpbCIsIlJFRkxFQ1RJT05fUFJPQkUiLCJkaXNhYmxlTVNBQSIsInJvdW5kIiwiX2FkZEZvcndhcmRTaW5nbGVSYWRpYW5jZVBhc3MiLCJfYWRkRm9yd2FyZE11bHRpcGxlUmFkaWFuY2VQYXNzZXMiLCJfYWRkUGxhbmFyU2hhZG93UXVldWUiLCJzY2VuZUZsYWdzIiwiZ2VvbWV0cnlSZW5kZXJlciIsIkdFT01FVFJZIiwibXNhYVJhZGlhbmNlTmFtZSIsIm1zYWFEZXB0aFN0ZW5jaWxOYW1lIiwibXNQYXNzIiwiYWRkTXVsdGlzYW1wbGVSZW5kZXJQYXNzIiwiX2J1aWxkRm9yd2FyZE1haW5MaWdodFBhc3MiLCJyZXNvbHZlUmVuZGVyVGFyZ2V0IiwiZmlyc3RTdG9yZU9wIiwiUExBTkFSX1NIQURPVyIsIkJ1aWx0aW5CbG9vbVBhc3NCdWlsZGVyIiwiX2NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrIiwiX2Jsb29tUGFyYW1zIiwiX2Jsb29tVGV4U2l6ZSIsIl9ibG9vbVdpZHRocyIsIl9ibG9vbUhlaWdodHMiLCJfYmxvb21UZXhOYW1lcyIsIl9wcm90bzMiLCJlbmFibGVCbG9vbSIsImJsb29tV2lkdGgiLCJibG9vbUhlaWdodCIsInByZXZSZW5kZXJQYXNzIiwiX2FkZEthd2FzZUR1YWxGaWx0ZXJCbG9vbVBhc3NlcyIsImJsb29tTWF0ZXJpYWwiLCJyYWRpYW5jZU5hbWUiLCJzaXplQ291bnQiLCJwcmVmaWx0ZXJQYXNzIiwiZG93blBhc3MiLCJ1cFBhc3MiLCJjb21iaW5lUGFzcyIsIkJ1aWx0aW5Ub25lTWFwcGluZ1Bhc3NCdWlsZGVyIiwiX2NvbG9yR3JhZGluZ1RleFNpemUiLCJfcHJvdG80IiwiZW5hYmxlQ29sb3JHcmFkaW5nIiwiZW5hYmxlVG9uZU1hcHBpbmciLCJzZXRQcm9wZXJ0eSIsIl9hZGRDb3B5QW5kVG9uZW1hcFBhc3MiLCJsZHJDb2xvclByZWZpeCIsImxkckNvbG9yTmFtZSIsImx1dFRleCIsImlzU3F1YXJlTWFwIiwic2V0VmVjMiIsInNldEZsb2F0IiwiQnVpbHRpbkZYQUFQYXNzQnVpbGRlciIsIl9meGFhUGFyYW1zIiwiX3Byb3RvNSIsImVuYWJsZUZYQUEiLCJfYWRkRnhhYVBhc3MiLCJpbnB1dENvbG9yTmFtZSIsImZ4YWFNYXRlcmlhbCIsIkJ1aWx0aW5Gc3JQYXNzQnVpbGRlciIsIl9mc3JQYXJhbXMiLCJfZnNyVGV4U2l6ZSIsIl9wcm90bzYiLCJlbmFibGVGU1IiLCJvdXRwdXRDb2xvck5hbWUiLCJfYWRkRnNyUGFzcyIsImZzck1hdGVyaWFsIiwiY2xhbXAiLCJmc3JDb2xvck5hbWUiLCJlYXN1UGFzcyIsInJjYXNQYXNzIiwiQnVpbHRpblVpUGFzc0J1aWxkZXIiLCJfcHJvdG83IiwiZmxhZ3MiLCJVSSIsIlBST0ZJTEVSIiwic2hvd1N0YXRpc3RpY3MiLCJCdWlsdGluUGlwZWxpbmVCdWlsZGVyIiwiX3BpcGVsaW5lRXZlbnQiLCJkaXJlY3RvciIsInJvb3QiLCJwaXBlbGluZUV2ZW50IiwiX2ZvcndhcmRQYXNzIiwiX2Jsb29tUGFzcyIsIl90b25lTWFwcGluZ1Bhc3MiLCJfZnhhYVBhc3MiLCJfZnNyUGFzcyIsIl91aVBhc3MiLCJfY29uZmlncyIsIl9jYW1lcmFDb25maWdzIiwiX2NvcHlBbmRUb25lbWFwTWF0ZXJpYWwiLCJfaW5pdGlhbGl6ZWQiLCJfcGFzc0J1aWxkZXJzIiwiX3Byb3RvOCIsIl9zZXR1cFBpcGVsaW5lUHJldmlldyIsIlBSRVZJRVciLCJlZGl0b3JTZXR0aW5ncyIsIl9wcmVwYXJlUGlwZWxpbmVQYXNzZXMiLCJwYXNzQnVpbGRlcnMiLCJfcGFzc2VzIiwiX3N0ZXAxMCIsIl9pdGVyYXRvcjEwIiwiX3NldHVwQnVpbHRpbkNhbWVyYUNvbmZpZ3MiLCJHQU1FIiwic3dhcGNoYWluIiwidmlzaWJpbGl0eSIsIkxheWVycyIsIkVudW0iLCJERUZBVUxUIiwiREVCVUciLCJSR0JBMTZGIiwiX3NldHVwQ2FtZXJhQ29uZmlncyIsImEiLCJiIiwiX3N0ZXAxMSIsIl9pdGVyYXRvcjExIiwiYnVpbGRlciIsIl9zdGVwMTIiLCJfaXRlcmF0b3IxMiIsImNhbWVyYXMiLCJfaW5pdE1hdGVyaWFscyIsIl9zdGVwMTMiLCJfaXRlcmF0b3IxMyIsImVtaXQiLCJQaXBlbGluZUV2ZW50VHlwZSIsIlJFTkRFUl9DQU1FUkFfQkVHSU4iLCJfYnVpbGRGb3J3YXJkUGlwZWxpbmUiLCJfYnVpbGRTaW1wbGVQaXBlbGluZSIsIlJFTkRFUl9DQU1FUkFfRU5EIiwic29ydFBpcGVsaW5lUGFzc0J1aWxkZXJzQnlSZW5kZXJPcmRlciIsIl9zdGVwMTQiLCJsYXN0UGFzcyIsIl9pdGVyYXRvcjE0IiwiX3V1aWQiLCJpbml0aWFsaXplIiwiZWZmZWN0TmFtZSIsImVmZmVjdEFzc2V0Iiwic2V0Q3VzdG9tUGlwZWxpbmUiXSwibWFwcGluZ3MiOiJ5c0JBbUNBLElBQVFBLEVBQXlGQyxFQUF6RkQsUUFBU0UsRUFBZ0ZELEVBQWhGQyxpQkFBa0JDLEVBQThERixFQUE5REUsa0JBQW1CQyxFQUEyQ0gsRUFBM0NHLEtBQU1DLEVBQXFDSixFQUFyQ0ksU0FBVUMsRUFBMkJMLEVBQTNCSyxpQkFBMkJMLEVBQVRNLGtDQU9wREMsRUFMbkNSLEVBQVEsMkJBQTBCUyxFQUNsQ0wsRUFBSyxxQ0FBb0NNLEVBQ3pDSixFQUFpQkssR0FBT0MsRUFpQ3BCUCxFQUFTUSxHQUFVQyxFQUduQlQsRUFBUyxDQUNOVSxZQUFhLGdDQUNiUixLQUFNTSxJQUNSRyxFQStCRFgsRUFBUyxDQUNOWSxNQUFPLENBQUVDLEdBQUksT0FBUUMsS0FBTSw2QkFDM0JaLEtBQU1NLElBQ1JPLEVBV0RmLEVBQVMsQ0FDTlksTUFBTyxDQUFFQyxHQUFJLE9BQVFDLEtBQU0sNEJBQTZCRSxNQUFPLFdBQy9EZCxLQUFNZSxFQUNOQyxNQUFPLENBQUMsRUFBRyxFQUFHLEtBQ2hCQyxFQWNEbkIsRUFBUyxDQUNOWSxNQUFPLENBQUVDLEdBQUksZUFBZ0JDLEtBQU0sZUFBZ0JFLE1BQU8sV0FDMURkLEtBQU1NLElBQ1JZLEVBV0RwQixFQUFTLENBQ05xQixRQUFTLGdDQUNUVCxNQUFPLENBQUVDLEdBQUksZUFBZ0JDLEtBQU0sZ0JBQ25DWixLQUFNb0IsRUFDTkosTUFBTyxDQUFDLElBQU0sRUFBRyxLQUNqQkssT0FBTyxJQUNUQyxFQVlEeEIsRUFBUyxDQUNOWSxNQUFPLENBQUVD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QVBBLElBT2tDZ0MsRUFQNUI5SixFQUEyQixDQUM3QjFJLFVBQVcsR0FDWEMsaUJBQWtCLElBR2xCd1MsT0FBeURwYyxFQUU3RHFjLEVBQUE1UCxFQUFzQjBOLEtBQVlnQyxFQUFBRSxLQUFBMVAsTUFBRSxDQUFBLElBQXpCME8sRUFBT2MsRUFBQXRiLE1BQ1Z3YSxFQUFRakosUUFDUmdLLEVBQVdmLEVBQVFqSixNQUFNMUssRUFBS25JLEtBQUtrYSxTQUFVbGEsS0FBS21hLGVBQzlDOVosRUFBUXlTLEVBQVMrSixJQUk3QnpSLEVBQStDLElBQXhDcEwsS0FBS21hLGVBQWUzUCxrQkFDOUIrUCxFQUVPMkIsZUFBUixTQUF1Qi9ULEdBQ25CLE9BQUluSSxLQUFLcWEsYUFDRSxHQUdYblMsRUFBcUJDLEVBQUtuSSxLQUFLa2EsVUFHL0JsYSxLQUFLb2Esd0JBQXdCMkMsK0NBQzdCL2MsS0FBS29hLHdCQUF3QjRDLFdBQVcsQ0FBRUMsV0FBWSx1Q0FFbERqZCxLQUFLb2Esd0JBQXdCOEMsY0FDN0JsZCxLQUFLcWEsY0FBZSxHQUdqQnJhLEtBQUtxYSxhQUFlLEVBQUksSUFDbENkLEtBR0w3WSxFQUFVeWMsa0JBQWtCLFVBQVcsSUFBSTVELEtBRTdDbFcsSUFBQUMiLCJmaWxlIjoiYWxsLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLypcbiBDb3B5cmlnaHQgKGMpIDIwMjEtMjAyNCBYaWFtZW4gWWFqaSBTb2Z0d2FyZSBDby4sIEx0ZC5cblxuIGh0dHBzOi8vd3d3LmNvY29zLmNvbS9cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0b1xuIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzXG4gb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gVEhFIFNPRlRXQVJFLlxuKi9cblxuaW1wb3J0IHtcbiAgICBfZGVjb3JhdG9yLCBDYW1lcmEsIENDQm9vbGVhbiwgQ0NGbG9hdCwgQ0NJbnRlZ2VyLCBDb21wb25lbnQsXG4gICAgTWF0ZXJpYWwsIHJlbmRlcmluZywgVGV4dHVyZTJELFxufSBmcm9tICdjYyc7XG5cbmltcG9ydCB7IEVESVRPUiB9IGZyb20gJ2NjL2Vudic7XG5cbmltcG9ydCB7XG4gICAgZmlsbFJlcXVpcmVkUGlwZWxpbmVTZXR0aW5ncywgbWFrZVBpcGVsaW5lU2V0dGluZ3MsIFBpcGVsaW5lU2V0dGluZ3MsXG59IGZyb20gJy4vYnVpbHRpbi1waXBlbGluZS10eXBlcyc7XG5cbmNvbnN0IHsgY2NjbGFzcywgZGlzYWxsb3dNdWx0aXBsZSwgZXhlY3V0ZUluRWRpdE1vZGUsIG1lbnUsIHByb3BlcnR5LCByZXF1aXJlQ29tcG9uZW50LCB0eXBlIH0gPSBfZGVjb3JhdG9yO1xuXG5AY2NjbGFzcygnQnVpbHRpblBpcGVsaW5lU2V0dGluZ3MnKVxuQG1lbnUoJ1JlbmRlcmluZy9CdWlsdGluUGlwZWxpbmVTZXR0aW5ncycpXG5AcmVxdWlyZUNvbXBvbmVudChDYW1lcmEpXG5AZGlzYWxsb3dNdWx0aXBsZVxuQGV4ZWN1dGVJbkVkaXRNb2RlXG5leHBvcnQgY2xhc3MgQnVpbHRpblBpcGVsaW5lU2V0dGluZ3MgZXh0ZW5kcyBDb21wb25lbnQge1xuICAgIEBwcm9wZXJ0eVxuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NldHRpbmdzOiBQaXBlbGluZVNldHRpbmdzID0gbWFrZVBpcGVsaW5lU2V0dGluZ3MoKTtcblxuICAgIGdldFBpcGVsaW5lU2V0dGluZ3MoKTogUGlwZWxpbmVTZXR0aW5ncyB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncztcbiAgICB9XG5cbiAgICAvLyBFbmFibGUvRGlzYWJsZVxuICAgIG9uRW5hYmxlKCk6IHZvaWQge1xuICAgICAgICBmaWxsUmVxdWlyZWRQaXBlbGluZVNldHRpbmdzKHRoaXMuX3NldHRpbmdzKTtcbiAgICAgICAgY29uc3QgY2FtZXJhQ29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoQ2FtZXJhKSE7XG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IGNhbWVyYUNvbXBvbmVudC5jYW1lcmE7XG4gICAgICAgIGNhbWVyYS5waXBlbGluZVNldHRpbmdzID0gdGhpcy5fc2V0dGluZ3M7XG5cbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIG9uRGlzYWJsZSgpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgY2FtZXJhQ29tcG9uZW50ID0gdGhpcy5nZXRDb21wb25lbnQoQ2FtZXJhKSE7XG4gICAgICAgIGNvbnN0IGNhbWVyYSA9IGNhbWVyYUNvbXBvbmVudC5jYW1lcmE7XG4gICAgICAgIGNhbWVyYS5waXBlbGluZVNldHRpbmdzID0gbnVsbDtcblxuICAgICAgICBpZiAoRURJVE9SKSB7XG4gICAgICAgICAgICB0aGlzLl9kaXNhYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8gRWRpdG9yIFByZXZpZXdcbiAgICBAcHJvcGVydHkoQ0NCb29sZWFuKVxuICAgIHByb3RlY3RlZCBfZWRpdG9yUHJldmlldyA9IGZhbHNlO1xuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZGlzcGxheU5hbWU6ICdFZGl0b3IgUHJldmlldyAoRXhwZXJpbWVudGFsKScsXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcbiAgICB9KVxuICAgIGdldCBlZGl0b3JQcmV2aWV3KCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fZWRpdG9yUHJldmlldztcbiAgICB9XG4gICAgc2V0IGVkaXRvclByZXZpZXcodjogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9lZGl0b3JQcmV2aWV3ID0gdjtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBfdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHJlbmRlcmluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2VkaXRvclByZXZpZXcpIHtcbiAgICAgICAgICAgIHJlbmRlcmluZy5zZXRFZGl0b3JQaXBlbGluZVNldHRpbmdzKHRoaXMuX3NldHRpbmdzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2Rpc2FibGVFZGl0b3JQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHVibGljIF9kaXNhYmxlRWRpdG9yUHJldmlldygpOiB2b2lkIHtcbiAgICAgICAgaWYgKHJlbmRlcmluZyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VycmVudCA9IHJlbmRlcmluZy5nZXRFZGl0b3JQaXBlbGluZVNldHRpbmdzKCkgYXMgUGlwZWxpbmVTZXR0aW5ncyB8IG51bGw7XG4gICAgICAgIGlmIChjdXJyZW50ID09PSB0aGlzLl9zZXR0aW5ncykge1xuICAgICAgICAgICAgcmVuZGVyaW5nLnNldEVkaXRvclBpcGVsaW5lU2V0dGluZ3MobnVsbCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNU0FBXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdNU0FBJywgbmFtZTogJ011bHRpc2FtcGxlIEFudGktQWxpYXNpbmcnIH0sXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcbiAgICB9KVxuICAgIGdldCBNc2FhRW5hYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MubXNhYS5lbmFibGVkO1xuICAgIH1cbiAgICBzZXQgTXNhYUVuYWJsZSh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9zZXR0aW5ncy5tc2FhLmVuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdNU0FBJywgbmFtZTogJ011bHRpc2FtcGxlIEFudGktQWxpYXNpbmcnLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IENDSW50ZWdlcixcbiAgICAgICAgcmFuZ2U6IFsyLCA0LCAyXSxcbiAgICB9KVxuICAgIHNldCBtc2FhU2FtcGxlQ291bnQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB2YWx1ZSA9IDIgKiogTWF0aC5jZWlsKE1hdGgubG9nMihNYXRoLm1heCh2YWx1ZSwgMikpKTtcbiAgICAgICAgdmFsdWUgPSBNYXRoLm1pbih2YWx1ZSwgNCk7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLm1zYWEuc2FtcGxlQ291bnQgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtc2FhU2FtcGxlQ291bnQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLm1zYWEuc2FtcGxlQ291bnQ7XG4gICAgfVxuXG4gICAgLy8gU2hhZGluZyBTY2FsZVxuICAgIEBwcm9wZXJ0eSh7XG4gICAgICAgIGdyb3VwOiB7IGlkOiAnU2hhZGluZ1NjYWxlJywgbmFtZTogJ1NoYWRpbmdTY2FsZScsIHN0eWxlOiAnc2VjdGlvbicgfSxcbiAgICAgICAgdHlwZTogQ0NCb29sZWFuLFxuICAgIH0pXG4gICAgc2V0IHNoYWRpbmdTY2FsZUVuYWJsZSh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9zZXR0aW5ncy5lbmFibGVTaGFkaW5nU2NhbGUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFkaW5nU2NhbGVFbmFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5lbmFibGVTaGFkaW5nU2NhbGU7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46cG9zdHByb2Nlc3Muc2hhZGluZ1NjYWxlJyxcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdTaGFkaW5nU2NhbGUnLCBuYW1lOiAnU2hhZGluZ1NjYWxlJyB9LFxuICAgICAgICB0eXBlOiBDQ0Zsb2F0LFxuICAgICAgICByYW5nZTogWzAuMDEsIDQsIDAuMDFdLFxuICAgICAgICBzbGlkZTogdHJ1ZSxcbiAgICB9KVxuICAgIHNldCBzaGFkaW5nU2NhbGUodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9zZXR0aW5ncy5zaGFkaW5nU2NhbGUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBzaGFkaW5nU2NhbGUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLnNoYWRpbmdTY2FsZTtcbiAgICB9XG5cbiAgICAvLyBCbG9vbVxuICAgIEBwcm9wZXJ0eSh7XG4gICAgICAgIGdyb3VwOiB7IGlkOiAnQmxvb20nLCBuYW1lOiAnQmxvb20gKFBvc3RQcm9jZXNzaW5nKScsIHN0eWxlOiAnc2VjdGlvbicgfSxcbiAgICAgICAgdHlwZTogQ0NCb29sZWFuLFxuICAgIH0pXG4gICAgc2V0IGJsb29tRW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmJsb29tLmVuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBibG9vbUVuYWJsZSgpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmJsb29tLmVuYWJsZWQ7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdCbG9vbScsIG5hbWU6ICdCbG9vbSAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBNYXRlcmlhbCxcbiAgICB9KVxuICAgIHNldCBibG9vbU1hdGVyaWFsKHZhbHVlOiBNYXRlcmlhbCkge1xuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuYmxvb20ubWF0ZXJpYWwgPT09IHZhbHVlKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuYmxvb20ubWF0ZXJpYWwgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBibG9vbU1hdGVyaWFsKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmJsb29tLm1hdGVyaWFsITtcbiAgICB9XG5cbiAgICBAcHJvcGVydHkoe1xuICAgICAgICB0b29sdGlwOiAnaTE4bjpibG9vbS5lbmFibGVBbHBoYU1hc2snLFxuICAgICAgICBncm91cDogeyBpZDogJ0Jsb29tJywgbmFtZTogJ0Jsb29tIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcbiAgICB9KVxuICAgIHNldCBibG9vbUVuYWJsZUFscGhhTWFzayh2YWx1ZTogYm9vbGVhbikge1xuICAgICAgICB0aGlzLl9zZXR0aW5ncy5ibG9vbS5lbmFibGVBbHBoYU1hc2sgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBibG9vbUVuYWJsZUFscGhhTWFzaygpOiBib29sZWFuIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmJsb29tLmVuYWJsZUFscGhhTWFzaztcbiAgICB9XG5cbiAgICBAcHJvcGVydHkoe1xuICAgICAgICB0b29sdGlwOiAnaTE4bjpibG9vbS5pdGVyYXRpb25zJyxcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdCbG9vbScsIG5hbWU6ICdCbG9vbSAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBDQ0ludGVnZXIsXG4gICAgICAgIHJhbmdlOiBbMSwgNiwgMV0sXG4gICAgICAgIHNsaWRlOiB0cnVlLFxuICAgIH0pXG4gICAgc2V0IGJsb29tSXRlcmF0aW9ucyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmJsb29tLml0ZXJhdGlvbnMgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBibG9vbUl0ZXJhdGlvbnMoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmJsb29tLml0ZXJhdGlvbnM7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Ymxvb20udGhyZXNob2xkJyxcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdCbG9vbScsIG5hbWU6ICdCbG9vbSAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBDQ0Zsb2F0LFxuICAgICAgICBtaW46IDAsXG4gICAgfSlcbiAgICBzZXQgYmxvb21UaHJlc2hvbGQodmFsdWU6IG51bWJlcikge1xuICAgICAgICB0aGlzLl9zZXR0aW5ncy5ibG9vbS50aHJlc2hvbGQgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGJsb29tVGhyZXNob2xkKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5ibG9vbS50aHJlc2hvbGQ7XG4gICAgfVxuXG4gICAgc2V0IGJsb29tSW50ZW5zaXR5KHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuYmxvb20uaW50ZW5zaXR5ID0gdmFsdWU7XG4gICAgfVxuICAgIGdldCBibG9vbUludGVuc2l0eSgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MuYmxvb20uaW50ZW5zaXR5O1xuICAgIH1cblxuICAgIC8vIENvbG9yIEdyYWRpbmcgKExEUilcbiAgICBAcHJvcGVydHkoe1xuICAgICAgICBncm91cDogeyBpZDogJ0NvbG9yIEdyYWRpbmcnLCBuYW1lOiAnQ29sb3JHcmFkaW5nIChMRFIpIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcbiAgICB9KVxuICAgIHNldCBjb2xvckdyYWRpbmdFbmFibGUodmFsdWU6IGJvb2xlYW4pIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuY29sb3JHcmFkaW5nLmVuYWJsZWQgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjb2xvckdyYWRpbmdFbmFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5jb2xvckdyYWRpbmcuZW5hYmxlZDtcbiAgICB9XG5cbiAgICBAcHJvcGVydHkoe1xuICAgICAgICBncm91cDogeyBpZDogJ0NvbG9yIEdyYWRpbmcnLCBuYW1lOiAnQ29sb3JHcmFkaW5nIChMRFIpIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IE1hdGVyaWFsLFxuICAgIH0pXG4gICAgc2V0IGNvbG9yR3JhZGluZ01hdGVyaWFsKHZhbHVlOiBNYXRlcmlhbCkge1xuICAgICAgICBpZiAodGhpcy5fc2V0dGluZ3MuY29sb3JHcmFkaW5nLm1hdGVyaWFsID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5tYXRlcmlhbCA9IHZhbHVlO1xuICAgICAgICBpZiAoRURJVE9SKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGNvbG9yR3JhZGluZ01hdGVyaWFsKCk6IE1hdGVyaWFsIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5tYXRlcmlhbCE7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgdG9vbHRpcDogJ2kxOG46Y29sb3JfZ3JhZGluZy5jb250cmlidXRlJyxcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdDb2xvciBHcmFkaW5nJywgbmFtZTogJ0NvbG9yR3JhZGluZyAoTERSKSAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBDQ0Zsb2F0LFxuICAgICAgICByYW5nZTogWzAsIDEsIDAuMDFdLFxuICAgICAgICBzbGlkZTogdHJ1ZSxcbiAgICB9KVxuICAgIHNldCBjb2xvckdyYWRpbmdDb250cmlidXRlKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuY29sb3JHcmFkaW5nLmNvbnRyaWJ1dGUgPSB2YWx1ZTtcbiAgICB9XG4gICAgZ2V0IGNvbG9yR3JhZGluZ0NvbnRyaWJ1dGUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5jb250cmlidXRlO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eSh7XG4gICAgICAgIHRvb2x0aXA6ICdpMThuOmNvbG9yX2dyYWRpbmcub3JpZ2luYWxNYXAnLFxuICAgICAgICBncm91cDogeyBpZDogJ0NvbG9yIEdyYWRpbmcnLCBuYW1lOiAnQ29sb3JHcmFkaW5nIChMRFIpIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IFRleHR1cmUyRCxcbiAgICB9KVxuICAgIHNldCBjb2xvckdyYWRpbmdNYXAodmFsOiBUZXh0dXJlMkQpIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuY29sb3JHcmFkaW5nLmNvbG9yR3JhZGluZ01hcCA9IHZhbDtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBjb2xvckdyYWRpbmdNYXAoKTogVGV4dHVyZTJEIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzLmNvbG9yR3JhZGluZy5jb2xvckdyYWRpbmdNYXAhO1xuICAgIH1cblxuICAgIC8vIEZYQUFcbiAgICBAcHJvcGVydHkoe1xuICAgICAgICBncm91cDogeyBpZDogJ0ZYQUEnLCBuYW1lOiAnRmFzdCBBcHByb3hpbWF0ZSBBbnRpLUFsaWFzaW5nIChQb3N0UHJvY2Vzc2luZyknLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IENDQm9vbGVhbixcbiAgICB9KVxuICAgIHNldCBmeGFhRW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmZ4YWEuZW5hYmxlZCA9IHZhbHVlO1xuICAgICAgICBpZiAoRURJVE9SKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IGZ4YWFFbmFibGUoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5meGFhLmVuYWJsZWQ7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdGWEFBJywgbmFtZTogJ0Zhc3QgQXBwcm94aW1hdGUgQW50aS1BbGlhc2luZyAoUG9zdFByb2Nlc3NpbmcpJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBNYXRlcmlhbCxcbiAgICB9KVxuICAgIHNldCBmeGFhTWF0ZXJpYWwodmFsdWU6IE1hdGVyaWFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy5meGFhLm1hdGVyaWFsID09PSB2YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmZ4YWEubWF0ZXJpYWwgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBmeGFhTWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MuZnhhYS5tYXRlcmlhbCE7XG4gICAgfVxuXG4gICAgLy8gRlNSXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdGU1InLCBuYW1lOiAnRmlkZWxpdHlGWCBTdXBlciBSZXNvbHV0aW9uJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBDQ0Jvb2xlYW4sXG4gICAgfSlcbiAgICBzZXQgZnNyRW5hYmxlKHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgIHRoaXMuX3NldHRpbmdzLmZzci5lbmFibGVkID0gdmFsdWU7XG4gICAgICAgIGlmIChFRElUT1IpIHtcbiAgICAgICAgICAgIHRoaXMuX3RyeUVuYWJsZUVkaXRvclByZXZpZXcoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgZnNyRW5hYmxlKCk6IGJvb2xlYW4ge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MuZnNyLmVuYWJsZWQ7XG4gICAgfVxuXG4gICAgQHByb3BlcnR5KHtcbiAgICAgICAgZ3JvdXA6IHsgaWQ6ICdGU1InLCBuYW1lOiAnRmlkZWxpdHlGWCBTdXBlciBSZXNvbHV0aW9uJywgc3R5bGU6ICdzZWN0aW9uJyB9LFxuICAgICAgICB0eXBlOiBNYXRlcmlhbCxcbiAgICB9KVxuICAgIHNldCBmc3JNYXRlcmlhbCh2YWx1ZTogTWF0ZXJpYWwpIHtcbiAgICAgICAgaWYgKHRoaXMuX3NldHRpbmdzLmZzci5tYXRlcmlhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXR0aW5ncy5mc3IubWF0ZXJpYWwgPSB2YWx1ZTtcbiAgICAgICAgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgdGhpcy5fdHJ5RW5hYmxlRWRpdG9yUHJldmlldygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBmc3JNYXRlcmlhbCgpOiBNYXRlcmlhbCB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5mc3IubWF0ZXJpYWwhO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eSh7XG4gICAgICAgIGdyb3VwOiB7IGlkOiAnRlNSJywgbmFtZTogJ0ZpZGVsaXR5RlggU3VwZXIgUmVzb2x1dGlvbicsIHN0eWxlOiAnc2VjdGlvbicgfSxcbiAgICAgICAgdHlwZTogQ0NGbG9hdCxcbiAgICAgICAgcmFuZ2U6IFswLCAxLCAwLjAxXSxcbiAgICAgICAgc2xpZGU6IHRydWUsXG4gICAgfSlcbiAgICBzZXQgZnNyU2hhcnBuZXNzKHZhbHVlOiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MuZnNyLnNoYXJwbmVzcyA9IHZhbHVlO1xuICAgIH1cbiAgICBnZXQgZnNyU2hhcnBuZXNzKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zZXR0aW5ncy5mc3Iuc2hhcnBuZXNzO1xuICAgIH1cblxuICAgIEBwcm9wZXJ0eSh7XG4gICAgICAgIGdyb3VwOiB7IGlkOiAnVG9uZU1hcHBpbmcnLCBuYW1lOiAnVG9uZU1hcHBpbmcnLCBzdHlsZTogJ3NlY3Rpb24nIH0sXG4gICAgICAgIHR5cGU6IE1hdGVyaWFsLFxuICAgIH0pXG4gICAgc2V0IHRvbmVNYXBwaW5nTWF0ZXJpYWwodmFsdWU6IE1hdGVyaWFsKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5ncy50b25lTWFwcGluZy5tYXRlcmlhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZXR0aW5ncy50b25lTWFwcGluZy5tYXRlcmlhbCA9IHZhbHVlO1xuICAgICAgICBpZiAoRURJVE9SKSB7XG4gICAgICAgICAgICB0aGlzLl90cnlFbmFibGVFZGl0b3JQcmV2aWV3KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IHRvbmVNYXBwaW5nTWF0ZXJpYWwoKTogTWF0ZXJpYWwge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3MudG9uZU1hcHBpbmcubWF0ZXJpYWwhO1xuICAgIH1cbn1cbiIsIi8qXG4gQ29weXJpZ2h0IChjKSAyMDIxLTIwMjQgWGlhbWVuIFlhamkgU29mdHdhcmUgQ28uLCBMdGQuXG5cbiBodHRwczovL3d3dy5jb2Nvcy5jb21cblxuIFBlcm1pc3Npb24gaXMgaGVyZWJ5IGdyYW50ZWQsIGZyZWUgb2YgY2hhcmdlLCB0byBhbnkgcGVyc29uIG9idGFpbmluZyBhIGNvcHlcbiBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24gZmlsZXMgKHRoZSBcIlNvZnR3YXJlXCIpLCB0byBkZWFsXG4gaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZyB3aXRob3V0IGxpbWl0YXRpb24gdGhlIHJpZ2h0cyB0b1xuIHVzZSwgY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzXG4gb2YgdGhlIFNvZnR3YXJlLCBhbmQgdG8gcGVybWl0IHBlcnNvbnMgdG8gd2hvbSB0aGUgU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLFxuIHN1YmplY3QgdG8gdGhlIGZvbGxvd2luZyBjb25kaXRpb25zOlxuXG4gVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUgaW5jbHVkZWQgaW5cbiBhbGwgY29waWVzIG9yIHN1YnN0YW50aWFsIHBvcnRpb25zIG9mIHRoZSBTb2Z0d2FyZS5cblxuIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIsIFdJVEhPVVQgV0FSUkFOVFkgT0YgQU5ZIEtJTkQsIEVYUFJFU1MgT1JcbiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWSxcbiBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEVcbiBBVVRIT1JTIE9SIENPUFlSSUdIVCBIT0xERVJTIEJFIExJQUJMRSBGT1IgQU5ZIENMQUlNLCBEQU1BR0VTIE9SIE9USEVSXG4gTElBQklMSVRZLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgVE9SVCBPUiBPVEhFUldJU0UsIEFSSVNJTkcgRlJPTSxcbiBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SIE9USEVSIERFQUxJTkdTIElOXG4gVEhFIFNPRlRXQVJFLlxuKi9cblxuLyoqXG4gKiA9PT09PT09PT09PT09PT09PT09PT09PT09ICFETyBOT1QgQ0hBTkdFIFRIRSBGT0xMT1dJTkcgU0VDVElPTiBNQU5VQUxMWSEgPT09PT09PT09PT09PT09PT09PT09PT09PVxuICogVGhlIGZvbGxvd2luZyBzZWN0aW9uIGlzIGF1dG8tZ2VuZXJhdGVkLlxuICogPT09PT09PT09PT09PT09PT09PT09PT09PSAhRE8gTk9UIENIQU5HRSBUSEUgRk9MTE9XSU5HIFNFQ1RJT04gTUFOVUFMTFkhID09PT09PT09PT09PT09PT09PT09PT09PT1cbiAqL1xuLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuaW1wb3J0IHsgTWF0ZXJpYWwsIFRleHR1cmUyRCwgZ2Z4IH0gZnJvbSAnY2MnO1xuXG5jb25zdCB7IFNhbXBsZUNvdW50IH0gPSBnZng7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTVNBQSB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLyogZmFsc2UgKi9cbiAgICBzYW1wbGVDb3VudDogZ2Z4LlNhbXBsZUNvdW50OyAvKiBTYW1wbGVDb3VudC5YNCAqL1xuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZU1TQUEoKTogTVNBQSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHNhbXBsZUNvdW50OiBTYW1wbGVDb3VudC5YNCxcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkTVNBQSh2YWx1ZTogTVNBQSk6IHZvaWQge1xuICAgIGlmICh2YWx1ZS5lbmFibGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUuZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodmFsdWUuc2FtcGxlQ291bnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5zYW1wbGVDb3VudCA9IFNhbXBsZUNvdW50Llg0O1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBIQkFPIHtcbiAgICBlbmFibGVkOiBib29sZWFuOyAvKiBmYWxzZSAqL1xuICAgIHJhZGl1c1NjYWxlOiBudW1iZXI7IC8qIDEgKi9cbiAgICBhbmdsZUJpYXNEZWdyZWU6IG51bWJlcjsgLyogMTAgKi9cbiAgICBibHVyU2hhcnBuZXNzOiBudW1iZXI7IC8qIDMgKi9cbiAgICBhb1NhdHVyYXRpb246IG51bWJlcjsgLyogMSAqL1xuICAgIG5lZWRCbHVyOiBib29sZWFuOyAvKiBmYWxzZSAqL1xuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUhCQU8oKTogSEJBTyB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHJhZGl1c1NjYWxlOiAxLFxuICAgICAgICBhbmdsZUJpYXNEZWdyZWU6IDEwLFxuICAgICAgICBibHVyU2hhcnBuZXNzOiAzLFxuICAgICAgICBhb1NhdHVyYXRpb246IDEsXG4gICAgICAgIG5lZWRCbHVyOiBmYWxzZSxcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkSEJBTyh2YWx1ZTogSEJBTyk6IHZvaWQge1xuICAgIGlmICh2YWx1ZS5lbmFibGVkID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUuZW5hYmxlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodmFsdWUucmFkaXVzU2NhbGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5yYWRpdXNTY2FsZSA9IDE7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5hbmdsZUJpYXNEZWdyZWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5hbmdsZUJpYXNEZWdyZWUgPSAxMDtcbiAgICB9XG4gICAgaWYgKHZhbHVlLmJsdXJTaGFycG5lc3MgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5ibHVyU2hhcnBuZXNzID0gMztcbiAgICB9XG4gICAgaWYgKHZhbHVlLmFvU2F0dXJhdGlvbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLmFvU2F0dXJhdGlvbiA9IDE7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5uZWVkQmx1ciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLm5lZWRCbHVyID0gZmFsc2U7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsb29tIHtcbiAgICBlbmFibGVkOiBib29sZWFuOyAvKiBmYWxzZSAqL1xuICAgIC8qIHJlZmNvdW50ICovIG1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGw7XG4gICAgZW5hYmxlQWxwaGFNYXNrOiBib29sZWFuOyAvKiBmYWxzZSAqL1xuICAgIGl0ZXJhdGlvbnM6IG51bWJlcjsgLyogMyAqL1xuICAgIHRocmVzaG9sZDogbnVtYmVyOyAvKiAwLjggKi9cbiAgICBpbnRlbnNpdHk6IG51bWJlcjsgLyogMi4zICovXG4gICAgW25hbWU6IHN0cmluZ106IHVua25vd247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlQmxvb20oKTogQmxvb20ge1xuICAgIHJldHVybiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBtYXRlcmlhbDogbnVsbCxcbiAgICAgICAgZW5hYmxlQWxwaGFNYXNrOiBmYWxzZSxcbiAgICAgICAgaXRlcmF0aW9uczogMyxcbiAgICAgICAgdGhyZXNob2xkOiAwLjgsXG4gICAgICAgIGludGVuc2l0eTogMi4zLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxsUmVxdWlyZWRCbG9vbSh2YWx1ZTogQmxvb20pOiB2b2lkIHtcbiAgICBpZiAodmFsdWUuZW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlLm1hdGVyaWFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUubWF0ZXJpYWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodmFsdWUuZW5hYmxlQWxwaGFNYXNrID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUuZW5hYmxlQWxwaGFNYXNrID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5pdGVyYXRpb25zID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUuaXRlcmF0aW9ucyA9IDM7XG4gICAgfVxuICAgIGlmICh2YWx1ZS50aHJlc2hvbGQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS50aHJlc2hvbGQgPSAwLjg7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5pbnRlbnNpdHkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5pbnRlbnNpdHkgPSAyLjM7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbG9yR3JhZGluZyB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLyogZmFsc2UgKi9cbiAgICAvKiByZWZjb3VudCAqLyBtYXRlcmlhbDogTWF0ZXJpYWwgfCBudWxsO1xuICAgIGNvbnRyaWJ1dGU6IG51bWJlcjsgLyogMSAqL1xuICAgIC8qIHJlZmNvdW50ICovIGNvbG9yR3JhZGluZ01hcDogVGV4dHVyZTJEIHwgbnVsbDtcbiAgICBbbmFtZTogc3RyaW5nXTogdW5rbm93bjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VDb2xvckdyYWRpbmcoKTogQ29sb3JHcmFkaW5nIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBlbmFibGVkOiBmYWxzZSxcbiAgICAgICAgbWF0ZXJpYWw6IG51bGwsXG4gICAgICAgIGNvbnRyaWJ1dGU6IDEsXG4gICAgICAgIGNvbG9yR3JhZGluZ01hcDogbnVsbCxcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkQ29sb3JHcmFkaW5nKHZhbHVlOiBDb2xvckdyYWRpbmcpOiB2b2lkIHtcbiAgICBpZiAodmFsdWUuZW5hYmxlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLmVuYWJsZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHZhbHVlLm1hdGVyaWFsID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUubWF0ZXJpYWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodmFsdWUuY29udHJpYnV0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLmNvbnRyaWJ1dGUgPSAxO1xuICAgIH1cbiAgICBpZiAodmFsdWUuY29sb3JHcmFkaW5nTWFwID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUuY29sb3JHcmFkaW5nTWFwID0gbnVsbDtcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRlNSIHtcbiAgICBlbmFibGVkOiBib29sZWFuOyAvKiBmYWxzZSAqL1xuICAgIC8qIHJlZmNvdW50ICovIG1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGw7XG4gICAgc2hhcnBuZXNzOiBudW1iZXI7IC8qIDAuOCAqL1xuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUZTUigpOiBGU1Ige1xuICAgIHJldHVybiB7XG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICBtYXRlcmlhbDogbnVsbCxcbiAgICAgICAgc2hhcnBuZXNzOiAwLjgsXG4gICAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbGxSZXF1aXJlZEZTUih2YWx1ZTogRlNSKTogdm9pZCB7XG4gICAgaWYgKHZhbHVlLmVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5lbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5tYXRlcmlhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLm1hdGVyaWFsID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHZhbHVlLnNoYXJwbmVzcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLnNoYXJwbmVzcyA9IDAuODtcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRlhBQSB7XG4gICAgZW5hYmxlZDogYm9vbGVhbjsgLyogZmFsc2UgKi9cbiAgICAvKiByZWZjb3VudCAqLyBtYXRlcmlhbDogTWF0ZXJpYWwgfCBudWxsO1xuICAgIFtuYW1lOiBzdHJpbmddOiB1bmtub3duO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZUZYQUEoKTogRlhBQSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgZW5hYmxlZDogZmFsc2UsXG4gICAgICAgIG1hdGVyaWFsOiBudWxsLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxsUmVxdWlyZWRGWEFBKHZhbHVlOiBGWEFBKTogdm9pZCB7XG4gICAgaWYgKHZhbHVlLmVuYWJsZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5lbmFibGVkID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh2YWx1ZS5tYXRlcmlhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLm1hdGVyaWFsID0gbnVsbDtcbiAgICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9uZU1hcHBpbmcge1xuICAgIC8qIHJlZmNvdW50ICovIG1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGw7XG4gICAgW25hbWU6IHN0cmluZ106IHVua25vd247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlVG9uZU1hcHBpbmcoKTogVG9uZU1hcHBpbmcge1xuICAgIHJldHVybiB7XG4gICAgICAgIG1hdGVyaWFsOiBudWxsLFxuICAgIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWxsUmVxdWlyZWRUb25lTWFwcGluZyh2YWx1ZTogVG9uZU1hcHBpbmcpOiB2b2lkIHtcbiAgICBpZiAodmFsdWUubWF0ZXJpYWwgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YWx1ZS5tYXRlcmlhbCA9IG51bGw7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpcGVsaW5lU2V0dGluZ3Mge1xuICAgIHJlYWRvbmx5IG1zYWE6IE1TQUE7XG4gICAgZW5hYmxlU2hhZGluZ1NjYWxlOiBib29sZWFuOyAvKiBmYWxzZSAqL1xuICAgIHNoYWRpbmdTY2FsZTogbnVtYmVyOyAvKiAwLjUgKi9cbiAgICByZWFkb25seSBibG9vbTogQmxvb207XG4gICAgcmVhZG9ubHkgdG9uZU1hcHBpbmc6IFRvbmVNYXBwaW5nO1xuICAgIHJlYWRvbmx5IGNvbG9yR3JhZGluZzogQ29sb3JHcmFkaW5nO1xuICAgIHJlYWRvbmx5IGZzcjogRlNSO1xuICAgIHJlYWRvbmx5IGZ4YWE6IEZYQUE7XG4gICAgW25hbWU6IHN0cmluZ106IHVua25vd247XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUGlwZWxpbmVTZXR0aW5ncygpOiBQaXBlbGluZVNldHRpbmdzIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBtc2FhOiBtYWtlTVNBQSgpLFxuICAgICAgICBlbmFibGVTaGFkaW5nU2NhbGU6IGZhbHNlLFxuICAgICAgICBzaGFkaW5nU2NhbGU6IDAuNSxcbiAgICAgICAgYmxvb206IG1ha2VCbG9vbSgpLFxuICAgICAgICB0b25lTWFwcGluZzogbWFrZVRvbmVNYXBwaW5nKCksXG4gICAgICAgIGNvbG9yR3JhZGluZzogbWFrZUNvbG9yR3JhZGluZygpLFxuICAgICAgICBmc3I6IG1ha2VGU1IoKSxcbiAgICAgICAgZnhhYTogbWFrZUZYQUEoKSxcbiAgICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsbFJlcXVpcmVkUGlwZWxpbmVTZXR0aW5ncyh2YWx1ZTogUGlwZWxpbmVTZXR0aW5ncyk6IHZvaWQge1xuICAgIGlmICghdmFsdWUubXNhYSkge1xuICAgICAgICAodmFsdWUubXNhYSBhcyBNU0FBKSA9IG1ha2VNU0FBKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmlsbFJlcXVpcmVkTVNBQSh2YWx1ZS5tc2FhKTtcbiAgICB9XG4gICAgaWYgKHZhbHVlLmVuYWJsZVNoYWRpbmdTY2FsZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhbHVlLmVuYWJsZVNoYWRpbmdTY2FsZSA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodmFsdWUuc2hhZGluZ1NjYWxlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdmFsdWUuc2hhZGluZ1NjYWxlID0gMC41O1xuICAgIH1cbiAgICBpZiAoIXZhbHVlLmJsb29tKSB7XG4gICAgICAgICh2YWx1ZS5ibG9vbSBhcyBCbG9vbSkgPSBtYWtlQmxvb20oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBmaWxsUmVxdWlyZWRCbG9vbSh2YWx1ZS5ibG9vbSk7XG4gICAgfVxuICAgIGlmICghdmFsdWUudG9uZU1hcHBpbmcpIHtcbiAgICAgICAgKHZhbHVlLnRvbmVNYXBwaW5nIGFzIFRvbmVNYXBwaW5nKSA9IG1ha2VUb25lTWFwcGluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGxSZXF1aXJlZFRvbmVNYXBwaW5nKHZhbHVlLnRvbmVNYXBwaW5nKTtcbiAgICB9XG4gICAgaWYgKCF2YWx1ZS5jb2xvckdyYWRpbmcpIHtcbiAgICAgICAgKHZhbHVlLmNvbG9yR3JhZGluZyBhcyBDb2xvckdyYWRpbmcpID0gbWFrZUNvbG9yR3JhZGluZygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGZpbGxSZXF1aXJlZENvbG9yR3JhZGluZyh2YWx1ZS5jb2xvckdyYWRpbmcpO1xuICAgIH1cbiAgICBpZiAoIXZhbHVlLmZzcikge1xuICAgICAgICAodmFsdWUuZnNyIGFzIEZTUikgPSBtYWtlRlNSKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmlsbFJlcXVpcmVkRlNSKHZhbHVlLmZzcik7XG4gICAgfVxuICAgIGlmICghdmFsdWUuZnhhYSkge1xuICAgICAgICAodmFsdWUuZnhhYSBhcyBGWEFBKSA9IG1ha2VGWEFBKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgZmlsbFJlcXVpcmVkRlhBQSh2YWx1ZS5meGFhKTtcbiAgICB9XG59XG4iLCIvKlxuIENvcHlyaWdodCAoYykgMjAyMS0yMDI0IFhpYW1lbiBZYWppIFNvZnR3YXJlIENvLiwgTHRkLlxuXG4gaHR0cHM6Ly93d3cuY29jb3MuY29tL1xuXG4gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGEgY29weVxuIG9mIHRoaXMgc29mdHdhcmUgYW5kIGFzc29jaWF0ZWQgZG9jdW1lbnRhdGlvbiBmaWxlcyAodGhlIFwiU29mdHdhcmVcIiksIHRvIGRlYWxcbiBpbiB0aGUgU29mdHdhcmUgd2l0aG91dCByZXN0cmljdGlvbiwgaW5jbHVkaW5nIHdpdGhvdXQgbGltaXRhdGlvbiB0aGUgcmlnaHRzIHRvXG4gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLCBkaXN0cmlidXRlLCBzdWJsaWNlbnNlLCBhbmQvb3Igc2VsbCBjb3BpZXNcbiBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sXG4gc3ViamVjdCB0byB0aGUgZm9sbG93aW5nIGNvbmRpdGlvbnM6XG5cbiBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZCBpblxuIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLlxuXG4gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTUyBPUlxuIElNUExJRUQsIElOQ0xVRElORyBCVVQgTk9UIExJTUlURUQgVE8gVEhFIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZLFxuIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORCBOT05JTkZSSU5HRU1FTlQuIElOIE5PIEVWRU5UIFNIQUxMIFRIRVxuIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVJcbiBMSUFCSUxJVFksIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBUT1JUIE9SIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLFxuIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFNPRlRXQVJFIE9SIFRIRSBVU0UgT1IgT1RIRVIgREVBTElOR1MgSU5cbiBUSEUgU09GVFdBUkUuXG4qL1xuXG5pbXBvcnQge1xuICAgIGFzc2VydCwgY2NsZWdhY3ksIGNsYW1wLCBnZW9tZXRyeSwgZ2Z4LCBMYXllcnMsIE1hdGVyaWFsLCBwaXBlbGluZSxcbiAgICBQaXBlbGluZUV2ZW50UHJvY2Vzc29yLCBQaXBlbGluZUV2ZW50VHlwZSwgUmVmbGVjdGlvblByb2JlTWFuYWdlciwgcmVuZGVyZXIsXG4gICAgcmVuZGVyaW5nLCBzeXMsIFZlYzIsIFZlYzMsIFZlYzQsIHdhcm4sXG59IGZyb20gJ2NjJztcblxuaW1wb3J0IHsgREVCVUcsIEVESVRPUiB9IGZyb20gJ2NjL2Vudic7XG5cbmltcG9ydCB7XG4gICAgbWFrZVBpcGVsaW5lU2V0dGluZ3MsXG4gICAgUGlwZWxpbmVTZXR0aW5ncyxcbn0gZnJvbSAnLi9idWlsdGluLXBpcGVsaW5lLXR5cGVzJztcblxuY29uc3QgeyBBQUJCLCBTcGhlcmUsIGludGVyc2VjdCB9ID0gZ2VvbWV0cnk7XG5jb25zdCB7IENsZWFyRmxhZ0JpdCwgQ29sb3IsIEZvcm1hdCwgRm9ybWF0RmVhdHVyZUJpdCwgTG9hZE9wLCBTdG9yZU9wLCBUZXh0dXJlVHlwZSwgVmlld3BvcnQgfSA9IGdmeDtcbmNvbnN0IHsgc2NlbmUgfSA9IHJlbmRlcmVyO1xuY29uc3QgeyBDYW1lcmFVc2FnZSwgQ1NNTGV2ZWwsIExpZ2h0VHlwZSB9ID0gc2NlbmU7XG5cbmZ1bmN0aW9uIGZvcndhcmROZWVkQ2xlYXJDb2xvcihjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhIShjYW1lcmEuY2xlYXJGbGFnICYgKENsZWFyRmxhZ0JpdC5DT0xPUiB8IChDbGVhckZsYWdCaXQuU1RFTkNJTCA8PCAxKSkpO1xufVxuXG5mdW5jdGlvbiBnZXRDc21NYWluTGlnaHRWaWV3cG9ydChcbiAgICBsaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCxcbiAgICB3OiBudW1iZXIsXG4gICAgaDogbnVtYmVyLFxuICAgIGxldmVsOiBudW1iZXIsXG4gICAgdnA6IGdmeC5WaWV3cG9ydCxcbiAgICBzY3JlZW5TcGFjZVNpZ25ZOiBudW1iZXIsXG4pOiB2b2lkIHtcbiAgICBpZiAobGlnaHQuc2hhZG93Rml4ZWRBcmVhIHx8IGxpZ2h0LmNzbUxldmVsID09PSBDU01MZXZlbC5MRVZFTF8xKSB7XG4gICAgICAgIHZwLmxlZnQgPSAwO1xuICAgICAgICB2cC50b3AgPSAwO1xuICAgICAgICB2cC53aWR0aCA9IE1hdGgudHJ1bmModyk7XG4gICAgICAgIHZwLmhlaWdodCA9IE1hdGgudHJ1bmMoaCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdnAubGVmdCA9IE1hdGgudHJ1bmMobGV2ZWwgJSAyICogMC41ICogdyk7XG4gICAgICAgIGlmIChzY3JlZW5TcGFjZVNpZ25ZID4gMCkge1xuICAgICAgICAgICAgdnAudG9wID0gTWF0aC50cnVuYygoMSAtIE1hdGguZmxvb3IobGV2ZWwgLyAyKSkgKiAwLjUgKiBoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZwLnRvcCA9IE1hdGgudHJ1bmMoTWF0aC5mbG9vcihsZXZlbCAvIDIpICogMC41ICogaCk7XG4gICAgICAgIH1cbiAgICAgICAgdnAud2lkdGggPSBNYXRoLnRydW5jKDAuNSAqIHcpO1xuICAgICAgICB2cC5oZWlnaHQgPSBNYXRoLnRydW5jKDAuNSAqIGgpO1xuICAgIH1cbiAgICB2cC5sZWZ0ID0gTWF0aC5tYXgoMCwgdnAubGVmdCk7XG4gICAgdnAudG9wID0gTWF0aC5tYXgoMCwgdnAudG9wKTtcbiAgICB2cC53aWR0aCA9IE1hdGgubWF4KDEsIHZwLndpZHRoKTtcbiAgICB2cC5oZWlnaHQgPSBNYXRoLm1heCgxLCB2cC5oZWlnaHQpO1xufVxuXG5leHBvcnQgY2xhc3MgUGlwZWxpbmVDb25maWdzIHtcbiAgICBpc1dlYiA9IGZhbHNlO1xuICAgIGlzV2ViR0wxID0gZmFsc2U7XG4gICAgaXNXZWJHUFUgPSBmYWxzZTtcbiAgICBpc01vYmlsZSA9IGZhbHNlO1xuICAgIGlzSERSID0gZmFsc2U7XG4gICAgdXNlRmxvYXRPdXRwdXQgPSBmYWxzZTtcbiAgICB0b25lTWFwcGluZ1R5cGUgPSAwOyAvLyAwOiBBQ0VTLCAxOiBOb25lXG4gICAgc2hhZG93RW5hYmxlZCA9IGZhbHNlO1xuICAgIHNoYWRvd01hcEZvcm1hdCA9IEZvcm1hdC5SMzJGO1xuICAgIHNoYWRvd01hcFNpemUgPSBuZXcgVmVjMigxLCAxKTtcbiAgICB1c2VQbGFuYXJTaGFkb3cgPSBmYWxzZTtcbiAgICBzY3JlZW5TcGFjZVNpZ25ZID0gMTtcbiAgICBzdXBwb3J0RGVwdGhTYW1wbGUgPSBmYWxzZTtcbiAgICBtb2JpbGVNYXhTcG90TGlnaHRTaGFkb3dNYXBzID0gMTtcblxuICAgIHBsYXRmb3JtID0gbmV3IFZlYzQoMCwgMCwgMCwgMCk7XG59XG5cbmZ1bmN0aW9uIHNldHVwUGlwZWxpbmVDb25maWdzKFxuICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgY29uZmlnczogUGlwZWxpbmVDb25maWdzLFxuKTogdm9pZCB7XG4gICAgY29uc3Qgc2FtcGxlRmVhdHVyZSA9IEZvcm1hdEZlYXR1cmVCaXQuU0FNUExFRF9URVhUVVJFIHwgRm9ybWF0RmVhdHVyZUJpdC5MSU5FQVJfRklMVEVSO1xuICAgIGNvbnN0IGRldmljZSA9IHBwbC5kZXZpY2U7XG4gICAgLy8gUGxhdGZvcm1cbiAgICBjb25maWdzLmlzV2ViID0gIXN5cy5pc05hdGl2ZTtcbiAgICBjb25maWdzLmlzV2ViR0wxID0gZGV2aWNlLmdmeEFQSSA9PT0gZ2Z4LkFQSS5XRUJHTDtcbiAgICBjb25maWdzLmlzV2ViR1BVID0gZGV2aWNlLmdmeEFQSSA9PT0gZ2Z4LkFQSS5XRUJHUFU7XG4gICAgY29uZmlncy5pc01vYmlsZSA9IHN5cy5pc01vYmlsZTtcblxuICAgIC8vIFJlbmRlcmluZ1xuICAgIGNvbmZpZ3MuaXNIRFIgPSBwcGwucGlwZWxpbmVTY2VuZURhdGEuaXNIRFI7IC8vIEhhcyB0b25lIG1hcHBpbmdcbiAgICBjb25maWdzLnVzZUZsb2F0T3V0cHV0ID0gcHBsLmdldE1hY3JvQm9vbCgnQ0NfVVNFX0ZMT0FUX09VVFBVVCcpO1xuICAgIGNvbmZpZ3MudG9uZU1hcHBpbmdUeXBlID0gcHBsLnBpcGVsaW5lU2NlbmVEYXRhLnBvc3RTZXR0aW5ncy50b25lTWFwcGluZ1R5cGU7XG4gICAgLy8gU2hhZG93XG4gICAgY29uc3Qgc2hhZG93SW5mbyA9IHBwbC5waXBlbGluZVNjZW5lRGF0YS5zaGFkb3dzO1xuICAgIGNvbmZpZ3Muc2hhZG93RW5hYmxlZCA9IHNoYWRvd0luZm8uZW5hYmxlZDtcbiAgICBjb25maWdzLnNoYWRvd01hcEZvcm1hdCA9IHBpcGVsaW5lLnN1cHBvcnRzUjMyRmxvYXRUZXh0dXJlKHBwbC5kZXZpY2UpID8gRm9ybWF0LlIzMkYgOiBGb3JtYXQuUkdCQTg7XG4gICAgY29uZmlncy5zaGFkb3dNYXBTaXplLnNldChzaGFkb3dJbmZvLnNpemUpO1xuICAgIGNvbmZpZ3MudXNlUGxhbmFyU2hhZG93ID0gc2hhZG93SW5mby5lbmFibGVkICYmIHNoYWRvd0luZm8udHlwZSA9PT0gcmVuZGVyZXIuc2NlbmUuU2hhZG93VHlwZS5QbGFuYXI7XG4gICAgLy8gRGV2aWNlXG4gICAgY29uZmlncy5zY3JlZW5TcGFjZVNpZ25ZID0gcHBsLmRldmljZS5jYXBhYmlsaXRpZXMuc2NyZWVuU3BhY2VTaWduWTtcbiAgICBjb25maWdzLnN1cHBvcnREZXB0aFNhbXBsZSA9IChwcGwuZGV2aWNlLmdldEZvcm1hdEZlYXR1cmVzKEZvcm1hdC5ERVBUSF9TVEVOQ0lMKSAmIHNhbXBsZUZlYXR1cmUpID09PSBzYW1wbGVGZWF0dXJlO1xuICAgIC8vIENvbnN0YW50c1xuICAgIGNvbnN0IHNjcmVlblNwYWNlU2lnblkgPSBkZXZpY2UuY2FwYWJpbGl0aWVzLnNjcmVlblNwYWNlU2lnblk7XG4gICAgY29uZmlncy5wbGF0Zm9ybS54ID0gY29uZmlncy5pc01vYmlsZSA/IDEuMCA6IDAuMDtcbiAgICBjb25maWdzLnBsYXRmb3JtLncgPSAoc2NyZWVuU3BhY2VTaWduWSAqIDAuNSArIDAuNSkgPDwgMSB8IChkZXZpY2UuY2FwYWJpbGl0aWVzLmNsaXBTcGFjZVNpZ25ZICogMC41ICsgMC41KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaXBlbGluZVNldHRpbmdzMiBleHRlbmRzIFBpcGVsaW5lU2V0dGluZ3Mge1xuICAgIF9wYXNzZXM/OiByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlcltdO1xufVxuXG5jb25zdCBkZWZhdWx0U2V0dGluZ3MgPSBtYWtlUGlwZWxpbmVTZXR0aW5ncygpO1xuXG5leHBvcnQgY2xhc3MgQ2FtZXJhQ29uZmlncyB7XG4gICAgc2V0dGluZ3M6IFBpcGVsaW5lU2V0dGluZ3MgPSBkZWZhdWx0U2V0dGluZ3M7XG4gICAgLy8gV2luZG93XG4gICAgaXNNYWluR2FtZVdpbmRvdyA9IGZhbHNlO1xuICAgIHJlbmRlcldpbmRvd0lkID0gMDtcbiAgICAvLyBDYW1lcmFcbiAgICBjb2xvck5hbWUgPSAnJztcbiAgICBkZXB0aFN0ZW5jaWxOYW1lID0gJyc7XG4gICAgLy8gUGlwZWxpbmVcbiAgICBlbmFibGVGdWxsUGlwZWxpbmUgPSBmYWxzZTtcbiAgICBlbmFibGVQcm9maWxlciA9IGZhbHNlO1xuICAgIHJlbWFpbmluZ1Bhc3NlcyA9IDA7XG4gICAgLy8gU2hhZGluZyBTY2FsZVxuICAgIGVuYWJsZVNoYWRpbmdTY2FsZSA9IGZhbHNlO1xuICAgIHNoYWRpbmdTY2FsZSA9IDEuMDtcbiAgICBuYXRpdmVXaWR0aCA9IDE7XG4gICAgbmF0aXZlSGVpZ2h0ID0gMTtcbiAgICB3aWR0aCA9IDE7IC8vIFNjYWxlZCB3aWR0aFxuICAgIGhlaWdodCA9IDE7IC8vIFNjYWxlZCBoZWlnaHRcbiAgICAvLyBSYWRpYW5jZVxuICAgIGVuYWJsZUhEUiA9IGZhbHNlO1xuICAgIHJhZGlhbmNlRm9ybWF0ID0gZ2Z4LkZvcm1hdC5SR0JBODtcbiAgICAvLyBUb25lIE1hcHBpbmdcbiAgICBjb3B5QW5kVG9uZW1hcE1hdGVyaWFsOiBNYXRlcmlhbCB8IG51bGwgPSBudWxsO1xuICAgIC8vIERlcHRoXG4gICAgLyoqIEBlbiBtdXRhYmxlICovXG4gICAgZW5hYmxlU3RvcmVTY2VuZURlcHRoID0gZmFsc2U7XG59XG5cbmNvbnN0IHNDbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayA9IG5ldyBDb2xvcigwLCAwLCAwLCAwKTtcblxuZnVuY3Rpb24gc29ydFBpcGVsaW5lUGFzc0J1aWxkZXJzQnlDb25maWdPcmRlcihwYXNzQnVpbGRlcnM6IHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyW10pOiB2b2lkIHtcbiAgICBwYXNzQnVpbGRlcnMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICByZXR1cm4gYS5nZXRDb25maWdPcmRlcigpIC0gYi5nZXRDb25maWdPcmRlcigpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzb3J0UGlwZWxpbmVQYXNzQnVpbGRlcnNCeVJlbmRlck9yZGVyKHBhc3NCdWlsZGVyczogcmVuZGVyaW5nLlBpcGVsaW5lUGFzc0J1aWxkZXJbXSk6IHZvaWQge1xuICAgIHBhc3NCdWlsZGVycy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIHJldHVybiBhLmdldFJlbmRlck9yZGVyKCkgLSBiLmdldFJlbmRlck9yZGVyKCk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGFkZENvcHlUb1NjcmVlblBhc3MoXG4gICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MsXG4gICAgaW5wdXQ6IHN0cmluZyxcbik6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcbiAgICBhc3NlcnQoISFjYW1lcmFDb25maWdzLmNvcHlBbmRUb25lbWFwTWF0ZXJpYWwpO1xuICAgIGNvbnN0IHBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyhcbiAgICAgICAgY2FtZXJhQ29uZmlncy5uYXRpdmVXaWR0aCxcbiAgICAgICAgY2FtZXJhQ29uZmlncy5uYXRpdmVIZWlnaHQsXG4gICAgICAgICdjYy10b25lLW1hcHBpbmcnKTtcbiAgICBwYXNzLmFkZFJlbmRlclRhcmdldChcbiAgICAgICAgY2FtZXJhQ29uZmlncy5jb2xvck5hbWUsXG4gICAgICAgIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5TVE9SRSxcbiAgICAgICAgc0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrKTtcbiAgICBwYXNzLmFkZFRleHR1cmUoaW5wdXQsICdpbnB1dFRleHR1cmUnKTtcbiAgICBwYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcbiAgICBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxuICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoY2FtZXJhQ29uZmlncy5jb3B5QW5kVG9uZW1hcE1hdGVyaWFsLCAxKTtcbiAgICByZXR1cm4gcGFzcztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFBpbmdQb25nUmVuZGVyVGFyZ2V0KHByZXZOYW1lOiBzdHJpbmcsIHByZWZpeDogc3RyaW5nLCBpZDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAocHJldk5hbWUuc3RhcnRzV2l0aChwcmVmaXgpKSB7XG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHsxIC0gTnVtYmVyKHByZXZOYW1lLmNoYXJBdChwcmVmaXgubGVuZ3RoKSl9XyR7aWR9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYCR7cHJlZml4fTBfJHtpZH1gO1xuICAgIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBQaXBlbGluZUNvbnRleHQge1xuICAgIGNvbG9yTmFtZTogc3RyaW5nO1xuICAgIGRlcHRoU3RlbmNpbE5hbWU6IHN0cmluZztcbn1cblxuY2xhc3MgRm9yd2FyZExpZ2h0aW5nIHtcbiAgICAvLyBBY3RpdmUgbGlnaHRzXG4gICAgcHJpdmF0ZSByZWFkb25seSBsaWdodHM6IHJlbmRlcmVyLnNjZW5lLkxpZ2h0W10gPSBbXTtcbiAgICAvLyBBY3RpdmUgc3BvdCBsaWdodHMgd2l0aCBzaGFkb3dzIChNdXR1YWxseSBleGNsdXNpdmUgd2l0aCBgbGlnaHRzYClcbiAgICBwcml2YXRlIHJlYWRvbmx5IHNoYWRvd0VuYWJsZWRTcG90TGlnaHRzOiByZW5kZXJlci5zY2VuZS5TcG90TGlnaHRbXSA9IFtdO1xuXG4gICAgLy8gSW50ZXJuYWwgY2FjaGVkIHJlc291cmNlc1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3NwaGVyZSA9IFNwaGVyZS5jcmVhdGUoMCwgMCwgMCwgMSk7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfYm91bmRpbmdCb3ggPSBuZXcgQUFCQigpO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX3JhbmdlZERpckxpZ2h0Qm91bmRpbmdCb3ggPSBuZXcgQUFCQigwLjAsIDAuMCwgMC4wLCAwLjUsIDAuNSwgMC41KTtcblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAvLyBJbnRlcmZhY2VcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgcHVibGljIGN1bGxMaWdodHMoc2NlbmU6IHJlbmRlcmVyLlJlbmRlclNjZW5lLCBmcnVzdHVtOiBnZW9tZXRyeS5GcnVzdHVtLCBjYW1lcmFQb3M/OiBWZWMzKTogdm9pZCB7XG4gICAgICAgIC8vIFRPRE8oemhvdXpoZW5nbG9uZyk6IE1ha2UgbGlnaHQgY3VsbGluZyBuYXRpdmVcbiAgICAgICAgdGhpcy5saWdodHMubGVuZ3RoID0gMDtcbiAgICAgICAgdGhpcy5zaGFkb3dFbmFibGVkU3BvdExpZ2h0cy5sZW5ndGggPSAwO1xuICAgICAgICAvLyBzcG90IGxpZ2h0c1xuICAgICAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIHNjZW5lLnNwb3RMaWdodHMpIHtcbiAgICAgICAgICAgIGlmIChsaWdodC5iYWtlZCkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgU3BoZXJlLnNldCh0aGlzLl9zcGhlcmUsIGxpZ2h0LnBvc2l0aW9uLngsIGxpZ2h0LnBvc2l0aW9uLnksIGxpZ2h0LnBvc2l0aW9uLnosIGxpZ2h0LnJhbmdlKTtcbiAgICAgICAgICAgIGlmIChpbnRlcnNlY3Quc3BoZXJlRnJ1c3R1bSh0aGlzLl9zcGhlcmUsIGZydXN0dW0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKGxpZ2h0LnNoYWRvd0VuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGFkb3dFbmFibGVkU3BvdExpZ2h0cy5wdXNoKGxpZ2h0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKGxpZ2h0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gc3BoZXJlIGxpZ2h0c1xuICAgICAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIHNjZW5lLnNwaGVyZUxpZ2h0cykge1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmJha2VkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTcGhlcmUuc2V0KHRoaXMuX3NwaGVyZSwgbGlnaHQucG9zaXRpb24ueCwgbGlnaHQucG9zaXRpb24ueSwgbGlnaHQucG9zaXRpb24ueiwgbGlnaHQucmFuZ2UpO1xuICAgICAgICAgICAgaWYgKGludGVyc2VjdC5zcGhlcmVGcnVzdHVtKHRoaXMuX3NwaGVyZSwgZnJ1c3R1bSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKGxpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBwb2ludCBsaWdodHNcbiAgICAgICAgZm9yIChjb25zdCBsaWdodCBvZiBzY2VuZS5wb2ludExpZ2h0cykge1xuICAgICAgICAgICAgaWYgKGxpZ2h0LmJha2VkKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBTcGhlcmUuc2V0KHRoaXMuX3NwaGVyZSwgbGlnaHQucG9zaXRpb24ueCwgbGlnaHQucG9zaXRpb24ueSwgbGlnaHQucG9zaXRpb24ueiwgbGlnaHQucmFuZ2UpO1xuICAgICAgICAgICAgaWYgKGludGVyc2VjdC5zcGhlcmVGcnVzdHVtKHRoaXMuX3NwaGVyZSwgZnJ1c3R1bSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKGxpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyByYW5nZWQgZGlyIGxpZ2h0c1xuICAgICAgICBmb3IgKGNvbnN0IGxpZ2h0IG9mIHNjZW5lLnJhbmdlZERpckxpZ2h0cykge1xuICAgICAgICAgICAgQUFCQi50cmFuc2Zvcm0odGhpcy5fYm91bmRpbmdCb3gsIHRoaXMuX3JhbmdlZERpckxpZ2h0Qm91bmRpbmdCb3gsIGxpZ2h0Lm5vZGUhLmdldFdvcmxkTWF0cml4KCkpO1xuICAgICAgICAgICAgaWYgKGludGVyc2VjdC5hYWJiRnJ1c3R1bSh0aGlzLl9ib3VuZGluZ0JveCwgZnJ1c3R1bSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmxpZ2h0cy5wdXNoKGxpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjYW1lcmFQb3MpIHtcbiAgICAgICAgICAgIHRoaXMuc2hhZG93RW5hYmxlZFNwb3RMaWdodHMuc29ydChcbiAgICAgICAgICAgICAgICAobGhzLCByaHMpID0+IFZlYzMuc3F1YXJlZERpc3RhbmNlKGNhbWVyYVBvcywgbGhzLnBvc2l0aW9uKSAtIFZlYzMuc3F1YXJlZERpc3RhbmNlKGNhbWVyYVBvcywgcmhzLnBvc2l0aW9uKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBfYWRkTGlnaHRRdWV1ZXMoY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsIHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyKTogdm9pZCB7XG4gICAgICAgIGZvciAoY29uc3QgbGlnaHQgb2YgdGhpcy5saWdodHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlID0gcGFzcy5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50LkJMRU5ELCAnZm9yd2FyZC1hZGQnKTtcbiAgICAgICAgICAgIHN3aXRjaCAobGlnaHQudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgTGlnaHRUeXBlLlNQSEVSRTpcbiAgICAgICAgICAgICAgICAgICAgcXVldWUubmFtZSA9ICdzcGhlcmUtbGlnaHQnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIExpZ2h0VHlwZS5TUE9UOlxuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5uYW1lID0gJ3Nwb3QtbGlnaHQnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIExpZ2h0VHlwZS5QT0lOVDpcbiAgICAgICAgICAgICAgICAgICAgcXVldWUubmFtZSA9ICdwb2ludC1saWdodCc7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgTGlnaHRUeXBlLlJBTkdFRF9ESVJFQ1RJT05BTDpcbiAgICAgICAgICAgICAgICAgICAgcXVldWUubmFtZSA9ICdyYW5nZWQtZGlyZWN0aW9uYWwtbGlnaHQnO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBxdWV1ZS5uYW1lID0gJ3Vua25vd24tbGlnaHQnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVldWUuYWRkU2NlbmUoXG4gICAgICAgICAgICAgICAgY2FtZXJhLFxuICAgICAgICAgICAgICAgIHJlbmRlcmluZy5TY2VuZUZsYWdzLkJMRU5ELFxuICAgICAgICAgICAgICAgIGxpZ2h0LFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgYWRkU3BvdGxpZ2h0U2hhZG93UGFzc2VzKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgbWF4TnVtU2hhZG93TWFwczogbnVtYmVyLFxuICAgICk6IHZvaWQge1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgbGlnaHQgb2YgdGhpcy5zaGFkb3dFbmFibGVkU3BvdExpZ2h0cykge1xuICAgICAgICAgICAgY29uc3Qgc2hhZG93TWFwU2l6ZSA9IHBwbC5waXBlbGluZVNjZW5lRGF0YS5zaGFkb3dzLnNpemU7XG4gICAgICAgICAgICBjb25zdCBzaGFkb3dQYXNzID0gcHBsLmFkZFJlbmRlclBhc3Moc2hhZG93TWFwU2l6ZS54LCBzaGFkb3dNYXBTaXplLnksICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzaGFkb3dQYXNzLm5hbWUgPSBgU3BvdExpZ2h0U2hhZG93UGFzcyR7aX1gO1xuICAgICAgICAgICAgc2hhZG93UGFzcy5hZGRSZW5kZXJUYXJnZXQoYFNwb3RTaGFkb3dNYXAke2l9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBuZXcgQ29sb3IoMSwgMSwgMSwgMSkpO1xuICAgICAgICAgICAgc2hhZG93UGFzcy5hZGREZXB0aFN0ZW5jaWwoYFNwb3RTaGFkb3dEZXB0aCR7aX1gLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuRElTQ0FSRCk7XG4gICAgICAgICAgICBzaGFkb3dQYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuTk9ORSwgJ3NoYWRvdy1jYXN0ZXInKVxuICAgICAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIHJlbmRlcmluZy5TY2VuZUZsYWdzLk9QQVFVRSB8IHJlbmRlcmluZy5TY2VuZUZsYWdzLk1BU0sgfCByZW5kZXJpbmcuU2NlbmVGbGFncy5TSEFET1dfQ0FTVEVSKVxuICAgICAgICAgICAgICAgIC51c2VMaWdodEZydXN0dW0obGlnaHQpO1xuICAgICAgICAgICAgKytpO1xuICAgICAgICAgICAgaWYgKGkgPj0gbWF4TnVtU2hhZG93TWFwcykge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHB1YmxpYyBhZGRMaWdodFF1ZXVlcyhwYXNzOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcixcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsIG1heE51bVNoYWRvd01hcHM6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLl9hZGRMaWdodFF1ZXVlcyhjYW1lcmEsIHBhc3MpO1xuICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgIGZvciAoY29uc3QgbGlnaHQgb2YgdGhpcy5zaGFkb3dFbmFibGVkU3BvdExpZ2h0cykge1xuICAgICAgICAgICAgLy8gQWRkIHNwb3QtbGlnaHQgcGFzc1xuICAgICAgICAgICAgLy8gU2F2ZSBsYXN0IFJlbmRlclBhc3MgdG8gdGhlIGBwYXNzYCB2YXJpYWJsZVxuICAgICAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogRml4IHBlciBxdWV1ZSBhZGRUZXh0dXJlXG4gICAgICAgICAgICBwYXNzLmFkZFRleHR1cmUoYFNwb3RTaGFkb3dNYXAke2l9YCwgJ2NjX3Nwb3RTaGFkb3dNYXAnKTtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXVlID0gcGFzcy5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50LkJMRU5ELCAnZm9yd2FyZC1hZGQnKTtcbiAgICAgICAgICAgIHF1ZXVlLmFkZFNjZW5lKGNhbWVyYSwgcmVuZGVyaW5nLlNjZW5lRmxhZ3MuQkxFTkQsIGxpZ2h0KTtcbiAgICAgICAgICAgICsraTtcbiAgICAgICAgICAgIGlmIChpID49IG1heE51bVNoYWRvd01hcHMpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdGljZTogRm9yd2FyZExpZ2h0aW5nIGNhbm5vdCBoYW5kbGUgYSBsb3Qgb2YgbGlnaHRzLlxuICAgIC8vIElmIHRoZXJlIGFyZSB0b28gbWFueSBsaWdodHMsIHRoZSBwZXJmb3JtYW5jZSB3aWxsIGJlIHZlcnkgcG9vci5cbiAgICAvLyBJZiBtYW55IGxpZ2h0cyBhcmUgbmVlZGVkLCBwbGVhc2UgaW1wbGVtZW50IGEgZm9yd2FyZCsgb3IgZGVmZXJyZWQgcmVuZGVyaW5nIHBpcGVsaW5lLlxuICAgIHB1YmxpYyBhZGRMaWdodFBhc3NlcyhcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXG4gICAgICAgIGRlcHRoU3RlbmNpbE5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVwdGhTdGVuY2lsU3RvcmVPcDogZ2Z4LlN0b3JlT3AsXG4gICAgICAgIGlkOiBudW1iZXIsIC8vIHdpbmRvdyBpZFxuICAgICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgICBoZWlnaHQ6IG51bWJlcixcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgIHZpZXdwb3J0OiBnZnguVmlld3BvcnQsXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgICAgIHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyLFxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fYWRkTGlnaHRRdWV1ZXMoY2FtZXJhLCBwYXNzKTtcblxuICAgICAgICBsZXQgY291bnQgPSAwO1xuICAgICAgICBjb25zdCBzaGFkb3dNYXBTaXplID0gcHBsLnBpcGVsaW5lU2NlbmVEYXRhLnNoYWRvd3Muc2l6ZTtcbiAgICAgICAgZm9yIChjb25zdCBsaWdodCBvZiB0aGlzLnNoYWRvd0VuYWJsZWRTcG90TGlnaHRzKSB7XG4gICAgICAgICAgICBjb25zdCBzaGFkb3dQYXNzID0gcHBsLmFkZFJlbmRlclBhc3Moc2hhZG93TWFwU2l6ZS54LCBzaGFkb3dNYXBTaXplLnksICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBzaGFkb3dQYXNzLm5hbWUgPSAnU3BvdGxpZ2h0U2hhZG93UGFzcyc7XG4gICAgICAgICAgICAvLyBSZXVzZSBjc20gc2hhZG93IG1hcFxuICAgICAgICAgICAgc2hhZG93UGFzcy5hZGRSZW5kZXJUYXJnZXQoYFNoYWRvd01hcCR7aWR9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBuZXcgQ29sb3IoMSwgMSwgMSwgMSkpO1xuICAgICAgICAgICAgc2hhZG93UGFzcy5hZGREZXB0aFN0ZW5jaWwoYFNoYWRvd0RlcHRoJHtpZH1gLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuRElTQ0FSRCk7XG4gICAgICAgICAgICBzaGFkb3dQYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuTk9ORSwgJ3NoYWRvdy1jYXN0ZXInKVxuICAgICAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIHJlbmRlcmluZy5TY2VuZUZsYWdzLk9QQVFVRSB8IHJlbmRlcmluZy5TY2VuZUZsYWdzLk1BU0sgfCByZW5kZXJpbmcuU2NlbmVGbGFncy5TSEFET1dfQ0FTVEVSKVxuICAgICAgICAgICAgICAgIC51c2VMaWdodEZydXN0dW0obGlnaHQpO1xuXG4gICAgICAgICAgICAvLyBBZGQgc3BvdC1saWdodCBwYXNzXG4gICAgICAgICAgICAvLyBTYXZlIGxhc3QgUmVuZGVyUGFzcyB0byB0aGUgYHBhc3NgIHZhcmlhYmxlXG4gICAgICAgICAgICArK2NvdW50O1xuICAgICAgICAgICAgY29uc3Qgc3RvcmVPcCA9IGNvdW50ID09PSB0aGlzLnNoYWRvd0VuYWJsZWRTcG90TGlnaHRzLmxlbmd0aFxuICAgICAgICAgICAgICAgID8gZGVwdGhTdGVuY2lsU3RvcmVPcFxuICAgICAgICAgICAgICAgIDogU3RvcmVPcC5TVE9SRTtcblxuICAgICAgICAgICAgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBwYXNzLm5hbWUgPSAnU3BvdGxpZ2h0V2l0aFNoYWRvd01hcCc7XG4gICAgICAgICAgICBwYXNzLnNldFZpZXdwb3J0KHZpZXdwb3J0KTtcbiAgICAgICAgICAgIHBhc3MuYWRkUmVuZGVyVGFyZ2V0KGNvbG9yTmFtZSwgTG9hZE9wLkxPQUQpO1xuICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoZGVwdGhTdGVuY2lsTmFtZSwgTG9hZE9wLkxPQUQsIHN0b3JlT3ApO1xuICAgICAgICAgICAgcGFzcy5hZGRUZXh0dXJlKGBTaGFkb3dNYXAke2lkfWAsICdjY19zcG90U2hhZG93TWFwJyk7XG4gICAgICAgICAgICBjb25zdCBxdWV1ZSA9IHBhc3MuYWRkUXVldWUocmVuZGVyaW5nLlF1ZXVlSGludC5CTEVORCwgJ2ZvcndhcmQtYWRkJyk7XG4gICAgICAgICAgICBxdWV1ZS5hZGRTY2VuZShcbiAgICAgICAgICAgICAgICBjYW1lcmEsXG4gICAgICAgICAgICAgICAgcmVuZGVyaW5nLlNjZW5lRmxhZ3MuQkxFTkQsXG4gICAgICAgICAgICAgICAgbGlnaHQsXG4gICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXNzO1xuICAgIH1cblxuICAgIHB1YmxpYyBpc011bHRpcGxlTGlnaHRQYXNzZXNOZWVkZWQoKTogYm9vbGVhbiB7XG4gICAgICAgIHJldHVybiB0aGlzLnNoYWRvd0VuYWJsZWRTcG90TGlnaHRzLmxlbmd0aCA+IDA7XG4gICAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZvcndhcmRQYXNzQ29uZmlncyB7XG4gICAgZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwOiBib29sZWFuO1xuICAgIGVuYWJsZU1haW5MaWdodFBsYW5hclNoYWRvd01hcDogYm9vbGVhbjtcbiAgICBlbmFibGVQbGFuYXJSZWZsZWN0aW9uUHJvYmU6IGJvb2xlYW47XG4gICAgZW5hYmxlTVNBQTogYm9vbGVhbjtcbiAgICBlbmFibGVTaW5nbGVGb3J3YXJkUGFzczogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEJ1aWx0aW5Gb3J3YXJkUGFzc0J1aWxkZXIgaW1wbGVtZW50cyByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlciB7XG4gICAgc3RhdGljIENvbmZpZ09yZGVyID0gMTAwO1xuICAgIHN0YXRpYyBSZW5kZXJPcmRlciA9IDEwMDtcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gQnVpbHRpbkZvcndhcmRQYXNzQnVpbGRlci5Db25maWdPcmRlcjtcbiAgICB9XG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIEJ1aWx0aW5Gb3J3YXJkUGFzc0J1aWxkZXIuUmVuZGVyT3JkZXI7XG4gICAgfVxuICAgIGNvbmZpZ0NhbWVyYShcbiAgICAgICAgY2FtZXJhOiBSZWFkb25seTxyZW5kZXJlci5zY2VuZS5DYW1lcmE+LFxuICAgICAgICBwaXBlbGluZUNvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3MpOiB2b2lkIHtcbiAgICAgICAgLy8gU2hhZG93XG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwID0gcGlwZWxpbmVDb25maWdzLnNoYWRvd0VuYWJsZWRcbiAgICAgICAgICAgICYmICFwaXBlbGluZUNvbmZpZ3MudXNlUGxhbmFyU2hhZG93XG4gICAgICAgICAgICAmJiAhIWNhbWVyYS5zY2VuZVxuICAgICAgICAgICAgJiYgISFjYW1lcmEuc2NlbmUubWFpbkxpZ2h0XG4gICAgICAgICAgICAmJiBjYW1lcmEuc2NlbmUubWFpbkxpZ2h0LnNoYWRvd0VuYWJsZWQ7XG5cbiAgICAgICAgY2FtZXJhQ29uZmlncy5lbmFibGVNYWluTGlnaHRQbGFuYXJTaGFkb3dNYXAgPSBwaXBlbGluZUNvbmZpZ3Muc2hhZG93RW5hYmxlZFxuICAgICAgICAgICAgJiYgcGlwZWxpbmVDb25maWdzLnVzZVBsYW5hclNoYWRvd1xuICAgICAgICAgICAgJiYgISFjYW1lcmEuc2NlbmVcbiAgICAgICAgICAgICYmICEhY2FtZXJhLnNjZW5lLm1haW5MaWdodFxuICAgICAgICAgICAgJiYgY2FtZXJhLnNjZW5lLm1haW5MaWdodC5zaGFkb3dFbmFibGVkO1xuXG4gICAgICAgIC8vIFJlZmxlY3Rpb24gUHJvYmVcbiAgICAgICAgY2FtZXJhQ29uZmlncy5lbmFibGVQbGFuYXJSZWZsZWN0aW9uUHJvYmUgPVxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5pc01haW5HYW1lV2luZG93IHx8IGNhbWVyYS5jYW1lcmFVc2FnZSA9PT0gQ2FtZXJhVXNhZ2UuU0NFTkVfVklFVztcblxuICAgICAgICAvLyBNU0FBXG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQSA9IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MubXNhYS5lbmFibGVkXG4gICAgICAgICAgICAmJiAhY2FtZXJhQ29uZmlncy5lbmFibGVTdG9yZVNjZW5lRGVwdGggLy8gQ2Fubm90IHN0b3JlIE1TIGRlcHRoLCByZXNvbHZlIGRlcHRoIGlzIGFsc28gbm90IGNyb3NzLXBsYXRmb3JtXG4gICAgICAgICAgICAmJiAhcGlwZWxpbmVDb25maWdzLmlzV2ViIC8vIFRPRE8oemhvdXpoZW5nbG9uZyk6IHJlbW92ZSB0aGlzIGNvbnN0cmFpbnRcbiAgICAgICAgICAgICYmICFwaXBlbGluZUNvbmZpZ3MuaXNXZWJHTDE7XG5cbiAgICAgICAgLy8gRm9yd2FyZCByZW5kZXJpbmcgKERlcGVuZCBvbiBNU0FBIGFuZCBUQlIpXG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2luZ2xlRm9yd2FyZFBhc3NcbiAgICAgICAgICAgID0gcGlwZWxpbmVDb25maWdzLmlzTW9iaWxlIHx8IGNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQTtcblxuICAgICAgICArK2NhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzO1xuICAgIH1cbiAgICB3aW5kb3dSZXNpemUoXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IFJlYWRvbmx5PENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3M+LFxuICAgICAgICB3aW5kb3c6IHJlbmRlcmVyLlJlbmRlcldpbmRvdyxcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgIG5hdGl2ZVdpZHRoOiBudW1iZXIsXG4gICAgICAgIG5hdGl2ZUhlaWdodDogbnVtYmVyKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IFJlc291cmNlRmxhZ3MgPSByZW5kZXJpbmcuUmVzb3VyY2VGbGFncztcbiAgICAgICAgY29uc3QgUmVzb3VyY2VSZXNpZGVuY3kgPSByZW5kZXJpbmcuUmVzb3VyY2VSZXNpZGVuY3k7XG4gICAgICAgIGNvbnN0IGlkID0gd2luZG93LnJlbmRlcldpbmRvd0lkO1xuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3M7XG5cbiAgICAgICAgY29uc3Qgd2lkdGggPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxuICAgICAgICAgICAgPyBNYXRoLm1heChNYXRoLmZsb29yKG5hdGl2ZVdpZHRoICogY2FtZXJhQ29uZmlncy5zaGFkaW5nU2NhbGUpLCAxKVxuICAgICAgICAgICAgOiBuYXRpdmVXaWR0aDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcbiAgICAgICAgICAgID8gTWF0aC5tYXgoTWF0aC5mbG9vcihuYXRpdmVIZWlnaHQgKiBjYW1lcmFDb25maWdzLnNoYWRpbmdTY2FsZSksIDEpXG4gICAgICAgICAgICA6IG5hdGl2ZUhlaWdodDtcblxuICAgICAgICAvLyBNc2FhUmFkaWFuY2VcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQSkge1xuICAgICAgICAgICAgLy8gTm90aWNlOiBXZSBuZXZlciBzdG9yZSBtdWx0aXNhbXBsZSByZXN1bHRzLlxuICAgICAgICAgICAgLy8gVGhlc2Ugc2FtcGxlcyBhcmUgYWx3YXlzIHJlc29sdmVkIGFuZCBkaXNjYXJkZWQgYXQgdGhlIGVuZCBvZiB0aGUgcmVuZGVyIHBhc3MuXG4gICAgICAgICAgICAvLyBTbyB0aGUgUmVzb3VyY2VSZXNpZGVuY3kgc2hvdWxkIGJlIE1FTU9SWUxFU1MuXG4gICAgICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVIRFIpIHtcbiAgICAgICAgICAgICAgICBwcGwuYWRkVGV4dHVyZShgTXNhYVJhZGlhbmNlJHtpZH1gLCBUZXh0dXJlVHlwZS5URVgyRCwgY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCwgMSwgMSwgMSxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubXNhYS5zYW1wbGVDb3VudCwgUmVzb3VyY2VGbGFncy5DT0xPUl9BVFRBQ0hNRU5ULCBSZXNvdXJjZVJlc2lkZW5jeS5NRU1PUllMRVNTKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcHBsLmFkZFRleHR1cmUoYE1zYWFSYWRpYW5jZSR7aWR9YCwgVGV4dHVyZVR5cGUuVEVYMkQsIEZvcm1hdC5SR0JBOCwgd2lkdGgsIGhlaWdodCwgMSwgMSwgMSxcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubXNhYS5zYW1wbGVDb3VudCwgUmVzb3VyY2VGbGFncy5DT0xPUl9BVFRBQ0hNRU5ULCBSZXNvdXJjZVJlc2lkZW5jeS5NRU1PUllMRVNTKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBwbC5hZGRUZXh0dXJlKGBNc2FhRGVwdGhTdGVuY2lsJHtpZH1gLCBUZXh0dXJlVHlwZS5URVgyRCwgRm9ybWF0LkRFUFRIX1NURU5DSUwsIHdpZHRoLCBoZWlnaHQsIDEsIDEsIDEsXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MubXNhYS5zYW1wbGVDb3VudCwgUmVzb3VyY2VGbGFncy5ERVBUSF9TVEVOQ0lMX0FUVEFDSE1FTlQsIFJlc291cmNlUmVzaWRlbmN5Lk1FTU9SWUxFU1MpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFpbmxpZ2h0IFNoYWRvd01hcFxuICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KFxuICAgICAgICAgICAgYFNoYWRvd01hcCR7aWR9YCxcbiAgICAgICAgICAgIHBwbENvbmZpZ3Muc2hhZG93TWFwRm9ybWF0LFxuICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBTaXplLngsXG4gICAgICAgICAgICBwcGxDb25maWdzLnNoYWRvd01hcFNpemUueSxcbiAgICAgICAgKTtcbiAgICAgICAgcHBsLmFkZERlcHRoU3RlbmNpbChcbiAgICAgICAgICAgIGBTaGFkb3dEZXB0aCR7aWR9YCxcbiAgICAgICAgICAgIEZvcm1hdC5ERVBUSF9TVEVOQ0lMLFxuICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBTaXplLngsXG4gICAgICAgICAgICBwcGxDb25maWdzLnNoYWRvd01hcFNpemUueSxcbiAgICAgICAgKTtcblxuICAgICAgICAvLyBTcG90LWxpZ2h0IHNoYWRvdyBtYXBzXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZVNpbmdsZUZvcndhcmRQYXNzKSB7XG4gICAgICAgICAgICBjb25zdCBjb3VudCA9IHBwbENvbmZpZ3MubW9iaWxlTWF4U3BvdExpZ2h0U2hhZG93TWFwcztcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpICE9PSBjb3VudDsgKytpKSB7XG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChcbiAgICAgICAgICAgICAgICAgICAgYFNwb3RTaGFkb3dNYXAke2l9YCxcbiAgICAgICAgICAgICAgICAgICAgcHBsQ29uZmlncy5zaGFkb3dNYXBGb3JtYXQsXG4gICAgICAgICAgICAgICAgICAgIHBwbENvbmZpZ3Muc2hhZG93TWFwU2l6ZS54LFxuICAgICAgICAgICAgICAgICAgICBwcGxDb25maWdzLnNoYWRvd01hcFNpemUueSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIHBwbC5hZGREZXB0aFN0ZW5jaWwoXG4gICAgICAgICAgICAgICAgICAgIGBTcG90U2hhZG93RGVwdGgke2l9YCxcbiAgICAgICAgICAgICAgICAgICAgRm9ybWF0LkRFUFRIX1NURU5DSUwsXG4gICAgICAgICAgICAgICAgICAgIHBwbENvbmZpZ3Muc2hhZG93TWFwU2l6ZS54LFxuICAgICAgICAgICAgICAgICAgICBwcGxDb25maWdzLnNoYWRvd01hcFNpemUueSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHNldHVwKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgRm9yd2FyZFBhc3NDb25maWdzLFxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgY29udGV4dDogUGlwZWxpbmVDb250ZXh0KTogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIgfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBpZCA9IGNhbWVyYS53aW5kb3cucmVuZGVyV2luZG93SWQ7XG5cbiAgICAgICAgY29uc3Qgc2NlbmUgPSBjYW1lcmEuc2NlbmUhO1xuICAgICAgICBjb25zdCBtYWluTGlnaHQgPSBzY2VuZS5tYWluTGlnaHQ7XG5cbiAgICAgICAgLS1jYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcbiAgICAgICAgYXNzZXJ0KGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID49IDApO1xuXG4gICAgICAgIC8vIEZvcndhcmQgTGlnaHRpbmcgKExpZ2h0IEN1bGxpbmcpXG4gICAgICAgIHRoaXMuZm9yd2FyZExpZ2h0aW5nLmN1bGxMaWdodHMoc2NlbmUsIGNhbWVyYS5mcnVzdHVtKTtcblxuICAgICAgICAvLyBNYWluIERpcmVjdGlvbmFsIGxpZ2h0IENTTSBTaGFkb3cgTWFwXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZU1haW5MaWdodFNoYWRvd01hcCkge1xuICAgICAgICAgICAgYXNzZXJ0KCEhbWFpbkxpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuX2FkZENhc2NhZGVkU2hhZG93TWFwUGFzcyhwcGwsIHBwbENvbmZpZ3MsIGlkLCBtYWluTGlnaHQsIGNhbWVyYSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTcG90IGxpZ2h0IHNoYWRvdyBtYXBzIChNb2JpbGUgb3IgTVNBQSlcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2luZ2xlRm9yd2FyZFBhc3MpIHtcbiAgICAgICAgICAgIC8vIEN1cnJlbnRseSwgb25seSBzdXBwb3J0IDEgc3BvdCBsaWdodCB3aXRoIHNoYWRvdyBtYXAgb24gbW9iaWxlIHBsYXRmb3JtLlxuICAgICAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogUmVsZXggdGhpcyBsaW1pdGF0aW9uLlxuICAgICAgICAgICAgdGhpcy5mb3J3YXJkTGlnaHRpbmcuYWRkU3BvdGxpZ2h0U2hhZG93UGFzc2VzKFxuICAgICAgICAgICAgICAgIHBwbCwgY2FtZXJhLCBwcGxDb25maWdzLm1vYmlsZU1heFNwb3RMaWdodFNoYWRvd01hcHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fdHJ5QWRkUmVmbGVjdGlvblByb2JlUGFzc2VzKHBwbCwgY2FtZXJhQ29uZmlncywgaWQsIG1haW5MaWdodCwgY2FtZXJhLnNjZW5lKTtcblxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPiAwIHx8IGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlKSB7XG4gICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSA9IGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlXG4gICAgICAgICAgICAgICAgPyBgU2NhbGVkUmFkaWFuY2UwXyR7aWR9YFxuICAgICAgICAgICAgICAgIDogYFJhZGlhbmNlMF8ke2lkfWA7XG4gICAgICAgICAgICBjb250ZXh0LmRlcHRoU3RlbmNpbE5hbWUgPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxuICAgICAgICAgICAgICAgID8gYFNjYWxlZFNjZW5lRGVwdGhfJHtpZH1gXG4gICAgICAgICAgICAgICAgOiBgU2NlbmVEZXB0aF8ke2lkfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSA9IGNhbWVyYUNvbmZpZ3MuY29sb3JOYW1lO1xuICAgICAgICAgICAgY29udGV4dC5kZXB0aFN0ZW5jaWxOYW1lID0gY2FtZXJhQ29uZmlncy5kZXB0aFN0ZW5jaWxOYW1lO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgcGFzcyA9IHRoaXMuX2FkZEZvcndhcmRSYWRpYW5jZVBhc3NlcyhcbiAgICAgICAgICAgIHBwbCwgcHBsQ29uZmlncywgY2FtZXJhQ29uZmlncywgaWQsIGNhbWVyYSxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsIGNhbWVyYUNvbmZpZ3MuaGVpZ2h0LCBtYWluTGlnaHQsXG4gICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSwgY29udGV4dC5kZXB0aFN0ZW5jaWxOYW1lLFxuICAgICAgICAgICAgIWNhbWVyYUNvbmZpZ3MuZW5hYmxlTVNBQSxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlU3RvcmVTY2VuZURlcHRoID8gU3RvcmVPcC5TVE9SRSA6IFN0b3JlT3AuRElTQ0FSRCk7XG5cbiAgICAgICAgaWYgKCFjYW1lcmFDb25maWdzLmVuYWJsZVN0b3JlU2NlbmVEZXB0aCkge1xuICAgICAgICAgICAgY29udGV4dC5kZXB0aFN0ZW5jaWxOYW1lID0gJyc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPT09IDAgJiYgY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGUpIHtcbiAgICAgICAgICAgIHJldHVybiBhZGRDb3B5VG9TY3JlZW5QYXNzKHBwbCwgcHBsQ29uZmlncywgY2FtZXJhQ29uZmlncywgY29udGV4dC5jb2xvck5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHBhc3M7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBfYWRkQ2FzY2FkZWRTaGFkb3dNYXBQYXNzKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBsaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCxcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IFF1ZXVlSGludCA9IHJlbmRlcmluZy5RdWV1ZUhpbnQ7XG4gICAgICAgIGNvbnN0IFNjZW5lRmxhZ3MgPSByZW5kZXJpbmcuU2NlbmVGbGFncztcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBEeW5hbWljIHN0YXRlc1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGNvbnN0IHNoYWRvd1NpemUgPSBwcGwucGlwZWxpbmVTY2VuZURhdGEuc2hhZG93cy5zaXplO1xuICAgICAgICBjb25zdCB3aWR0aCA9IHNoYWRvd1NpemUueDtcbiAgICAgICAgY29uc3QgaGVpZ2h0ID0gc2hhZG93U2l6ZS55O1xuXG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gdGhpcy5fdmlld3BvcnQ7XG4gICAgICAgIHZpZXdwb3J0LmxlZnQgPSB2aWV3cG9ydC50b3AgPSAwO1xuICAgICAgICB2aWV3cG9ydC53aWR0aCA9IHdpZHRoO1xuICAgICAgICB2aWV3cG9ydC5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBDU00gU2hhZG93IE1hcFxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGNvbnN0IHBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh3aWR0aCwgaGVpZ2h0LCAnZGVmYXVsdCcpO1xuICAgICAgICBwYXNzLm5hbWUgPSAnQ2FzY2FkZWRTaGFkb3dNYXAnO1xuICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChgU2hhZG93TWFwJHtpZH1gLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIG5ldyBDb2xvcigxLCAxLCAxLCAxKSk7XG4gICAgICAgIHBhc3MuYWRkRGVwdGhTdGVuY2lsKGBTaGFkb3dEZXB0aCR7aWR9YCwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLkRJU0NBUkQpO1xuICAgICAgICBjb25zdCBjc21MZXZlbCA9IHBwbC5waXBlbGluZVNjZW5lRGF0YS5jc21TdXBwb3J0ZWQgPyBsaWdodC5jc21MZXZlbCA6IDE7XG5cbiAgICAgICAgLy8gQWRkIHNoYWRvdyBtYXAgdmlld3BvcnRzXG4gICAgICAgIGZvciAobGV0IGxldmVsID0gMDsgbGV2ZWwgIT09IGNzbUxldmVsOyArK2xldmVsKSB7XG4gICAgICAgICAgICBnZXRDc21NYWluTGlnaHRWaWV3cG9ydChsaWdodCwgd2lkdGgsIGhlaWdodCwgbGV2ZWwsIHRoaXMuX3ZpZXdwb3J0LCBwcGxDb25maWdzLnNjcmVlblNwYWNlU2lnblkpO1xuICAgICAgICAgICAgY29uc3QgcXVldWUgPSBwYXNzLmFkZFF1ZXVlKFF1ZXVlSGludC5OT05FLCAnc2hhZG93LWNhc3RlcicpO1xuICAgICAgICAgICAgaWYgKCFwcGxDb25maWdzLmlzV2ViR1BVKSB7IC8vIFRlbXBvcmFyeSB3b3JrYXJvdW5kIGZvciBXZWJHUFVcbiAgICAgICAgICAgICAgICBxdWV1ZS5zZXRWaWV3cG9ydCh0aGlzLl92aWV3cG9ydCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxdWV1ZVxuICAgICAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIFNjZW5lRmxhZ3MuT1BBUVVFIHwgU2NlbmVGbGFncy5NQVNLIHwgU2NlbmVGbGFncy5TSEFET1dfQ0FTVEVSKVxuICAgICAgICAgICAgICAgIC51c2VMaWdodEZydXN0dW0obGlnaHQsIGxldmVsKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIF90cnlBZGRSZWZsZWN0aW9uUHJvYmVQYXNzZXMoXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IFJlYWRvbmx5PENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3M+LFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBtYWluTGlnaHQ6IHJlbmRlcmVyLnNjZW5lLkRpcmVjdGlvbmFsTGlnaHQgfCBudWxsLFxuICAgICAgICBzY2VuZTogcmVuZGVyZXIuUmVuZGVyU2NlbmUgfCBudWxsLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCByZWZsZWN0aW9uUHJvYmVNYW5hZ2VyID0gY2NsZWdhY3kuaW50ZXJuYWwucmVmbGVjdGlvblByb2JlTWFuYWdlciBhcyBSZWZsZWN0aW9uUHJvYmVNYW5hZ2VyIHwgdW5kZWZpbmVkO1xuICAgICAgICBpZiAoIXJlZmxlY3Rpb25Qcm9iZU1hbmFnZXIpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBSZXNvdXJjZVJlc2lkZW5jeSA9IHJlbmRlcmluZy5SZXNvdXJjZVJlc2lkZW5jeTtcbiAgICAgICAgY29uc3QgcHJvYmVzID0gcmVmbGVjdGlvblByb2JlTWFuYWdlci5nZXRQcm9iZXMoKTtcbiAgICAgICAgY29uc3QgbWF4UHJvYmVDb3VudCA9IDQ7XG4gICAgICAgIGxldCBwcm9iZUlEID0gMDtcbiAgICAgICAgZm9yIChjb25zdCBwcm9iZSBvZiBwcm9iZXMpIHtcbiAgICAgICAgICAgIGlmICghcHJvYmUubmVlZFJlbmRlcikge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgYXJlYSA9IHByb2JlLnJlbmRlckFyZWEoKTtcbiAgICAgICAgICAgIGNvbnN0IHdpZHRoID0gTWF0aC5tYXgoTWF0aC5mbG9vcihhcmVhLngpLCAxKTtcbiAgICAgICAgICAgIGNvbnN0IGhlaWdodCA9IE1hdGgubWF4KE1hdGguZmxvb3IoYXJlYS55KSwgMSk7XG5cbiAgICAgICAgICAgIGlmIChwcm9iZS5wcm9iZVR5cGUgPT09IHJlbmRlcmVyLnNjZW5lLlByb2JlVHlwZS5QTEFOQVIpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWNhbWVyYUNvbmZpZ3MuZW5hYmxlUGxhbmFyUmVmbGVjdGlvblByb2JlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3c6IHJlbmRlcmVyLlJlbmRlcldpbmRvdyA9IHByb2JlLnJlYWx0aW1lUGxhbmFyVGV4dHVyZSEud2luZG93ITtcbiAgICAgICAgICAgICAgICBjb25zdCBjb2xvck5hbWUgPSBgUGxhbmFyUHJvYmVSVCR7cHJvYmVJRH1gO1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlcHRoU3RlbmNpbE5hbWUgPSBgUGxhbmFyUHJvYmVEUyR7cHJvYmVJRH1gO1xuICAgICAgICAgICAgICAgIC8vIFByb2JlUmVzb3VyY2VcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyV2luZG93KGNvbG9yTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCwgd2luZG93KTtcbiAgICAgICAgICAgICAgICBwcGwuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsXG4gICAgICAgICAgICAgICAgICAgIGdmeC5Gb3JtYXQuREVQVEhfU1RFTkNJTCwgd2lkdGgsIGhlaWdodCwgUmVzb3VyY2VSZXNpZGVuY3kuTUVNT1JZTEVTUyk7XG5cbiAgICAgICAgICAgICAgICAvLyBSZW5kZXJpbmdcbiAgICAgICAgICAgICAgICBjb25zdCBwcm9iZVBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh3aWR0aCwgaGVpZ2h0LCAnZGVmYXVsdCcpO1xuICAgICAgICAgICAgICAgIHByb2JlUGFzcy5uYW1lID0gYFBsYW5hclJlZmxlY3Rpb25Qcm9iZSR7cHJvYmVJRH1gO1xuICAgICAgICAgICAgICAgIHRoaXMuX2J1aWxkUmVmbGVjdGlvblByb2JlUGFzcyhwcm9iZVBhc3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBwcm9iZS5jYW1lcmEsXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yTmFtZSwgZGVwdGhTdGVuY2lsTmFtZSwgbWFpbkxpZ2h0LCBzY2VuZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEVESVRPUikge1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGZhY2VJZHggPSAwOyBmYWNlSWR4IDwgcHJvYmUuYmFrZWRDdWJlVGV4dHVyZXMubGVuZ3RoOyBmYWNlSWR4KyspIHtcbiAgICAgICAgICAgICAgICAgICAgcHJvYmUudXBkYXRlQ2FtZXJhRGlyKGZhY2VJZHgpO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aW5kb3c6IHJlbmRlcmVyLlJlbmRlcldpbmRvdyA9IHByb2JlLmJha2VkQ3ViZVRleHR1cmVzW2ZhY2VJZHhdLndpbmRvdyE7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9yTmFtZSA9IGBDdWJlUHJvYmVSVCR7cHJvYmVJRH0ke2ZhY2VJZHh9YDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVwdGhTdGVuY2lsTmFtZSA9IGBDdWJlUHJvYmVEUyR7cHJvYmVJRH0ke2ZhY2VJZHh9YDtcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJvYmVSZXNvdXJjZVxuICAgICAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyV2luZG93KGNvbG9yTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MucmFkaWFuY2VGb3JtYXQsIHdpZHRoLCBoZWlnaHQsIHdpbmRvdyk7XG4gICAgICAgICAgICAgICAgICAgIHBwbC5hZGREZXB0aFN0ZW5jaWwoZGVwdGhTdGVuY2lsTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdmeC5Gb3JtYXQuREVQVEhfU1RFTkNJTCwgd2lkdGgsIGhlaWdodCwgUmVzb3VyY2VSZXNpZGVuY3kuTUVNT1JZTEVTUyk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyaW5nXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2JlUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICAgICAgICAgIHByb2JlUGFzcy5uYW1lID0gYEN1YmVQcm9iZSR7cHJvYmVJRH0ke2ZhY2VJZHh9YDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnVpbGRSZWZsZWN0aW9uUHJvYmVQYXNzKHByb2JlUGFzcywgY2FtZXJhQ29uZmlncywgaWQsIHByb2JlLmNhbWVyYSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yTmFtZSwgZGVwdGhTdGVuY2lsTmFtZSwgbWFpbkxpZ2h0LCBzY2VuZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHByb2JlLm5lZWRSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsrcHJvYmVJRDtcbiAgICAgICAgICAgIGlmIChwcm9iZUlEID09PSBtYXhQcm9iZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBfYnVpbGRSZWZsZWN0aW9uUHJvYmVQYXNzKFxuICAgICAgICBwYXNzOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogUmVhZG9ubHk8Q2FtZXJhQ29uZmlncyAmIEZvcndhcmRQYXNzQ29uZmlncz4sXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVwdGhTdGVuY2lsTmFtZTogc3RyaW5nLFxuICAgICAgICBtYWluTGlnaHQ6IHJlbmRlcmVyLnNjZW5lLkRpcmVjdGlvbmFsTGlnaHQgfCBudWxsLFxuICAgICAgICBzY2VuZTogcmVuZGVyZXIuUmVuZGVyU2NlbmUgfCBudWxsID0gbnVsbCxcbiAgICApOiB2b2lkIHtcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcbiAgICAgICAgY29uc3QgU2NlbmVGbGFncyA9IHJlbmRlcmluZy5TY2VuZUZsYWdzO1xuICAgICAgICAvLyBzZXQgdmlld3BvcnRcbiAgICAgICAgY29uc3QgY29sb3JTdG9yZU9wID0gY2FtZXJhQ29uZmlncy5lbmFibGVNU0FBID8gU3RvcmVPcC5ESVNDQVJEIDogU3RvcmVPcC5TVE9SRTtcblxuICAgICAgICAvLyBiaW5kIG91dHB1dCByZW5kZXIgdGFyZ2V0XG4gICAgICAgIGlmIChmb3J3YXJkTmVlZENsZWFyQ29sb3IoY2FtZXJhKSkge1xuICAgICAgICAgICAgdGhpcy5fcmVmbGVjdGlvblByb2JlQ2xlYXJDb2xvci54ID0gY2FtZXJhLmNsZWFyQ29sb3IueDtcbiAgICAgICAgICAgIHRoaXMuX3JlZmxlY3Rpb25Qcm9iZUNsZWFyQ29sb3IueSA9IGNhbWVyYS5jbGVhckNvbG9yLnk7XG4gICAgICAgICAgICB0aGlzLl9yZWZsZWN0aW9uUHJvYmVDbGVhckNvbG9yLnogPSBjYW1lcmEuY2xlYXJDb2xvci56O1xuICAgICAgICAgICAgY29uc3QgY2xlYXJDb2xvciA9IHJlbmRlcmluZy5wYWNrUkdCRSh0aGlzLl9yZWZsZWN0aW9uUHJvYmVDbGVhckNvbG9yKTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueCA9IGNsZWFyQ29sb3IueDtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueSA9IGNsZWFyQ29sb3IueTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueiA9IGNsZWFyQ29sb3IuejtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IudyA9IGNsZWFyQ29sb3IudztcbiAgICAgICAgICAgIHBhc3MuYWRkUmVuZGVyVGFyZ2V0KGNvbG9yTmFtZSwgTG9hZE9wLkNMRUFSLCBjb2xvclN0b3JlT3AsIHRoaXMuX2NsZWFyQ29sb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuTE9BRCwgY29sb3JTdG9yZU9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGJpbmQgZGVwdGggc3RlbmNpbCBidWZmZXJcbiAgICAgICAgaWYgKGNhbWVyYS5jbGVhckZsYWcgJiBDbGVhckZsYWdCaXQuREVQVEhfU1RFTkNJTCkge1xuICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoXG4gICAgICAgICAgICAgICAgZGVwdGhTdGVuY2lsTmFtZSxcbiAgICAgICAgICAgICAgICBMb2FkT3AuQ0xFQVIsXG4gICAgICAgICAgICAgICAgU3RvcmVPcC5ESVNDQVJELFxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhckRlcHRoLFxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhclN0ZW5jaWwsXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNsZWFyRmxhZyAmIENsZWFyRmxhZ0JpdC5ERVBUSF9TVEVOQ0lMLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhc3MuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsIExvYWRPcC5MT0FELCBTdG9yZU9wLkRJU0NBUkQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHNoYWRvdyBtYXAgaWYgZW5hYmxlZFxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVNYWluTGlnaHRTaGFkb3dNYXApIHtcbiAgICAgICAgICAgIHBhc3MuYWRkVGV4dHVyZShgU2hhZG93TWFwJHtpZH1gLCAnY2Nfc2hhZG93TWFwJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUT0RPKHpob3V6aGVuZ2xvbmcpOiBTZXBhcmF0ZSBPUEFRVUUgYW5kIE1BU0sgcXVldWVcblxuICAgICAgICAvLyBhZGQgb3BhcXVlIGFuZCBtYXNrIHF1ZXVlXG4gICAgICAgIHBhc3MuYWRkUXVldWUoUXVldWVIaW50Lk5PTkUsICdyZWZsZWN0LW1hcCcpIC8vIEN1cnJlbnRseSB3ZSBwdXQgT1BBUVVFIGFuZCBNQVNLIGludG8gb25lIHF1ZXVlLCBzbyBRdWV1ZUhpbnQgaXMgTk9ORVxuICAgICAgICAgICAgLmFkZFNjZW5lKGNhbWVyYSxcbiAgICAgICAgICAgICAgICBTY2VuZUZsYWdzLk9QQVFVRSB8IFNjZW5lRmxhZ3MuTUFTSyB8IFNjZW5lRmxhZ3MuUkVGTEVDVElPTl9QUk9CRSxcbiAgICAgICAgICAgICAgICBtYWluTGlnaHQgfHwgdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHNjZW5lID8gc2NlbmUgOiB1bmRlZmluZWQpO1xuICAgIH1cbiAgICBwcml2YXRlIF9hZGRGb3J3YXJkUmFkaWFuY2VQYXNzZXMoXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IFJlYWRvbmx5PENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3M+LFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIG1haW5MaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCB8IG51bGwsXG4gICAgICAgIGNvbG9yTmFtZTogc3RyaW5nLFxuICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lOiBzdHJpbmcsXG4gICAgICAgIGRpc2FibGVNU0FBOiBib29sZWFuID0gZmFsc2UsXG4gICAgICAgIGRlcHRoU3RlbmNpbFN0b3JlT3A6IGdmeC5TdG9yZU9wID0gU3RvcmVPcC5ESVNDQVJELFxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcbiAgICAgICAgY29uc3QgU2NlbmVGbGFncyA9IHJlbmRlcmluZy5TY2VuZUZsYWdzO1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIER5bmFtaWMgc3RhdGVzXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gUHJlcGFyZSBjYW1lcmEgY2xlYXIgY29sb3JcbiAgICAgICAgY29uc3QgY2xlYXJDb2xvciA9IGNhbWVyYS5jbGVhckNvbG9yOyAvLyBSZWR1Y2UgQysrL1RTIGludGVyb3BcbiAgICAgICAgdGhpcy5fY2xlYXJDb2xvci54ID0gY2xlYXJDb2xvci54O1xuICAgICAgICB0aGlzLl9jbGVhckNvbG9yLnkgPSBjbGVhckNvbG9yLnk7XG4gICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueiA9IGNsZWFyQ29sb3IuejtcbiAgICAgICAgdGhpcy5fY2xlYXJDb2xvci53ID0gY2xlYXJDb2xvci53O1xuXG4gICAgICAgIC8vIFByZXBhcmUgY2FtZXJhIHZpZXdwb3J0XG4gICAgICAgIGNvbnN0IHZpZXdwb3J0ID0gY2FtZXJhLnZpZXdwb3J0OyAvLyBSZWR1Y2UgQysrL1RTIGludGVyb3BcbiAgICAgICAgdGhpcy5fdmlld3BvcnQubGVmdCA9IE1hdGgucm91bmQodmlld3BvcnQueCAqIHdpZHRoKTtcbiAgICAgICAgdGhpcy5fdmlld3BvcnQudG9wID0gTWF0aC5yb3VuZCh2aWV3cG9ydC55ICogaGVpZ2h0KTtcbiAgICAgICAgLy8gSGVyZSB3ZSBtdXN0IHVzZSBjYW1lcmEudmlld3BvcnQud2lkdGggaW5zdGVhZCBvZiBjYW1lcmEudmlld3BvcnQueiwgd2hpY2hcbiAgICAgICAgLy8gaXMgdW5kZWZpbmVkIG9uIG5hdGl2ZSBwbGF0Zm9ybS4gVGhlIHNhbWUgYXMgY2FtZXJhLnZpZXdwb3J0LmhlaWdodC5cbiAgICAgICAgdGhpcy5fdmlld3BvcnQud2lkdGggPSBNYXRoLm1heChNYXRoLnJvdW5kKHZpZXdwb3J0LndpZHRoICogd2lkdGgpLCAxKTtcbiAgICAgICAgdGhpcy5fdmlld3BvcnQuaGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5yb3VuZCh2aWV3cG9ydC5oZWlnaHQgKiBoZWlnaHQpLCAxKTtcblxuICAgICAgICAvLyBNU0FBXG4gICAgICAgIGNvbnN0IGVuYWJsZU1TQUEgPSAhZGlzYWJsZU1TQUEgJiYgY2FtZXJhQ29uZmlncy5lbmFibGVNU0FBO1xuICAgICAgICBhc3NlcnQoIWVuYWJsZU1TQUEgfHwgY2FtZXJhQ29uZmlncy5lbmFibGVTaW5nbGVGb3J3YXJkUGFzcyk7XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChNYWluIERpcmVjdGlvbmFsIExpZ2h0KVxuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIGNvbnN0IHBhc3MgPSBjYW1lcmFDb25maWdzLmVuYWJsZVNpbmdsZUZvcndhcmRQYXNzXG4gICAgICAgICAgICA/IHRoaXMuX2FkZEZvcndhcmRTaW5nbGVSYWRpYW5jZVBhc3MocHBsLCBwcGxDb25maWdzLCBjYW1lcmFDb25maWdzLFxuICAgICAgICAgICAgICAgIGlkLCBjYW1lcmEsIGVuYWJsZU1TQUEsIHdpZHRoLCBoZWlnaHQsIG1haW5MaWdodCxcbiAgICAgICAgICAgICAgICBjb2xvck5hbWUsIGRlcHRoU3RlbmNpbE5hbWUsIGRlcHRoU3RlbmNpbFN0b3JlT3ApXG4gICAgICAgICAgICA6IHRoaXMuX2FkZEZvcndhcmRNdWx0aXBsZVJhZGlhbmNlUGFzc2VzKHBwbCwgY2FtZXJhQ29uZmlncyxcbiAgICAgICAgICAgICAgICBpZCwgY2FtZXJhLCB3aWR0aCwgaGVpZ2h0LCBtYWluTGlnaHQsXG4gICAgICAgICAgICAgICAgY29sb3JOYW1lLCBkZXB0aFN0ZW5jaWxOYW1lLCBkZXB0aFN0ZW5jaWxTdG9yZU9wKTtcblxuICAgICAgICAvLyBQbGFuYXIgU2hhZG93XG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZU1haW5MaWdodFBsYW5hclNoYWRvd01hcCkge1xuICAgICAgICAgICAgdGhpcy5fYWRkUGxhbmFyU2hhZG93UXVldWUoY2FtZXJhLCBtYWluTGlnaHQsIHBhc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChCbGVuZClcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBBZGQgdHJhbnNwYXJlbnQgcXVldWVcblxuICAgICAgICBjb25zdCBzY2VuZUZsYWdzID0gU2NlbmVGbGFncy5CTEVORCB8XG4gICAgICAgICAgICAoY2FtZXJhLmdlb21ldHJ5UmVuZGVyZXJcbiAgICAgICAgICAgICAgICA/IFNjZW5lRmxhZ3MuR0VPTUVUUllcbiAgICAgICAgICAgICAgICA6IFNjZW5lRmxhZ3MuTk9ORSk7XG5cbiAgICAgICAgcGFzc1xuICAgICAgICAgICAgLmFkZFF1ZXVlKFF1ZXVlSGludC5CTEVORClcbiAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIHNjZW5lRmxhZ3MsIG1haW5MaWdodCB8fCB1bmRlZmluZWQpO1xuXG4gICAgICAgIHJldHVybiBwYXNzO1xuICAgIH1cbiAgICBwcml2YXRlIF9hZGRGb3J3YXJkU2luZ2xlUmFkaWFuY2VQYXNzKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBjYW1lcmFDb25maWdzOiBSZWFkb25seTxDYW1lcmFDb25maWdzICYgRm9yd2FyZFBhc3NDb25maWdzPixcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgIGVuYWJsZU1TQUE6IGJvb2xlYW4sXG4gICAgICAgIHdpZHRoOiBudW1iZXIsXG4gICAgICAgIGhlaWdodDogbnVtYmVyLFxuICAgICAgICBtYWluTGlnaHQ6IHJlbmRlcmVyLnNjZW5lLkRpcmVjdGlvbmFsTGlnaHQgfCBudWxsLFxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVwdGhTdGVuY2lsTmFtZTogc3RyaW5nLFxuICAgICAgICBkZXB0aFN0ZW5jaWxTdG9yZU9wOiBnZnguU3RvcmVPcFxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcbiAgICAgICAgYXNzZXJ0KGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2luZ2xlRm9yd2FyZFBhc3MpO1xuICAgICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAgIC8vIEZvcndhcmQgTGlnaHRpbmcgKE1haW4gRGlyZWN0aW9uYWwgTGlnaHQpXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgbGV0IHBhc3M6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyO1xuICAgICAgICBpZiAoZW5hYmxlTVNBQSkge1xuICAgICAgICAgICAgY29uc3QgbXNhYVJhZGlhbmNlTmFtZSA9IGBNc2FhUmFkaWFuY2Uke2lkfWA7XG4gICAgICAgICAgICBjb25zdCBtc2FhRGVwdGhTdGVuY2lsTmFtZSA9IGBNc2FhRGVwdGhTdGVuY2lsJHtpZH1gO1xuICAgICAgICAgICAgY29uc3Qgc2FtcGxlQ291bnQgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzLm1zYWEuc2FtcGxlQ291bnQ7XG5cbiAgICAgICAgICAgIGNvbnN0IG1zUGFzcyA9IHBwbC5hZGRNdWx0aXNhbXBsZVJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgc2FtcGxlQ291bnQsIDAsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBtc1Bhc3MubmFtZSA9ICdNc2FhRm9yd2FyZFBhc3MnO1xuXG4gICAgICAgICAgICAvLyBNU0FBIGFsd2F5cyBkaXNjYXJkcyBkZXB0aCBzdGVuY2lsXG4gICAgICAgICAgICB0aGlzLl9idWlsZEZvcndhcmRNYWluTGlnaHRQYXNzKG1zUGFzcywgY2FtZXJhQ29uZmlncywgaWQsIGNhbWVyYSxcbiAgICAgICAgICAgICAgICBtc2FhUmFkaWFuY2VOYW1lLCBtc2FhRGVwdGhTdGVuY2lsTmFtZSwgU3RvcmVPcC5ESVNDQVJELCBtYWluTGlnaHQpO1xuXG4gICAgICAgICAgICBtc1Bhc3MucmVzb2x2ZVJlbmRlclRhcmdldChtc2FhUmFkaWFuY2VOYW1lLCBjb2xvck5hbWUpO1xuXG4gICAgICAgICAgICBwYXNzID0gbXNQYXNzO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XG4gICAgICAgICAgICBwYXNzLm5hbWUgPSAnRm9yd2FyZFBhc3MnO1xuXG4gICAgICAgICAgICB0aGlzLl9idWlsZEZvcndhcmRNYWluTGlnaHRQYXNzKHBhc3MsIGNhbWVyYUNvbmZpZ3MsIGlkLCBjYW1lcmEsXG4gICAgICAgICAgICAgICAgY29sb3JOYW1lLCBkZXB0aFN0ZW5jaWxOYW1lLCBkZXB0aFN0ZW5jaWxTdG9yZU9wLCBtYWluTGlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydChwYXNzICE9PSB1bmRlZmluZWQpO1xuXG4gICAgICAgIC8vIEZvcndhcmQgTGlnaHRpbmcgKEFkZGl0aXZlIExpZ2h0cylcbiAgICAgICAgdGhpcy5mb3J3YXJkTGlnaHRpbmcuYWRkTGlnaHRRdWV1ZXMoXG4gICAgICAgICAgICBwYXNzLFxuICAgICAgICAgICAgY2FtZXJhLFxuICAgICAgICAgICAgcHBsQ29uZmlncy5tb2JpbGVNYXhTcG90TGlnaHRTaGFkb3dNYXBzLFxuICAgICAgICApO1xuXG4gICAgICAgIHJldHVybiBwYXNzO1xuICAgIH1cbiAgICBwcml2YXRlIF9hZGRGb3J3YXJkTXVsdGlwbGVSYWRpYW5jZVBhc3NlcyhcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgY2FtZXJhQ29uZmlnczogUmVhZG9ubHk8Q2FtZXJhQ29uZmlncyAmIEZvcndhcmRQYXNzQ29uZmlncz4sXG4gICAgICAgIGlkOiBudW1iZXIsXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxuICAgICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgICBoZWlnaHQ6IG51bWJlcixcbiAgICAgICAgbWFpbkxpZ2h0OiByZW5kZXJlci5zY2VuZS5EaXJlY3Rpb25hbExpZ2h0IHwgbnVsbCxcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXG4gICAgICAgIGRlcHRoU3RlbmNpbE5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVwdGhTdGVuY2lsU3RvcmVPcDogZ2Z4LlN0b3JlT3BcbiAgICApOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB7XG4gICAgICAgIGFzc2VydCghY2FtZXJhQ29uZmlncy5lbmFibGVTaW5nbGVGb3J3YXJkUGFzcyk7XG5cbiAgICAgICAgLy8gRm9yd2FyZCBMaWdodGluZyAoTWFpbiBEaXJlY3Rpb25hbCBMaWdodClcbiAgICAgICAgbGV0IHBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh3aWR0aCwgaGVpZ2h0LCAnZGVmYXVsdCcpO1xuICAgICAgICBwYXNzLm5hbWUgPSAnRm9yd2FyZFBhc3MnO1xuXG4gICAgICAgIGNvbnN0IGZpcnN0U3RvcmVPcCA9IHRoaXMuZm9yd2FyZExpZ2h0aW5nLmlzTXVsdGlwbGVMaWdodFBhc3Nlc05lZWRlZCgpXG4gICAgICAgICAgICA/IFN0b3JlT3AuU1RPUkVcbiAgICAgICAgICAgIDogZGVwdGhTdGVuY2lsU3RvcmVPcDtcblxuICAgICAgICB0aGlzLl9idWlsZEZvcndhcmRNYWluTGlnaHRQYXNzKHBhc3MsIGNhbWVyYUNvbmZpZ3MsXG4gICAgICAgICAgICBpZCwgY2FtZXJhLCBjb2xvck5hbWUsIGRlcHRoU3RlbmNpbE5hbWUsIGZpcnN0U3RvcmVPcCwgbWFpbkxpZ2h0KTtcblxuICAgICAgICAvLyBGb3J3YXJkIExpZ2h0aW5nIChBZGRpdGl2ZSBMaWdodHMpXG4gICAgICAgIHBhc3MgPSB0aGlzLmZvcndhcmRMaWdodGluZ1xuICAgICAgICAgICAgLmFkZExpZ2h0UGFzc2VzKGNvbG9yTmFtZSwgZGVwdGhTdGVuY2lsTmFtZSwgZGVwdGhTdGVuY2lsU3RvcmVPcCxcbiAgICAgICAgICAgICAgICBpZCwgd2lkdGgsIGhlaWdodCwgY2FtZXJhLCB0aGlzLl92aWV3cG9ydCwgcHBsLCBwYXNzKTtcblxuICAgICAgICByZXR1cm4gcGFzcztcbiAgICB9XG4gICAgcHJpdmF0ZSBfYnVpbGRGb3J3YXJkTWFpbkxpZ2h0UGFzcyhcbiAgICAgICAgcGFzczogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIsXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IFJlYWRvbmx5PENhbWVyYUNvbmZpZ3MgJiBGb3J3YXJkUGFzc0NvbmZpZ3M+LFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgY29sb3JOYW1lOiBzdHJpbmcsXG4gICAgICAgIGRlcHRoU3RlbmNpbE5hbWU6IHN0cmluZyxcbiAgICAgICAgZGVwdGhTdGVuY2lsU3RvcmVPcDogZ2Z4LlN0b3JlT3AsXG4gICAgICAgIG1haW5MaWdodDogcmVuZGVyZXIuc2NlbmUuRGlyZWN0aW9uYWxMaWdodCB8IG51bGwsXG4gICAgICAgIHNjZW5lOiByZW5kZXJlci5SZW5kZXJTY2VuZSB8IG51bGwgPSBudWxsLFxuICAgICk6IHZvaWQge1xuICAgICAgICBjb25zdCBRdWV1ZUhpbnQgPSByZW5kZXJpbmcuUXVldWVIaW50O1xuICAgICAgICBjb25zdCBTY2VuZUZsYWdzID0gcmVuZGVyaW5nLlNjZW5lRmxhZ3M7XG4gICAgICAgIC8vIHNldCB2aWV3cG9ydFxuICAgICAgICBwYXNzLnNldFZpZXdwb3J0KHRoaXMuX3ZpZXdwb3J0KTtcblxuICAgICAgICBjb25zdCBjb2xvclN0b3JlT3AgPSBjYW1lcmFDb25maWdzLmVuYWJsZU1TQUEgPyBTdG9yZU9wLkRJU0NBUkQgOiBTdG9yZU9wLlNUT1JFO1xuXG4gICAgICAgIC8vIGJpbmQgb3V0cHV0IHJlbmRlciB0YXJnZXRcbiAgICAgICAgaWYgKGZvcndhcmROZWVkQ2xlYXJDb2xvcihjYW1lcmEpKSB7XG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5DTEVBUiwgY29sb3JTdG9yZU9wLCB0aGlzLl9jbGVhckNvbG9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhc3MuYWRkUmVuZGVyVGFyZ2V0KGNvbG9yTmFtZSwgTG9hZE9wLkxPQUQsIGNvbG9yU3RvcmVPcCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBiaW5kIGRlcHRoIHN0ZW5jaWwgYnVmZmVyXG4gICAgICAgIGlmIChERUJVRykge1xuICAgICAgICAgICAgaWYgKGNvbG9yTmFtZSA9PT0gY2FtZXJhQ29uZmlncy5jb2xvck5hbWUgJiZcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lICE9PSBjYW1lcmFDb25maWdzLmRlcHRoU3RlbmNpbE5hbWUpIHtcbiAgICAgICAgICAgICAgICB3YXJuKCdEZWZhdWx0IGZyYW1lYnVmZmVyIGNhbm5vdCB1c2UgY3VzdG9tIGRlcHRoIHN0ZW5jaWwgYnVmZmVyJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2FtZXJhLmNsZWFyRmxhZyAmIENsZWFyRmxhZ0JpdC5ERVBUSF9TVEVOQ0lMKSB7XG4gICAgICAgICAgICBwYXNzLmFkZERlcHRoU3RlbmNpbChcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lLFxuICAgICAgICAgICAgICAgIExvYWRPcC5DTEVBUixcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWxTdG9yZU9wLFxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhckRlcHRoLFxuICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhclN0ZW5jaWwsXG4gICAgICAgICAgICAgICAgY2FtZXJhLmNsZWFyRmxhZyAmIENsZWFyRmxhZ0JpdC5ERVBUSF9TVEVOQ0lMLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhc3MuYWRkRGVwdGhTdGVuY2lsKGRlcHRoU3RlbmNpbE5hbWUsIExvYWRPcC5MT0FELCBkZXB0aFN0ZW5jaWxTdG9yZU9wKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBzaGFkb3cgbWFwIGlmIGVuYWJsZWRcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlTWFpbkxpZ2h0U2hhZG93TWFwKSB7XG4gICAgICAgICAgICBwYXNzLmFkZFRleHR1cmUoYFNoYWRvd01hcCR7aWR9YCwgJ2NjX3NoYWRvd01hcCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogU2VwYXJhdGUgT1BBUVVFIGFuZCBNQVNLIHF1ZXVlXG5cbiAgICAgICAgLy8gYWRkIG9wYXF1ZSBhbmQgbWFzayBxdWV1ZVxuICAgICAgICBwYXNzLmFkZFF1ZXVlKFF1ZXVlSGludC5OT05FKSAvLyBDdXJyZW50bHkgd2UgcHV0IE9QQVFVRSBhbmQgTUFTSyBpbnRvIG9uZSBxdWV1ZSwgc28gUXVldWVIaW50IGlzIE5PTkVcbiAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsXG4gICAgICAgICAgICAgICAgU2NlbmVGbGFncy5PUEFRVUUgfCBTY2VuZUZsYWdzLk1BU0ssXG4gICAgICAgICAgICAgICAgbWFpbkxpZ2h0IHx8IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICBzY2VuZSA/IHNjZW5lIDogdW5kZWZpbmVkKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBfYWRkUGxhbmFyU2hhZG93UXVldWUoXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxuICAgICAgICBtYWluTGlnaHQ6IHJlbmRlcmVyLnNjZW5lLkRpcmVjdGlvbmFsTGlnaHQgfCBudWxsLFxuICAgICAgICBwYXNzOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcixcbiAgICApIHtcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcbiAgICAgICAgY29uc3QgU2NlbmVGbGFncyA9IHJlbmRlcmluZy5TY2VuZUZsYWdzO1xuICAgICAgICBwYXNzLmFkZFF1ZXVlKFF1ZXVlSGludC5CTEVORCwgJ3BsYW5hci1zaGFkb3cnKVxuICAgICAgICAgICAgLmFkZFNjZW5lKFxuICAgICAgICAgICAgICAgIGNhbWVyYSxcbiAgICAgICAgICAgICAgICBTY2VuZUZsYWdzLlNIQURPV19DQVNURVIgfCBTY2VuZUZsYWdzLlBMQU5BUl9TSEFET1cgfCBTY2VuZUZsYWdzLkJMRU5ELFxuICAgICAgICAgICAgICAgIG1haW5MaWdodCB8fCB1bmRlZmluZWQsXG4gICAgICAgICAgICApO1xuICAgIH1cbiAgICBwcml2YXRlIHJlYWRvbmx5IGZvcndhcmRMaWdodGluZyA9IG5ldyBGb3J3YXJkTGlnaHRpbmcoKTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF92aWV3cG9ydCA9IG5ldyBWaWV3cG9ydCgpO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2NsZWFyQ29sb3IgPSBuZXcgQ29sb3IoMCwgMCwgMCwgMSk7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfcmVmbGVjdGlvblByb2JlQ2xlYXJDb2xvciA9IG5ldyBWZWMzKDAsIDAsIDApO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJsb29tUGFzc0NvbmZpZ3Mge1xuICAgIGVuYWJsZUJsb29tOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQnVpbHRpbkJsb29tUGFzc0J1aWxkZXIgaW1wbGVtZW50cyByZW5kZXJpbmcuUGlwZWxpbmVQYXNzQnVpbGRlciB7XG4gICAgZ2V0Q29uZmlnT3JkZXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGdldFJlbmRlck9yZGVyKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAyMDA7XG4gICAgfVxuICAgIGNvbmZpZ0NhbWVyYShcbiAgICAgICAgY2FtZXJhOiBSZWFkb25seTxyZW5kZXJlci5zY2VuZS5DYW1lcmE+LFxuICAgICAgICBwaXBlbGluZUNvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBCbG9vbVBhc3NDb25maWdzKTogdm9pZCB7XG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlQmxvb21cbiAgICAgICAgICAgID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5ibG9vbS5lbmFibGVkXG4gICAgICAgICAgICAmJiAhIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuYmxvb20ubWF0ZXJpYWw7XG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUJsb29tKSB7XG4gICAgICAgICAgICArK2NhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdpbmRvd1Jlc2l6ZShcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEJsb29tUGFzc0NvbmZpZ3MsXG4gICAgICAgIHdpbmRvdzogcmVuZGVyZXIuUmVuZGVyV2luZG93KTogdm9pZCB7XG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUJsb29tKSB7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHdpbmRvdy5yZW5kZXJXaW5kb3dJZDtcbiAgICAgICAgICAgIGxldCBibG9vbVdpZHRoID0gY2FtZXJhQ29uZmlncy53aWR0aDtcbiAgICAgICAgICAgIGxldCBibG9vbUhlaWdodCA9IGNhbWVyYUNvbmZpZ3MuaGVpZ2h0O1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuYmxvb20uaXRlcmF0aW9ucyArIDE7ICsraSkge1xuICAgICAgICAgICAgICAgIGJsb29tV2lkdGggPSBNYXRoLm1heChNYXRoLmZsb29yKGJsb29tV2lkdGggLyAyKSwgMSk7XG4gICAgICAgICAgICAgICAgYmxvb21IZWlnaHQgPSBNYXRoLm1heChNYXRoLmZsb29yKGJsb29tSGVpZ2h0IC8gMiksIDEpO1xuICAgICAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJUYXJnZXQoYEJsb29tVGV4JHtpZH1fJHtpfWAsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MucmFkaWFuY2VGb3JtYXQsIGJsb29tV2lkdGgsIGJsb29tSGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldHVwKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgQmxvb21QYXNzQ29uZmlncyxcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgIGNvbnRleHQ6IFBpcGVsaW5lQ29udGV4dCxcbiAgICAgICAgcHJldlJlbmRlclBhc3M/OiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcilcbiAgICAgICAgOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICghY2FtZXJhQ29uZmlncy5lbmFibGVCbG9vbSkge1xuICAgICAgICAgICAgcmV0dXJuIHByZXZSZW5kZXJQYXNzO1xuICAgICAgICB9XG5cbiAgICAgICAgLS1jYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcbiAgICAgICAgYXNzZXJ0KGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID49IDApO1xuICAgICAgICBjb25zdCBpZCA9IGNhbWVyYS53aW5kb3cucmVuZGVyV2luZG93SWQ7XG4gICAgICAgIGFzc2VydCghIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuYmxvb20ubWF0ZXJpYWwpO1xuICAgICAgICByZXR1cm4gdGhpcy5fYWRkS2F3YXNlRHVhbEZpbHRlckJsb29tUGFzc2VzKFxuICAgICAgICAgICAgcHBsLCBwcGxDb25maWdzLFxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncyxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MsXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmJsb29tLm1hdGVyaWFsLFxuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLndpZHRoLFxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5oZWlnaHQsXG4gICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBfYWRkS2F3YXNlRHVhbEZpbHRlckJsb29tUGFzc2VzKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgUmVhZG9ubHk8Qmxvb21QYXNzQ29uZmlncz4sXG4gICAgICAgIHNldHRpbmdzOiBQaXBlbGluZVNldHRpbmdzLFxuICAgICAgICBibG9vbU1hdGVyaWFsOiBNYXRlcmlhbCxcbiAgICAgICAgaWQ6IG51bWJlcixcbiAgICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIHJhZGlhbmNlTmFtZTogc3RyaW5nLFxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcbiAgICAgICAgY29uc3QgUXVldWVIaW50ID0gcmVuZGVyaW5nLlF1ZXVlSGludDtcbiAgICAgICAgLy8gQmFzZWQgb24gS2F3YXNlIER1YWwgRmlsdGVyIEJsdXIuIFNhdmVzIGJhbmR3aWR0aCBvbiBtb2JpbGUgZGV2aWNlcy5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG1heC1sZW5cbiAgICAgICAgLy8gaHR0cHM6Ly9jb21tdW5pdHkuYXJtLmNvbS9jZnMtZmlsZS9fX2tleS9jb21tdW5pdHlzZXJ2ZXItYmxvZ3MtY29tcG9uZW50cy13ZWJsb2dmaWxlcy8wMC0wMC0wMC0yMC02Ni9zaWdncmFwaDIwMTVfMkQwMF9tbWdfMkQwMF9tYXJpdXNfMkQwMF9zbGlkZXMucGRmXG5cbiAgICAgICAgLy8gU2l6ZTogW3ByZWZpbHRlcigxLzIpLCBkb3duc2FtcGxlKDEvNCksIGRvd25zYW1wbGUoMS84KSwgZG93bnNhbXBsZSgxLzE2KSwgLi4uXVxuICAgICAgICBjb25zdCBpdGVyYXRpb25zID0gc2V0dGluZ3MuYmxvb20uaXRlcmF0aW9ucztcbiAgICAgICAgY29uc3Qgc2l6ZUNvdW50ID0gaXRlcmF0aW9ucyArIDE7XG4gICAgICAgIHRoaXMuX2Jsb29tV2lkdGhzLmxlbmd0aCA9IHNpemVDb3VudDtcbiAgICAgICAgdGhpcy5fYmxvb21IZWlnaHRzLmxlbmd0aCA9IHNpemVDb3VudDtcbiAgICAgICAgdGhpcy5fYmxvb21XaWR0aHNbMF0gPSBNYXRoLm1heChNYXRoLmZsb29yKHdpZHRoIC8gMiksIDEpO1xuICAgICAgICB0aGlzLl9ibG9vbUhlaWdodHNbMF0gPSBNYXRoLm1heChNYXRoLmZsb29yKGhlaWdodCAvIDIpLCAxKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgIT09IHNpemVDb3VudDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl9ibG9vbVdpZHRoc1tpXSA9IE1hdGgubWF4KE1hdGguZmxvb3IodGhpcy5fYmxvb21XaWR0aHNbaSAtIDFdIC8gMiksIDEpO1xuICAgICAgICAgICAgdGhpcy5fYmxvb21IZWlnaHRzW2ldID0gTWF0aC5tYXgoTWF0aC5mbG9vcih0aGlzLl9ibG9vbUhlaWdodHNbaSAtIDFdIC8gMiksIDEpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQmxvb20gdGV4dHVyZSBuYW1lc1xuICAgICAgICB0aGlzLl9ibG9vbVRleE5hbWVzLmxlbmd0aCA9IHNpemVDb3VudDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgIT09IHNpemVDb3VudDsgKytpKSB7XG4gICAgICAgICAgICB0aGlzLl9ibG9vbVRleE5hbWVzW2ldID0gYEJsb29tVGV4JHtpZH1fJHtpfWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXR1cCBibG9vbSBwYXJhbWV0ZXJzXG4gICAgICAgIHRoaXMuX2Jsb29tUGFyYW1zLnggPSBwcGxDb25maWdzLnVzZUZsb2F0T3V0cHV0ID8gMSA6IDA7XG4gICAgICAgIHRoaXMuX2Jsb29tUGFyYW1zLnggPSAwOyAvLyB1bnVzZWRcbiAgICAgICAgdGhpcy5fYmxvb21QYXJhbXMueiA9IHNldHRpbmdzLmJsb29tLnRocmVzaG9sZDtcbiAgICAgICAgdGhpcy5fYmxvb21QYXJhbXMudyA9IHNldHRpbmdzLmJsb29tLmVuYWJsZUFscGhhTWFzayA/IDEgOiAwO1xuXG4gICAgICAgIC8vIFByZWZpbHRlciBwYXNzXG4gICAgICAgIGNvbnN0IHByZWZpbHRlclBhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyh0aGlzLl9ibG9vbVdpZHRoc1swXSwgdGhpcy5fYmxvb21IZWlnaHRzWzBdLCAnY2MtYmxvb20tcHJlZmlsdGVyJyk7XG4gICAgICAgIHByZWZpbHRlclBhc3MuYWRkUmVuZGVyVGFyZ2V0KFxuICAgICAgICAgICAgdGhpcy5fYmxvb21UZXhOYW1lc1swXSxcbiAgICAgICAgICAgIExvYWRPcC5DTEVBUixcbiAgICAgICAgICAgIFN0b3JlT3AuU1RPUkUsXG4gICAgICAgICAgICB0aGlzLl9jbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayxcbiAgICAgICAgKTtcbiAgICAgICAgcHJlZmlsdGVyUGFzcy5hZGRUZXh0dXJlKHJhZGlhbmNlTmFtZSwgJ2lucHV0VGV4dHVyZScpO1xuICAgICAgICBwcmVmaWx0ZXJQYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcbiAgICAgICAgcHJlZmlsdGVyUGFzcy5zZXRWZWM0KCdibG9vbVBhcmFtcycsIHRoaXMuX2Jsb29tUGFyYW1zKTtcbiAgICAgICAgcHJlZmlsdGVyUGFzc1xuICAgICAgICAgICAgLmFkZFF1ZXVlKFF1ZXVlSGludC5PUEFRVUUpXG4gICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoYmxvb21NYXRlcmlhbCwgMCk7XG5cbiAgICAgICAgLy8gRG93bnNhbXBsZSBwYXNzZXNcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgIT09IHNpemVDb3VudDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCBkb3duUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHRoaXMuX2Jsb29tV2lkdGhzW2ldLCB0aGlzLl9ibG9vbUhlaWdodHNbaV0sICdjYy1ibG9vbS1kb3duc2FtcGxlJyk7XG4gICAgICAgICAgICBkb3duUGFzcy5hZGRSZW5kZXJUYXJnZXQodGhpcy5fYmxvb21UZXhOYW1lc1tpXSwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCB0aGlzLl9jbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayk7XG4gICAgICAgICAgICBkb3duUGFzcy5hZGRUZXh0dXJlKHRoaXMuX2Jsb29tVGV4TmFtZXNbaSAtIDFdLCAnYmxvb21UZXh0dXJlJyk7XG4gICAgICAgICAgICB0aGlzLl9ibG9vbVRleFNpemUueCA9IHRoaXMuX2Jsb29tV2lkdGhzW2kgLSAxXTtcbiAgICAgICAgICAgIHRoaXMuX2Jsb29tVGV4U2l6ZS55ID0gdGhpcy5fYmxvb21IZWlnaHRzW2kgLSAxXTtcbiAgICAgICAgICAgIGRvd25QYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcbiAgICAgICAgICAgIGRvd25QYXNzLnNldFZlYzQoJ2Jsb29tVGV4U2l6ZScsIHRoaXMuX2Jsb29tVGV4U2l6ZSk7XG4gICAgICAgICAgICBkb3duUGFzc1xuICAgICAgICAgICAgICAgIC5hZGRRdWV1ZShRdWV1ZUhpbnQuT1BBUVVFKVxuICAgICAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChibG9vbU1hdGVyaWFsLCAxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwc2FtcGxlIHBhc3Nlc1xuICAgICAgICBmb3IgKGxldCBpID0gaXRlcmF0aW9uczsgaS0tID4gMDspIHtcbiAgICAgICAgICAgIGNvbnN0IHVwUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHRoaXMuX2Jsb29tV2lkdGhzW2ldLCB0aGlzLl9ibG9vbUhlaWdodHNbaV0sICdjYy1ibG9vbS11cHNhbXBsZScpO1xuICAgICAgICAgICAgdXBQYXNzLmFkZFJlbmRlclRhcmdldCh0aGlzLl9ibG9vbVRleE5hbWVzW2ldLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIHRoaXMuX2NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrKTtcbiAgICAgICAgICAgIHVwUGFzcy5hZGRUZXh0dXJlKHRoaXMuX2Jsb29tVGV4TmFtZXNbaSArIDFdLCAnYmxvb21UZXh0dXJlJyk7XG4gICAgICAgICAgICB0aGlzLl9ibG9vbVRleFNpemUueCA9IHRoaXMuX2Jsb29tV2lkdGhzW2kgKyAxXTtcbiAgICAgICAgICAgIHRoaXMuX2Jsb29tVGV4U2l6ZS55ID0gdGhpcy5fYmxvb21IZWlnaHRzW2kgKyAxXTtcbiAgICAgICAgICAgIHVwUGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XG4gICAgICAgICAgICB1cFBhc3Muc2V0VmVjNCgnYmxvb21UZXhTaXplJywgdGhpcy5fYmxvb21UZXhTaXplKTtcbiAgICAgICAgICAgIHVwUGFzc1xuICAgICAgICAgICAgICAgIC5hZGRRdWV1ZShRdWV1ZUhpbnQuT1BBUVVFKVxuICAgICAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChibG9vbU1hdGVyaWFsLCAyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENvbWJpbmUgcGFzc1xuICAgICAgICBjb25zdCBjb21iaW5lUGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdjYy1ibG9vbS1jb21iaW5lJyk7XG4gICAgICAgIGNvbWJpbmVQYXNzLmFkZFJlbmRlclRhcmdldChyYWRpYW5jZU5hbWUsIExvYWRPcC5MT0FELCBTdG9yZU9wLlNUT1JFKTtcbiAgICAgICAgY29tYmluZVBhc3MuYWRkVGV4dHVyZSh0aGlzLl9ibG9vbVRleE5hbWVzWzBdLCAnYmxvb21UZXh0dXJlJyk7XG4gICAgICAgIGNvbWJpbmVQYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcbiAgICAgICAgY29tYmluZVBhc3Muc2V0VmVjNCgnYmxvb21QYXJhbXMnLCB0aGlzLl9ibG9vbVBhcmFtcyk7XG4gICAgICAgIGNvbWJpbmVQYXNzXG4gICAgICAgICAgICAuYWRkUXVldWUoUXVldWVIaW50LkJMRU5EKVxuICAgICAgICAgICAgLmFkZEZ1bGxzY3JlZW5RdWFkKGJsb29tTWF0ZXJpYWwsIDMpO1xuXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA9PT0gMCkge1xuICAgICAgICAgICAgcmV0dXJuIGFkZENvcHlUb1NjcmVlblBhc3MocHBsLCBwcGxDb25maWdzLCBjYW1lcmFDb25maWdzLCByYWRpYW5jZU5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGNvbWJpbmVQYXNzO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8vIEJsb29tXG4gICAgcHJpdmF0ZSByZWFkb25seSBfY2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2sgPSBuZXcgQ29sb3IoMCwgMCwgMCwgMCk7XG4gICAgcHJpdmF0ZSByZWFkb25seSBfYmxvb21QYXJhbXMgPSBuZXcgVmVjNCgwLCAwLCAwLCAwKTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9ibG9vbVRleFNpemUgPSBuZXcgVmVjNCgwLCAwLCAwLCAwKTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9ibG9vbVdpZHRoczogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jsb29tSGVpZ2h0czogQXJyYXk8bnVtYmVyPiA9IFtdO1xuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Jsb29tVGV4TmFtZXM6IEFycmF5PHN0cmluZz4gPSBbXTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb25lTWFwcGluZ1Bhc3NDb25maWdzIHtcbiAgICBlbmFibGVUb25lTWFwcGluZzogYm9vbGVhbjtcbiAgICBlbmFibGVDb2xvckdyYWRpbmc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBCdWlsdGluVG9uZU1hcHBpbmdQYXNzQnVpbGRlciBpbXBsZW1lbnRzIHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyIHtcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDMwMDtcbiAgICB9XG4gICAgY29uZmlnQ2FtZXJhKFxuICAgICAgICBjYW1lcmE6IFJlYWRvbmx5PHJlbmRlcmVyLnNjZW5lLkNhbWVyYT4sXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBUb25lTWFwcGluZ1Bhc3NDb25maWdzKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncztcblxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZUNvbG9yR3JhZGluZ1xuICAgICAgICAgICAgPSBzZXR0aW5ncy5jb2xvckdyYWRpbmcuZW5hYmxlZFxuICAgICAgICAgICAgJiYgISFzZXR0aW5ncy5jb2xvckdyYWRpbmcubWF0ZXJpYWxcbiAgICAgICAgICAgICYmICEhc2V0dGluZ3MuY29sb3JHcmFkaW5nLmNvbG9yR3JhZGluZ01hcDtcblxuICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZVRvbmVNYXBwaW5nXG4gICAgICAgICAgICA9IGNhbWVyYUNvbmZpZ3MuZW5hYmxlSERSIC8vIEZyb20gSGFsZiB0byBSR0JBOFxuICAgICAgICAgICAgfHwgY2FtZXJhQ29uZmlncy5lbmFibGVDb2xvckdyYWRpbmc7IC8vIENvbG9yIGdyYWRpbmdcblxuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVUb25lTWFwcGluZykge1xuICAgICAgICAgICAgKytjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcbiAgICAgICAgfVxuICAgIH1cbiAgICB3aW5kb3dSZXNpemUoXG4gICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBUb25lTWFwcGluZ1Bhc3NDb25maWdzKTogdm9pZCB7XG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUNvbG9yR3JhZGluZykge1xuICAgICAgICAgICAgYXNzZXJ0KCEhY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5jb2xvckdyYWRpbmcubWF0ZXJpYWwpO1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5jb2xvckdyYWRpbmcubWF0ZXJpYWwuc2V0UHJvcGVydHkoXG4gICAgICAgICAgICAgICAgJ2NvbG9yR3JhZGluZ01hcCcsXG4gICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5jb2xvckdyYWRpbmcuY29sb3JHcmFkaW5nTWFwKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cChcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIFRvbmVNYXBwaW5nUGFzc0NvbmZpZ3MsXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxuICAgICAgICBjb250ZXh0OiBQaXBlbGluZUNvbnRleHQsXG4gICAgICAgIHByZXZSZW5kZXJQYXNzPzogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIpXG4gICAgICAgIDogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIgfCB1bmRlZmluZWQge1xuICAgICAgICBpZiAoIWNhbWVyYUNvbmZpZ3MuZW5hYmxlVG9uZU1hcHBpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBwcmV2UmVuZGVyUGFzcztcbiAgICAgICAgfVxuXG4gICAgICAgIC0tY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXM7XG4gICAgICAgIGFzc2VydChjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA+PSAwKTtcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID09PSAwKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ29weUFuZFRvbmVtYXBQYXNzKHBwbCwgcHBsQ29uZmlncywgY2FtZXJhQ29uZmlncyxcbiAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLm5hdGl2ZVdpZHRoLCBjYW1lcmFDb25maWdzLm5hdGl2ZUhlaWdodCxcbiAgICAgICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSwgY2FtZXJhQ29uZmlncy5jb2xvck5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaWQgPSBjYW1lcmFDb25maWdzLnJlbmRlcldpbmRvd0lkO1xuICAgICAgICAgICAgY29uc3QgbGRyQ29sb3JQcmVmaXggPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxuICAgICAgICAgICAgICAgID8gYFNjYWxlZExkckNvbG9yYFxuICAgICAgICAgICAgICAgIDogYExkckNvbG9yYDtcblxuICAgICAgICAgICAgY29uc3QgbGRyQ29sb3JOYW1lID0gZ2V0UGluZ1BvbmdSZW5kZXJUYXJnZXQoY29udGV4dC5jb2xvck5hbWUsIGxkckNvbG9yUHJlZml4LCBpZCk7XG4gICAgICAgICAgICBjb25zdCByYWRpYW5jZU5hbWUgPSBjb250ZXh0LmNvbG9yTmFtZTtcbiAgICAgICAgICAgIGNvbnRleHQuY29sb3JOYW1lID0gbGRyQ29sb3JOYW1lO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkQ29weUFuZFRvbmVtYXBQYXNzKHBwbCwgcHBsQ29uZmlncywgY2FtZXJhQ29uZmlncyxcbiAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLndpZHRoLCBjYW1lcmFDb25maWdzLmhlaWdodCxcbiAgICAgICAgICAgICAgICByYWRpYW5jZU5hbWUsIGxkckNvbG9yTmFtZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBfYWRkQ29weUFuZFRvbmVtYXBQYXNzKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgVG9uZU1hcHBpbmdQYXNzQ29uZmlncyxcbiAgICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIHJhZGlhbmNlTmFtZTogc3RyaW5nLFxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcbiAgICApOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB7XG4gICAgICAgIGxldCBwYXNzOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcjtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzO1xuICAgICAgICBpZiAoY2FtZXJhQ29uZmlncy5lbmFibGVDb2xvckdyYWRpbmcpIHtcbiAgICAgICAgICAgIGFzc2VydCghIXNldHRpbmdzLmNvbG9yR3JhZGluZy5tYXRlcmlhbCk7XG4gICAgICAgICAgICBhc3NlcnQoISFzZXR0aW5ncy5jb2xvckdyYWRpbmcuY29sb3JHcmFkaW5nTWFwKTtcblxuICAgICAgICAgICAgY29uc3QgbHV0VGV4ID0gc2V0dGluZ3MuY29sb3JHcmFkaW5nLmNvbG9yR3JhZGluZ01hcDtcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yR3JhZGluZ1RleFNpemUueCA9IGx1dFRleC53aWR0aDtcbiAgICAgICAgICAgIHRoaXMuX2NvbG9yR3JhZGluZ1RleFNpemUueSA9IGx1dFRleC5oZWlnaHQ7XG5cbiAgICAgICAgICAgIGNvbnN0IGlzU3F1YXJlTWFwID0gbHV0VGV4LndpZHRoID09PSBsdXRUZXguaGVpZ2h0O1xuICAgICAgICAgICAgaWYgKGlzU3F1YXJlTWFwKSB7XG4gICAgICAgICAgICAgICAgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdjYy1jb2xvci1ncmFkaW5nLTh4OCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2NjLWNvbG9yLWdyYWRpbmctbngxJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwYXNzLmFkZFJlbmRlclRhcmdldChjb2xvck5hbWUsIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5TVE9SRSwgc0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrKTtcbiAgICAgICAgICAgIHBhc3MuYWRkVGV4dHVyZShyYWRpYW5jZU5hbWUsICdzY2VuZUNvbG9yTWFwJyk7XG4gICAgICAgICAgICBwYXNzLnNldFZlYzQoJ2dfcGxhdGZvcm0nLCBwcGxDb25maWdzLnBsYXRmb3JtKTtcbiAgICAgICAgICAgIHBhc3Muc2V0VmVjMignbHV0VGV4dHVyZVNpemUnLCB0aGlzLl9jb2xvckdyYWRpbmdUZXhTaXplKTtcbiAgICAgICAgICAgIHBhc3Muc2V0RmxvYXQoJ2NvbnRyaWJ1dGUnLCBzZXR0aW5ncy5jb2xvckdyYWRpbmcuY29udHJpYnV0ZSk7XG4gICAgICAgICAgICBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxuICAgICAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChzZXR0aW5ncy5jb2xvckdyYWRpbmcubWF0ZXJpYWwsIGlzU3F1YXJlTWFwID8gMSA6IDApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdjYy10b25lLW1hcHBpbmcnKTtcbiAgICAgICAgICAgIHBhc3MuYWRkUmVuZGVyVGFyZ2V0KGNvbG9yTmFtZSwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBzQ2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2spO1xuICAgICAgICAgICAgcGFzcy5hZGRUZXh0dXJlKHJhZGlhbmNlTmFtZSwgJ2lucHV0VGV4dHVyZScpO1xuICAgICAgICAgICAgcGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MudG9uZU1hcHBpbmcubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgICAgICBwYXNzLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuT1BBUVVFKVxuICAgICAgICAgICAgICAgICAgICAuYWRkRnVsbHNjcmVlblF1YWQoc2V0dGluZ3MudG9uZU1hcHBpbmcubWF0ZXJpYWwsIDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhc3NlcnQoISFjYW1lcmFDb25maWdzLmNvcHlBbmRUb25lbWFwTWF0ZXJpYWwpO1xuICAgICAgICAgICAgICAgIHBhc3MuYWRkUXVldWUocmVuZGVyaW5nLlF1ZXVlSGludC5PUEFRVUUpXG4gICAgICAgICAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChjYW1lcmFDb25maWdzLmNvcHlBbmRUb25lbWFwTWF0ZXJpYWwsIDApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwYXNzO1xuICAgIH1cbiAgICBwcml2YXRlIHJlYWRvbmx5IF9jb2xvckdyYWRpbmdUZXhTaXplID0gbmV3IFZlYzIoMCwgMCk7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRlhBQVBhc3NDb25maWdzIHtcbiAgICBlbmFibGVGWEFBOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQnVpbHRpbkZYQUFQYXNzQnVpbGRlciBpbXBsZW1lbnRzIHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyIHtcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDQwMDtcbiAgICB9XG4gICAgY29uZmlnQ2FtZXJhKFxuICAgICAgICBjYW1lcmE6IFJlYWRvbmx5PHJlbmRlcmVyLnNjZW5lLkNhbWVyYT4sXG4gICAgICAgIHBwbENvbmZpZ3M6IFJlYWRvbmx5PFBpcGVsaW5lQ29uZmlncz4sXG4gICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3MgJiBGWEFBUGFzc0NvbmZpZ3MpOiB2b2lkIHtcbiAgICAgICAgY2FtZXJhQ29uZmlncy5lbmFibGVGWEFBXG4gICAgICAgICAgICA9IGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnhhYS5lbmFibGVkXG4gICAgICAgICAgICAmJiAhIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnhhYS5tYXRlcmlhbDtcbiAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlRlhBQSkge1xuICAgICAgICAgICAgKytjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cChcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEZYQUFQYXNzQ29uZmlncyxcbiAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgIGNvbnRleHQ6IFBpcGVsaW5lQ29udGV4dCxcbiAgICAgICAgcHJldlJlbmRlclBhc3M/OiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlcilcbiAgICAgICAgOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB8IHVuZGVmaW5lZCB7XG4gICAgICAgIGlmICghY2FtZXJhQ29uZmlncy5lbmFibGVGWEFBKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJldlJlbmRlclBhc3M7XG4gICAgICAgIH1cbiAgICAgICAgLS1jYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcbiAgICAgICAgYXNzZXJ0KGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID49IDApO1xuXG4gICAgICAgIGNvbnN0IGlkID0gY2FtZXJhQ29uZmlncy5yZW5kZXJXaW5kb3dJZDtcbiAgICAgICAgY29uc3QgbGRyQ29sb3JQcmVmaXggPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxuICAgICAgICAgICAgPyBgU2NhbGVkTGRyQ29sb3JgXG4gICAgICAgICAgICA6IGBMZHJDb2xvcmA7XG4gICAgICAgIGNvbnN0IGxkckNvbG9yTmFtZSA9IGdldFBpbmdQb25nUmVuZGVyVGFyZ2V0KGNvbnRleHQuY29sb3JOYW1lLCBsZHJDb2xvclByZWZpeCwgaWQpO1xuXG4gICAgICAgIGFzc2VydCghIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnhhYS5tYXRlcmlhbCk7XG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcyA9PT0gMCkge1xuICAgICAgICAgICAgaWYgKGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fYWRkRnhhYVBhc3MocHBsLCBwcGxDb25maWdzLFxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmZ4YWEubWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgbGRyQ29sb3JOYW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gYWRkQ29weVRvU2NyZWVuUGFzcyhwcGwsIHBwbENvbmZpZ3MsIGNhbWVyYUNvbmZpZ3MsIGxkckNvbG9yTmFtZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGFzc2VydChjYW1lcmFDb25maWdzLndpZHRoID09PSBjYW1lcmFDb25maWdzLm5hdGl2ZVdpZHRoKTtcbiAgICAgICAgICAgICAgICBhc3NlcnQoY2FtZXJhQ29uZmlncy5oZWlnaHQgPT09IGNhbWVyYUNvbmZpZ3MubmF0aXZlSGVpZ2h0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fYWRkRnhhYVBhc3MocHBsLCBwcGxDb25maWdzLFxuICAgICAgICAgICAgICAgICAgICBjYW1lcmFDb25maWdzLnNldHRpbmdzLmZ4YWEubWF0ZXJpYWwsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuaGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0LmNvbG9yTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5jb2xvck5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgaW5wdXRDb2xvck5hbWUgPSBjb250ZXh0LmNvbG9yTmFtZTtcbiAgICAgICAgICAgIGNvbnRleHQuY29sb3JOYW1lID0gbGRyQ29sb3JOYW1lO1xuICAgICAgICAgICAgY29uc3QgbGFzdFBhc3MgPSB0aGlzLl9hZGRGeGFhUGFzcyhwcGwsIHBwbENvbmZpZ3MsXG4gICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5meGFhLm1hdGVyaWFsLFxuICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsXG4gICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5oZWlnaHQsXG4gICAgICAgICAgICAgICAgaW5wdXRDb2xvck5hbWUsXG4gICAgICAgICAgICAgICAgbGRyQ29sb3JOYW1lKTtcbiAgICAgICAgICAgIHJldHVybiBsYXN0UGFzcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIF9hZGRGeGFhUGFzcyhcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgZnhhYU1hdGVyaWFsOiBNYXRlcmlhbCxcbiAgICAgICAgd2lkdGg6IG51bWJlcixcbiAgICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIGxkckNvbG9yTmFtZTogc3RyaW5nLFxuICAgICAgICBjb2xvck5hbWU6IHN0cmluZyxcbiAgICApOiByZW5kZXJpbmcuQmFzaWNSZW5kZXJQYXNzQnVpbGRlciB7XG4gICAgICAgIHRoaXMuX2Z4YWFQYXJhbXMueCA9IHdpZHRoO1xuICAgICAgICB0aGlzLl9meGFhUGFyYW1zLnkgPSBoZWlnaHQ7XG4gICAgICAgIHRoaXMuX2Z4YWFQYXJhbXMueiA9IDEgLyB3aWR0aDtcbiAgICAgICAgdGhpcy5fZnhhYVBhcmFtcy53ID0gMSAvIGhlaWdodDtcblxuICAgICAgICBjb25zdCBwYXNzID0gcHBsLmFkZFJlbmRlclBhc3Mod2lkdGgsIGhlaWdodCwgJ2NjLWZ4YWEnKTtcbiAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuQ0xFQVIsIFN0b3JlT3AuU1RPUkUsIHNDbGVhckNvbG9yVHJhbnNwYXJlbnRCbGFjayk7XG4gICAgICAgIHBhc3MuYWRkVGV4dHVyZShsZHJDb2xvck5hbWUsICdzY2VuZUNvbG9yTWFwJyk7XG4gICAgICAgIHBhc3Muc2V0VmVjNCgnZ19wbGF0Zm9ybScsIHBwbENvbmZpZ3MucGxhdGZvcm0pO1xuICAgICAgICBwYXNzLnNldFZlYzQoJ3RleFNpemUnLCB0aGlzLl9meGFhUGFyYW1zKTtcbiAgICAgICAgcGFzcy5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50Lk9QQVFVRSlcbiAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChmeGFhTWF0ZXJpYWwsIDApO1xuICAgICAgICByZXR1cm4gcGFzcztcbiAgICB9XG4gICAgLy8gRlhBQVxuICAgIHByaXZhdGUgcmVhZG9ubHkgX2Z4YWFQYXJhbXMgPSBuZXcgVmVjNCgwLCAwLCAwLCAwKTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGU1JQYXNzQ29uZmlncyB7XG4gICAgZW5hYmxlRlNSOiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgQnVpbHRpbkZzclBhc3NCdWlsZGVyIGltcGxlbWVudHMgcmVuZGVyaW5nLlBpcGVsaW5lUGFzc0J1aWxkZXIge1xuICAgIGdldENvbmZpZ09yZGVyKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBnZXRSZW5kZXJPcmRlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gNTAwO1xuICAgIH1cbiAgICBjb25maWdDYW1lcmEoXG4gICAgICAgIGNhbWVyYTogUmVhZG9ubHk8cmVuZGVyZXIuc2NlbmUuQ2FtZXJhPixcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEZTUlBhc3NDb25maWdzKTogdm9pZCB7XG4gICAgICAgIC8vIEZTUiAoRGVwZW5kIG9uIFNoYWRpbmcgc2NhbGUpXG4gICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlRlNSID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5mc3IuZW5hYmxlZFxuICAgICAgICAgICAgJiYgISFjYW1lcmFDb25maWdzLnNldHRpbmdzLmZzci5tYXRlcmlhbFxuICAgICAgICAgICAgJiYgY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcbiAgICAgICAgICAgICYmIGNhbWVyYUNvbmZpZ3Muc2hhZGluZ1NjYWxlIDwgMS4wO1xuXG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZUZTUikge1xuICAgICAgICAgICAgKytjYW1lcmFDb25maWdzLnJlbWFpbmluZ1Bhc3NlcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXR1cChcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEZTUlBhc3NDb25maWdzLFxuICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgY29udGV4dDogUGlwZWxpbmVDb250ZXh0LFxuICAgICAgICBwcmV2UmVuZGVyUGFzcz86IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyKVxuICAgICAgICA6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHwgdW5kZWZpbmVkIHtcbiAgICAgICAgaWYgKCFjYW1lcmFDb25maWdzLmVuYWJsZUZTUikge1xuICAgICAgICAgICAgcmV0dXJuIHByZXZSZW5kZXJQYXNzO1xuICAgICAgICB9XG4gICAgICAgIC0tY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXM7XG5cbiAgICAgICAgY29uc3QgaW5wdXRDb2xvck5hbWUgPSBjb250ZXh0LmNvbG9yTmFtZTtcbiAgICAgICAgY29uc3Qgb3V0cHV0Q29sb3JOYW1lXG4gICAgICAgICAgICA9IGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID09PSAwXG4gICAgICAgICAgICAgICAgPyBjYW1lcmFDb25maWdzLmNvbG9yTmFtZVxuICAgICAgICAgICAgICAgIDogZ2V0UGluZ1BvbmdSZW5kZXJUYXJnZXQoY29udGV4dC5jb2xvck5hbWUsICdVaUNvbG9yJywgY2FtZXJhQ29uZmlncy5yZW5kZXJXaW5kb3dJZCk7XG4gICAgICAgIGNvbnRleHQuY29sb3JOYW1lID0gb3V0cHV0Q29sb3JOYW1lO1xuXG4gICAgICAgIGFzc2VydCghIWNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnNyLm1hdGVyaWFsKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FkZEZzclBhc3MocHBsLCBwcGxDb25maWdzLCBjYW1lcmFDb25maWdzLFxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncyxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MuZnNyLm1hdGVyaWFsLFxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5yZW5kZXJXaW5kb3dJZCxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGgsXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmhlaWdodCxcbiAgICAgICAgICAgIGlucHV0Q29sb3JOYW1lLFxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5uYXRpdmVXaWR0aCxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MubmF0aXZlSGVpZ2h0LFxuICAgICAgICAgICAgb3V0cHV0Q29sb3JOYW1lKTtcbiAgICB9XG4gICAgcHJpdmF0ZSBfYWRkRnNyUGFzcyhcbiAgICAgICAgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSxcbiAgICAgICAgcHBsQ29uZmlnczogUmVhZG9ubHk8UGlwZWxpbmVDb25maWdzPixcbiAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyAmIEZTUlBhc3NDb25maWdzLFxuICAgICAgICBzZXR0aW5nczogUGlwZWxpbmVTZXR0aW5ncyxcbiAgICAgICAgZnNyTWF0ZXJpYWw6IE1hdGVyaWFsLFxuICAgICAgICBpZDogbnVtYmVyLFxuICAgICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgICBoZWlnaHQ6IG51bWJlcixcbiAgICAgICAgaW5wdXRDb2xvck5hbWU6IHN0cmluZyxcbiAgICAgICAgbmF0aXZlV2lkdGg6IG51bWJlcixcbiAgICAgICAgbmF0aXZlSGVpZ2h0OiBudW1iZXIsXG4gICAgICAgIG91dHB1dENvbG9yTmFtZTogc3RyaW5nLFxuICAgICk6IHJlbmRlcmluZy5CYXNpY1JlbmRlclBhc3NCdWlsZGVyIHtcbiAgICAgICAgdGhpcy5fZnNyVGV4U2l6ZS54ID0gd2lkdGg7XG4gICAgICAgIHRoaXMuX2ZzclRleFNpemUueSA9IGhlaWdodDtcbiAgICAgICAgdGhpcy5fZnNyVGV4U2l6ZS56ID0gbmF0aXZlV2lkdGg7XG4gICAgICAgIHRoaXMuX2ZzclRleFNpemUudyA9IG5hdGl2ZUhlaWdodDtcbiAgICAgICAgdGhpcy5fZnNyUGFyYW1zLnggPSBjbGFtcCgxLjAgLSBzZXR0aW5ncy5mc3Iuc2hhcnBuZXNzLCAwLjAyLCAwLjk4KTtcblxuICAgICAgICBjb25zdCB1aUNvbG9yUHJlZml4ID0gJ1VpQ29sb3InO1xuXG4gICAgICAgIGNvbnN0IGZzckNvbG9yTmFtZSA9IGdldFBpbmdQb25nUmVuZGVyVGFyZ2V0KG91dHB1dENvbG9yTmFtZSwgdWlDb2xvclByZWZpeCwgaWQpO1xuXG4gICAgICAgIGNvbnN0IGVhc3VQYXNzID0gcHBsLmFkZFJlbmRlclBhc3MobmF0aXZlV2lkdGgsIG5hdGl2ZUhlaWdodCwgJ2NjLWZzci1lYXN1Jyk7XG4gICAgICAgIGVhc3VQYXNzLmFkZFJlbmRlclRhcmdldChmc3JDb2xvck5hbWUsIExvYWRPcC5DTEVBUiwgU3RvcmVPcC5TVE9SRSwgc0NsZWFyQ29sb3JUcmFuc3BhcmVudEJsYWNrKTtcbiAgICAgICAgZWFzdVBhc3MuYWRkVGV4dHVyZShpbnB1dENvbG9yTmFtZSwgJ291dHB1dFJlc3VsdE1hcCcpO1xuICAgICAgICBlYXN1UGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XG4gICAgICAgIGVhc3VQYXNzLnNldFZlYzQoJ2ZzclRleFNpemUnLCB0aGlzLl9mc3JUZXhTaXplKTtcbiAgICAgICAgZWFzdVBhc3NcbiAgICAgICAgICAgIC5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50Lk9QQVFVRSlcbiAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChmc3JNYXRlcmlhbCwgMCk7XG5cbiAgICAgICAgY29uc3QgcmNhc1Bhc3MgPSBwcGwuYWRkUmVuZGVyUGFzcyhuYXRpdmVXaWR0aCwgbmF0aXZlSGVpZ2h0LCAnY2MtZnNyLXJjYXMnKTtcbiAgICAgICAgcmNhc1Bhc3MuYWRkUmVuZGVyVGFyZ2V0KG91dHB1dENvbG9yTmFtZSwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCBzQ2xlYXJDb2xvclRyYW5zcGFyZW50QmxhY2spO1xuICAgICAgICByY2FzUGFzcy5hZGRUZXh0dXJlKGZzckNvbG9yTmFtZSwgJ291dHB1dFJlc3VsdE1hcCcpO1xuICAgICAgICByY2FzUGFzcy5zZXRWZWM0KCdnX3BsYXRmb3JtJywgcHBsQ29uZmlncy5wbGF0Zm9ybSk7XG4gICAgICAgIHJjYXNQYXNzLnNldFZlYzQoJ2ZzclRleFNpemUnLCB0aGlzLl9mc3JUZXhTaXplKTtcbiAgICAgICAgcmNhc1Bhc3Muc2V0VmVjNCgnZnNyUGFyYW1zJywgdGhpcy5fZnNyUGFyYW1zKTtcbiAgICAgICAgcmNhc1Bhc3NcbiAgICAgICAgICAgIC5hZGRRdWV1ZShyZW5kZXJpbmcuUXVldWVIaW50Lk9QQVFVRSlcbiAgICAgICAgICAgIC5hZGRGdWxsc2NyZWVuUXVhZChmc3JNYXRlcmlhbCwgMSk7XG5cbiAgICAgICAgcmV0dXJuIHJjYXNQYXNzO1xuICAgIH1cbiAgICAvLyBGU1JcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mc3JQYXJhbXMgPSBuZXcgVmVjNCgwLCAwLCAwLCAwKTtcbiAgICBwcml2YXRlIHJlYWRvbmx5IF9mc3JUZXhTaXplID0gbmV3IFZlYzQoMCwgMCwgMCwgMCk7XG59XG5cbmV4cG9ydCBjbGFzcyBCdWlsdGluVWlQYXNzQnVpbGRlciBpbXBsZW1lbnRzIHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyIHtcbiAgICBnZXRDb25maWdPcmRlcigpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZ2V0UmVuZGVyT3JkZXIoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIDEwMDA7XG4gICAgfVxuICAgIHNldHVwKFxuICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICBwcGxDb25maWdzOiBSZWFkb25seTxQaXBlbGluZUNvbmZpZ3M+LFxuICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzICYgRlNSUGFzc0NvbmZpZ3MsXG4gICAgICAgIGNhbWVyYTogcmVuZGVyZXIuc2NlbmUuQ2FtZXJhLFxuICAgICAgICBjb250ZXh0OiBQaXBlbGluZUNvbnRleHQsXG4gICAgICAgIHByZXZSZW5kZXJQYXNzPzogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIpXG4gICAgICAgIDogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIgfCB1bmRlZmluZWQge1xuICAgICAgICBhc3NlcnQoISFwcmV2UmVuZGVyUGFzcyk7XG5cbiAgICAgICAgbGV0IGZsYWdzID0gcmVuZGVyaW5nLlNjZW5lRmxhZ3MuVUk7XG4gICAgICAgIGlmIChjYW1lcmFDb25maWdzLmVuYWJsZVByb2ZpbGVyKSB7XG4gICAgICAgICAgICBmbGFncyB8PSByZW5kZXJpbmcuU2NlbmVGbGFncy5QUk9GSUxFUjtcbiAgICAgICAgICAgIHByZXZSZW5kZXJQYXNzLnNob3dTdGF0aXN0aWNzID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBwcmV2UmVuZGVyUGFzc1xuICAgICAgICAgICAgLmFkZFF1ZXVlKHJlbmRlcmluZy5RdWV1ZUhpbnQuQkxFTkQsICdkZWZhdWx0JywgJ2RlZmF1bHQnKVxuICAgICAgICAgICAgLmFkZFNjZW5lKGNhbWVyYSwgZmxhZ3MpO1xuXG4gICAgICAgIHJldHVybiBwcmV2UmVuZGVyUGFzcztcbiAgICB9XG59XG5cbmlmIChyZW5kZXJpbmcpIHtcblxuICAgIGNvbnN0IHsgUXVldWVIaW50LCBTY2VuZUZsYWdzIH0gPSByZW5kZXJpbmc7XG5cbiAgICBjbGFzcyBCdWlsdGluUGlwZWxpbmVCdWlsZGVyIGltcGxlbWVudHMgcmVuZGVyaW5nLlBpcGVsaW5lQnVpbGRlciB7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgX3BpcGVsaW5lRXZlbnQ6IFBpcGVsaW5lRXZlbnRQcm9jZXNzb3IgPSBjY2xlZ2FjeS5kaXJlY3Rvci5yb290LnBpcGVsaW5lRXZlbnQgYXMgUGlwZWxpbmVFdmVudFByb2Nlc3NvcjtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfZm9yd2FyZFBhc3MgPSBuZXcgQnVpbHRpbkZvcndhcmRQYXNzQnVpbGRlcigpO1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF9ibG9vbVBhc3MgPSBuZXcgQnVpbHRpbkJsb29tUGFzc0J1aWxkZXIoKTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfdG9uZU1hcHBpbmdQYXNzID0gbmV3IEJ1aWx0aW5Ub25lTWFwcGluZ1Bhc3NCdWlsZGVyKCk7XG4gICAgICAgIHByaXZhdGUgcmVhZG9ubHkgX2Z4YWFQYXNzID0gbmV3IEJ1aWx0aW5GWEFBUGFzc0J1aWxkZXIoKTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfZnNyUGFzcyA9IG5ldyBCdWlsdGluRnNyUGFzc0J1aWxkZXIoKTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfdWlQYXNzID0gbmV3IEJ1aWx0aW5VaVBhc3NCdWlsZGVyKCk7XG4gICAgICAgIC8vIEludGVybmFsIGNhY2hlZCByZXNvdXJjZXNcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfY2xlYXJDb2xvciA9IG5ldyBDb2xvcigwLCAwLCAwLCAxKTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfdmlld3BvcnQgPSBuZXcgVmlld3BvcnQoKTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfY29uZmlncyA9IG5ldyBQaXBlbGluZUNvbmZpZ3MoKTtcbiAgICAgICAgcHJpdmF0ZSByZWFkb25seSBfY2FtZXJhQ29uZmlncyA9IG5ldyBDYW1lcmFDb25maWdzKCk7XG4gICAgICAgIC8vIE1hdGVyaWFsc1xuICAgICAgICBwcml2YXRlIHJlYWRvbmx5IF9jb3B5QW5kVG9uZW1hcE1hdGVyaWFsID0gbmV3IE1hdGVyaWFsKCk7XG5cbiAgICAgICAgLy8gSW50ZXJuYWwgU3RhdGVzXG4gICAgICAgIHByaXZhdGUgX2luaXRpYWxpemVkID0gZmFsc2U7IC8vIFRPRE8oemhvdXpoZW5nbG9uZyk6IE1ha2UgZGVmYXVsdCBlZmZlY3QgYXNzZXQgbG9hZGluZyBlYXJsaWVyIGFuZCByZW1vdmUgdGhpcyBmbGFnXG4gICAgICAgIHByaXZhdGUgX3Bhc3NCdWlsZGVyczogcmVuZGVyaW5nLlBpcGVsaW5lUGFzc0J1aWxkZXJbXSA9IFtdO1xuXG4gICAgICAgIHByaXZhdGUgX3NldHVwUGlwZWxpbmVQcmV2aWV3KFxuICAgICAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzOiBDYW1lcmFDb25maWdzKSB7XG4gICAgICAgICAgICBjb25zdCBpc0VkaXRvclZpZXc6IGJvb2xlYW5cbiAgICAgICAgICAgICAgICA9IGNhbWVyYS5jYW1lcmFVc2FnZSA9PT0gQ2FtZXJhVXNhZ2UuU0NFTkVfVklFV1xuICAgICAgICAgICAgICAgIHx8IGNhbWVyYS5jYW1lcmFVc2FnZSA9PT0gQ2FtZXJhVXNhZ2UuUFJFVklFVztcblxuICAgICAgICAgICAgaWYgKGlzRWRpdG9yVmlldykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRvclNldHRpbmdzID0gcmVuZGVyaW5nLmdldEVkaXRvclBpcGVsaW5lU2V0dGluZ3MoKSBhcyBQaXBlbGluZVNldHRpbmdzIHwgbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAoZWRpdG9yU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncyA9IGVkaXRvclNldHRpbmdzO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Muc2V0dGluZ3MgPSBkZWZhdWx0U2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoY2FtZXJhLnBpcGVsaW5lU2V0dGluZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncyA9IGNhbWVyYS5waXBlbGluZVNldHRpbmdzIGFzIFBpcGVsaW5lU2V0dGluZ3M7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zZXR0aW5ncyA9IGRlZmF1bHRTZXR0aW5ncztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIF9wcmVwYXJlUGlwZWxpbmVQYXNzZXMoY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlncyk6IHZvaWQge1xuICAgICAgICAgICAgY29uc3QgcGFzc0J1aWxkZXJzID0gdGhpcy5fcGFzc0J1aWxkZXJzO1xuICAgICAgICAgICAgcGFzc0J1aWxkZXJzLmxlbmd0aCA9IDA7XG5cbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncyBhcyBQaXBlbGluZVNldHRpbmdzMjtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5fcGFzc2VzKSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBwYXNzIG9mIHNldHRpbmdzLl9wYXNzZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcGFzc0J1aWxkZXJzLnB1c2gocGFzcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGFzc2VydChwYXNzQnVpbGRlcnMubGVuZ3RoID09PSBzZXR0aW5ncy5fcGFzc2VzLmxlbmd0aCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhc3NCdWlsZGVycy5wdXNoKHRoaXMuX2ZvcndhcmRQYXNzKTtcblxuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmJsb29tLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBwYXNzQnVpbGRlcnMucHVzaCh0aGlzLl9ibG9vbVBhc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXNzQnVpbGRlcnMucHVzaCh0aGlzLl90b25lTWFwcGluZ1Bhc3MpO1xuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZnhhYS5lbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgcGFzc0J1aWxkZXJzLnB1c2godGhpcy5fZnhhYVBhc3MpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc2V0dGluZ3MuZnNyLmVuYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBwYXNzQnVpbGRlcnMucHVzaCh0aGlzLl9mc3JQYXNzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHBhc3NCdWlsZGVycy5wdXNoKHRoaXMuX3VpUGFzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIF9zZXR1cEJ1aWx0aW5DYW1lcmFDb25maWdzKFxuICAgICAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgICAgICBwaXBlbGluZUNvbmZpZ3M6IFBpcGVsaW5lQ29uZmlncyxcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3M6IENhbWVyYUNvbmZpZ3NcbiAgICAgICAgKSB7XG4gICAgICAgICAgICBjb25zdCB3aW5kb3cgPSBjYW1lcmEud2luZG93O1xuICAgICAgICAgICAgY29uc3QgaXNNYWluR2FtZVdpbmRvdzogYm9vbGVhbiA9IGNhbWVyYS5jYW1lcmFVc2FnZSA9PT0gQ2FtZXJhVXNhZ2UuR0FNRSAmJiAhIXdpbmRvdy5zd2FwY2hhaW47XG5cbiAgICAgICAgICAgIC8vIFdpbmRvd1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5pc01haW5HYW1lV2luZG93ID0gaXNNYWluR2FtZVdpbmRvdztcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MucmVuZGVyV2luZG93SWQgPSB3aW5kb3cucmVuZGVyV2luZG93SWQ7XG5cbiAgICAgICAgICAgIC8vIENhbWVyYVxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5jb2xvck5hbWUgPSB3aW5kb3cuY29sb3JOYW1lO1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5kZXB0aFN0ZW5jaWxOYW1lID0gd2luZG93LmRlcHRoU3RlbmNpbE5hbWU7XG5cbiAgICAgICAgICAgIC8vIFBpcGVsaW5lXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZUZ1bGxQaXBlbGluZSA9IChjYW1lcmEudmlzaWJpbGl0eSAmIChMYXllcnMuRW51bS5ERUZBVUxUKSkgIT09IDA7XG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLmVuYWJsZVByb2ZpbGVyID0gREVCVUcgJiYgaXNNYWluR2FtZVdpbmRvdztcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MucmVtYWluaW5nUGFzc2VzID0gMDtcblxuICAgICAgICAgICAgLy8gU2hhZGluZyBzY2FsZVxuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5zaGFkaW5nU2NhbGUgPSBjYW1lcmFDb25maWdzLnNldHRpbmdzLnNoYWRpbmdTY2FsZTtcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlID0gY2FtZXJhQ29uZmlncy5zZXR0aW5ncy5lbmFibGVTaGFkaW5nU2NhbGVcbiAgICAgICAgICAgICAgICAmJiBjYW1lcmFDb25maWdzLnNoYWRpbmdTY2FsZSAhPT0gMS4wO1xuXG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLm5hdGl2ZVdpZHRoID0gTWF0aC5tYXgoTWF0aC5mbG9vcih3aW5kb3cud2lkdGgpLCAxKTtcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MubmF0aXZlSGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5mbG9vcih3aW5kb3cuaGVpZ2h0KSwgMSk7XG5cbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3Mud2lkdGggPSBjYW1lcmFDb25maWdzLmVuYWJsZVNoYWRpbmdTY2FsZVxuICAgICAgICAgICAgICAgID8gTWF0aC5tYXgoTWF0aC5mbG9vcihjYW1lcmFDb25maWdzLm5hdGl2ZVdpZHRoICogY2FtZXJhQ29uZmlncy5zaGFkaW5nU2NhbGUpLCAxKVxuICAgICAgICAgICAgICAgIDogY2FtZXJhQ29uZmlncy5uYXRpdmVXaWR0aDtcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuaGVpZ2h0ID0gY2FtZXJhQ29uZmlncy5lbmFibGVTaGFkaW5nU2NhbGVcbiAgICAgICAgICAgICAgICA/IE1hdGgubWF4KE1hdGguZmxvb3IoY2FtZXJhQ29uZmlncy5uYXRpdmVIZWlnaHQgKiBjYW1lcmFDb25maWdzLnNoYWRpbmdTY2FsZSksIDEpXG4gICAgICAgICAgICAgICAgOiBjYW1lcmFDb25maWdzLm5hdGl2ZUhlaWdodDtcblxuICAgICAgICAgICAgLy8gUmFkaWFuY2VcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlSERSID0gY2FtZXJhQ29uZmlncy5lbmFibGVGdWxsUGlwZWxpbmVcbiAgICAgICAgICAgICAgICAmJiBwaXBlbGluZUNvbmZpZ3MudXNlRmxvYXRPdXRwdXQ7XG4gICAgICAgICAgICBjYW1lcmFDb25maWdzLnJhZGlhbmNlRm9ybWF0ID0gY2FtZXJhQ29uZmlncy5lbmFibGVIRFJcbiAgICAgICAgICAgICAgICA/IGdmeC5Gb3JtYXQuUkdCQTE2RiA6IGdmeC5Gb3JtYXQuUkdCQTg7XG5cbiAgICAgICAgICAgIC8vIFRvbmUgTWFwcGluZ1xuICAgICAgICAgICAgY2FtZXJhQ29uZmlncy5jb3B5QW5kVG9uZW1hcE1hdGVyaWFsID0gdGhpcy5fY29weUFuZFRvbmVtYXBNYXRlcmlhbDtcblxuICAgICAgICAgICAgLy8gRGVwdGhcbiAgICAgICAgICAgIGNhbWVyYUNvbmZpZ3MuZW5hYmxlU3RvcmVTY2VuZURlcHRoID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcml2YXRlIF9zZXR1cENhbWVyYUNvbmZpZ3MoXG4gICAgICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgICAgIHBpcGVsaW5lQ29uZmlnczogUGlwZWxpbmVDb25maWdzLFxuICAgICAgICAgICAgY2FtZXJhQ29uZmlnczogQ2FtZXJhQ29uZmlnc1xuICAgICAgICApOiB2b2lkIHtcbiAgICAgICAgICAgIHRoaXMuX3NldHVwUGlwZWxpbmVQcmV2aWV3KGNhbWVyYSwgY2FtZXJhQ29uZmlncyk7XG5cbiAgICAgICAgICAgIHRoaXMuX3ByZXBhcmVQaXBlbGluZVBhc3NlcyhjYW1lcmFDb25maWdzKTtcblxuICAgICAgICAgICAgc29ydFBpcGVsaW5lUGFzc0J1aWxkZXJzQnlDb25maWdPcmRlcih0aGlzLl9wYXNzQnVpbGRlcnMpO1xuXG4gICAgICAgICAgICB0aGlzLl9zZXR1cEJ1aWx0aW5DYW1lcmFDb25maWdzKGNhbWVyYSwgcGlwZWxpbmVDb25maWdzLCBjYW1lcmFDb25maWdzKTtcblxuICAgICAgICAgICAgZm9yIChjb25zdCBidWlsZGVyIG9mIHRoaXMuX3Bhc3NCdWlsZGVycykge1xuICAgICAgICAgICAgICAgIGlmIChidWlsZGVyLmNvbmZpZ0NhbWVyYSkge1xuICAgICAgICAgICAgICAgICAgICBidWlsZGVyLmNvbmZpZ0NhbWVyYShjYW1lcmEsIHBpcGVsaW5lQ29uZmlncywgY2FtZXJhQ29uZmlncyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICAvLyBJbnRlcmZhY2VcbiAgICAgICAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgICAgICB3aW5kb3dSZXNpemUoXG4gICAgICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICAgICAgd2luZG93OiByZW5kZXJlci5SZW5kZXJXaW5kb3csXG4gICAgICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgICAgIG5hdGl2ZVdpZHRoOiBudW1iZXIsXG4gICAgICAgICAgICBuYXRpdmVIZWlnaHQ6IG51bWJlcixcbiAgICAgICAgKTogdm9pZCB7XG4gICAgICAgICAgICBzZXR1cFBpcGVsaW5lQ29uZmlncyhwcGwsIHRoaXMuX2NvbmZpZ3MpO1xuXG4gICAgICAgICAgICB0aGlzLl9zZXR1cENhbWVyYUNvbmZpZ3MoY2FtZXJhLCB0aGlzLl9jb25maWdzLCB0aGlzLl9jYW1lcmFDb25maWdzKTtcblxuICAgICAgICAgICAgLy8gUmVuZGVyIFdpbmRvdyAoVUkpXG4gICAgICAgICAgICBjb25zdCBpZCA9IHdpbmRvdy5yZW5kZXJXaW5kb3dJZDtcblxuICAgICAgICAgICAgcHBsLmFkZFJlbmRlcldpbmRvdyh0aGlzLl9jYW1lcmFDb25maWdzLmNvbG9yTmFtZSxcbiAgICAgICAgICAgICAgICBGb3JtYXQuUkdCQTgsIG5hdGl2ZVdpZHRoLCBuYXRpdmVIZWlnaHQsIHdpbmRvdyxcbiAgICAgICAgICAgICAgICB0aGlzLl9jYW1lcmFDb25maWdzLmRlcHRoU3RlbmNpbE5hbWUpO1xuXG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IHRoaXMuX2NhbWVyYUNvbmZpZ3Mud2lkdGg7XG4gICAgICAgICAgICBjb25zdCBoZWlnaHQgPSB0aGlzLl9jYW1lcmFDb25maWdzLmhlaWdodDtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYUNvbmZpZ3MuZW5hYmxlU2hhZGluZ1NjYWxlKSB7XG4gICAgICAgICAgICAgICAgcHBsLmFkZERlcHRoU3RlbmNpbChgU2NhbGVkU2NlbmVEZXB0aF8ke2lkfWAsIEZvcm1hdC5ERVBUSF9TVEVOQ0lMLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBTY2FsZWRSYWRpYW5jZTBfJHtpZH1gLCB0aGlzLl9jYW1lcmFDb25maWdzLnJhZGlhbmNlRm9ybWF0LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBTY2FsZWRSYWRpYW5jZTFfJHtpZH1gLCB0aGlzLl9jYW1lcmFDb25maWdzLnJhZGlhbmNlRm9ybWF0LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBTY2FsZWRMZHJDb2xvcjBfJHtpZH1gLCBGb3JtYXQuUkdCQTgsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgICAgIHBwbC5hZGRSZW5kZXJUYXJnZXQoYFNjYWxlZExkckNvbG9yMV8ke2lkfWAsIEZvcm1hdC5SR0JBOCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBwbC5hZGREZXB0aFN0ZW5jaWwoYFNjZW5lRGVwdGhfJHtpZH1gLCBGb3JtYXQuREVQVEhfU1RFTkNJTCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgUmFkaWFuY2UwXyR7aWR9YCwgdGhpcy5fY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgUmFkaWFuY2UxXyR7aWR9YCwgdGhpcy5fY2FtZXJhQ29uZmlncy5yYWRpYW5jZUZvcm1hdCwgd2lkdGgsIGhlaWdodCk7XG4gICAgICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgTGRyQ29sb3IwXyR7aWR9YCwgRm9ybWF0LlJHQkE4LCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgICAgICBwcGwuYWRkUmVuZGVyVGFyZ2V0KGBMZHJDb2xvcjFfJHtpZH1gLCBGb3JtYXQuUkdCQTgsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgVWlDb2xvcjBfJHtpZH1gLCBGb3JtYXQuUkdCQTgsIG5hdGl2ZVdpZHRoLCBuYXRpdmVIZWlnaHQpO1xuICAgICAgICAgICAgcHBsLmFkZFJlbmRlclRhcmdldChgVWlDb2xvcjFfJHtpZH1gLCBGb3JtYXQuUkdCQTgsIG5hdGl2ZVdpZHRoLCBuYXRpdmVIZWlnaHQpO1xuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJ1aWxkZXIgb2YgdGhpcy5fcGFzc0J1aWxkZXJzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGJ1aWxkZXIud2luZG93UmVzaXplKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1aWxkZXIud2luZG93UmVzaXplKHBwbCwgdGhpcy5fY29uZmlncywgdGhpcy5fY2FtZXJhQ29uZmlncywgd2luZG93LCBjYW1lcmEsIG5hdGl2ZVdpZHRoLCBuYXRpdmVIZWlnaHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBzZXR1cChjYW1lcmFzOiByZW5kZXJlci5zY2VuZS5DYW1lcmFbXSwgcHBsOiByZW5kZXJpbmcuQmFzaWNQaXBlbGluZSk6IHZvaWQge1xuICAgICAgICAgICAgLy8gVE9ETyh6aG91emhlbmdsb25nKTogTWFrZSBkZWZhdWx0IGVmZmVjdCBhc3NldCBsb2FkaW5nIGVhcmxpZXIgYW5kIHJlbW92ZSBfaW5pdE1hdGVyaWFsc1xuICAgICAgICAgICAgaWYgKHRoaXMuX2luaXRNYXRlcmlhbHMocHBsKSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlbmRlciBjYW1lcmFzXG4gICAgICAgICAgICAvLyBsb2coYD09PT09PT09PT09PT09PT09PT09IE9uZSBGcmFtZSA9PT09PT09PT09PT09PT09PT09PWApO1xuICAgICAgICAgICAgZm9yIChjb25zdCBjYW1lcmEgb2YgY2FtZXJhcykge1xuICAgICAgICAgICAgICAgIC8vIFNraXAgaW52YWxpZCBjYW1lcmFcbiAgICAgICAgICAgICAgICBpZiAoIWNhbWVyYS5zY2VuZSB8fCAhY2FtZXJhLndpbmRvdykge1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gU2V0dXAgY2FtZXJhIGNvbmZpZ3NcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXR1cENhbWVyYUNvbmZpZ3MoY2FtZXJhLCB0aGlzLl9jb25maWdzLCB0aGlzLl9jYW1lcmFDb25maWdzKTtcbiAgICAgICAgICAgICAgICAvLyBsb2coYFNldHVwIGNhbWVyYTogJHtjYW1lcmEubm9kZSEubmFtZX0sIHdpbmRvdzogJHtjYW1lcmEud2luZG93LnJlbmRlcldpbmRvd0lkfSwgaXNGdWxsOiAke3RoaXMuX2NhbWVyYUNvbmZpZ3MuZW5hYmxlRnVsbFBpcGVsaW5lfSwgYFxuICAgICAgICAgICAgICAgIC8vICAgICArIGBzaXplOiAke2NhbWVyYS53aW5kb3cud2lkdGh9eCR7Y2FtZXJhLndpbmRvdy5oZWlnaHR9YCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9waXBlbGluZUV2ZW50LmVtaXQoUGlwZWxpbmVFdmVudFR5cGUuUkVOREVSX0NBTUVSQV9CRUdJTiwgY2FtZXJhKTtcblxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHBpcGVsaW5lXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYUNvbmZpZ3MuZW5hYmxlRnVsbFBpcGVsaW5lKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2J1aWxkRm9yd2FyZFBpcGVsaW5lKHBwbCwgY2FtZXJhLCBjYW1lcmEuc2NlbmUsIHRoaXMuX3Bhc3NCdWlsZGVycyk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYnVpbGRTaW1wbGVQaXBlbGluZShwcGwsIGNhbWVyYSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5fcGlwZWxpbmVFdmVudC5lbWl0KFBpcGVsaW5lRXZlbnRUeXBlLlJFTkRFUl9DQU1FUkFfRU5ELCBjYW1lcmEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgLy8gUGlwZWxpbmVzXG4gICAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgICAgcHJpdmF0ZSBfYnVpbGRTaW1wbGVQaXBlbGluZShcbiAgICAgICAgICAgIHBwbDogcmVuZGVyaW5nLkJhc2ljUGlwZWxpbmUsXG4gICAgICAgICAgICBjYW1lcmE6IHJlbmRlcmVyLnNjZW5lLkNhbWVyYSxcbiAgICAgICAgKTogdm9pZCB7XG4gICAgICAgICAgICBjb25zdCB3aWR0aCA9IE1hdGgubWF4KE1hdGguZmxvb3IoY2FtZXJhLndpbmRvdy53aWR0aCksIDEpO1xuICAgICAgICAgICAgY29uc3QgaGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5mbG9vcihjYW1lcmEud2luZG93LmhlaWdodCksIDEpO1xuICAgICAgICAgICAgY29uc3QgY29sb3JOYW1lID0gdGhpcy5fY2FtZXJhQ29uZmlncy5jb2xvck5hbWU7XG4gICAgICAgICAgICBjb25zdCBkZXB0aFN0ZW5jaWxOYW1lID0gdGhpcy5fY2FtZXJhQ29uZmlncy5kZXB0aFN0ZW5jaWxOYW1lO1xuXG4gICAgICAgICAgICBjb25zdCB2aWV3cG9ydCA9IGNhbWVyYS52aWV3cG9ydDsgIC8vIFJlZHVjZSBDKysvVFMgaW50ZXJvcFxuICAgICAgICAgICAgdGhpcy5fdmlld3BvcnQubGVmdCA9IE1hdGgucm91bmQodmlld3BvcnQueCAqIHdpZHRoKTtcbiAgICAgICAgICAgIHRoaXMuX3ZpZXdwb3J0LnRvcCA9IE1hdGgucm91bmQodmlld3BvcnQueSAqIGhlaWdodCk7XG4gICAgICAgICAgICAvLyBIZXJlIHdlIG11c3QgdXNlIGNhbWVyYS52aWV3cG9ydC53aWR0aCBpbnN0ZWFkIG9mIGNhbWVyYS52aWV3cG9ydC56LCB3aGljaFxuICAgICAgICAgICAgLy8gaXMgdW5kZWZpbmVkIG9uIG5hdGl2ZSBwbGF0Zm9ybS4gVGhlIHNhbWUgYXMgY2FtZXJhLnZpZXdwb3J0LmhlaWdodC5cbiAgICAgICAgICAgIHRoaXMuX3ZpZXdwb3J0LndpZHRoID0gTWF0aC5tYXgoTWF0aC5yb3VuZCh2aWV3cG9ydC53aWR0aCAqIHdpZHRoKSwgMSk7XG4gICAgICAgICAgICB0aGlzLl92aWV3cG9ydC5oZWlnaHQgPSBNYXRoLm1heChNYXRoLnJvdW5kKHZpZXdwb3J0LmhlaWdodCAqIGhlaWdodCksIDEpO1xuXG4gICAgICAgICAgICBjb25zdCBjbGVhckNvbG9yID0gY2FtZXJhLmNsZWFyQ29sb3I7ICAvLyBSZWR1Y2UgQysrL1RTIGludGVyb3BcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueCA9IGNsZWFyQ29sb3IueDtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueSA9IGNsZWFyQ29sb3IueTtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IueiA9IGNsZWFyQ29sb3IuejtcbiAgICAgICAgICAgIHRoaXMuX2NsZWFyQ29sb3IudyA9IGNsZWFyQ29sb3IudztcblxuICAgICAgICAgICAgY29uc3QgcGFzcyA9IHBwbC5hZGRSZW5kZXJQYXNzKHdpZHRoLCBoZWlnaHQsICdkZWZhdWx0Jyk7XG5cbiAgICAgICAgICAgIC8vIGJpbmQgb3V0cHV0IHJlbmRlciB0YXJnZXRcbiAgICAgICAgICAgIGlmIChmb3J3YXJkTmVlZENsZWFyQ29sb3IoY2FtZXJhKSkge1xuICAgICAgICAgICAgICAgIHBhc3MuYWRkUmVuZGVyVGFyZ2V0KGNvbG9yTmFtZSwgTG9hZE9wLkNMRUFSLCBTdG9yZU9wLlNUT1JFLCB0aGlzLl9jbGVhckNvbG9yKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFzcy5hZGRSZW5kZXJUYXJnZXQoY29sb3JOYW1lLCBMb2FkT3AuTE9BRCwgU3RvcmVPcC5TVE9SRSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGJpbmQgZGVwdGggc3RlbmNpbCBidWZmZXJcbiAgICAgICAgICAgIGlmIChjYW1lcmEuY2xlYXJGbGFnICYgQ2xlYXJGbGFnQml0LkRFUFRIX1NURU5DSUwpIHtcbiAgICAgICAgICAgICAgICBwYXNzLmFkZERlcHRoU3RlbmNpbChcbiAgICAgICAgICAgICAgICAgICAgZGVwdGhTdGVuY2lsTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgTG9hZE9wLkNMRUFSLFxuICAgICAgICAgICAgICAgICAgICBTdG9yZU9wLkRJU0NBUkQsXG4gICAgICAgICAgICAgICAgICAgIGNhbWVyYS5jbGVhckRlcHRoLFxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEuY2xlYXJTdGVuY2lsLFxuICAgICAgICAgICAgICAgICAgICBjYW1lcmEuY2xlYXJGbGFnICYgQ2xlYXJGbGFnQml0LkRFUFRIX1NURU5DSUwsXG4gICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGFzcy5hZGREZXB0aFN0ZW5jaWwoZGVwdGhTdGVuY2lsTmFtZSwgTG9hZE9wLkxPQUQsIFN0b3JlT3AuRElTQ0FSRCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHBhc3Muc2V0Vmlld3BvcnQodGhpcy5fdmlld3BvcnQpO1xuXG4gICAgICAgICAgICAvLyBUaGUgb3BhcXVlIHF1ZXVlIGlzIHVzZWQgZm9yIFJlZmxlY3Rpb24gcHJvYmUgcHJldmlld1xuICAgICAgICAgICAgcGFzcy5hZGRRdWV1ZShRdWV1ZUhpbnQuT1BBUVVFKVxuICAgICAgICAgICAgICAgIC5hZGRTY2VuZShjYW1lcmEsIFNjZW5lRmxhZ3MuT1BBUVVFKTtcblxuICAgICAgICAgICAgLy8gVGhlIGJsZW5kIHF1ZXVlIGlzIHVzZWQgZm9yIFVJIGFuZCBHaXptb3NcbiAgICAgICAgICAgIGxldCBmbGFncyA9IFNjZW5lRmxhZ3MuQkxFTkQgfCBTY2VuZUZsYWdzLlVJO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NhbWVyYUNvbmZpZ3MuZW5hYmxlUHJvZmlsZXIpIHtcbiAgICAgICAgICAgICAgICBmbGFncyB8PSBTY2VuZUZsYWdzLlBST0ZJTEVSO1xuICAgICAgICAgICAgICAgIHBhc3Muc2hvd1N0YXRpc3RpY3MgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFzcy5hZGRRdWV1ZShRdWV1ZUhpbnQuQkxFTkQpXG4gICAgICAgICAgICAgICAgLmFkZFNjZW5lKGNhbWVyYSwgZmxhZ3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBfYnVpbGRGb3J3YXJkUGlwZWxpbmUoXG4gICAgICAgICAgICBwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lLFxuICAgICAgICAgICAgY2FtZXJhOiByZW5kZXJlci5zY2VuZS5DYW1lcmEsXG4gICAgICAgICAgICBzY2VuZTogcmVuZGVyZXIuUmVuZGVyU2NlbmUsXG4gICAgICAgICAgICBwYXNzQnVpbGRlcnM6IHJlbmRlcmluZy5QaXBlbGluZVBhc3NCdWlsZGVyW10sXG4gICAgICAgICk6IHZvaWQge1xuICAgICAgICAgICAgc29ydFBpcGVsaW5lUGFzc0J1aWxkZXJzQnlSZW5kZXJPcmRlcihwYXNzQnVpbGRlcnMpO1xuXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0OiBQaXBlbGluZUNvbnRleHQgPSB7XG4gICAgICAgICAgICAgICAgY29sb3JOYW1lOiAnJyxcbiAgICAgICAgICAgICAgICBkZXB0aFN0ZW5jaWxOYW1lOiAnJyxcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGxldCBsYXN0UGFzczogcmVuZGVyaW5nLkJhc2ljUmVuZGVyUGFzc0J1aWxkZXIgfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgYnVpbGRlciBvZiBwYXNzQnVpbGRlcnMpIHtcbiAgICAgICAgICAgICAgICBpZiAoYnVpbGRlci5zZXR1cCkge1xuICAgICAgICAgICAgICAgICAgICBsYXN0UGFzcyA9IGJ1aWxkZXIuc2V0dXAocHBsLCB0aGlzLl9jb25maWdzLCB0aGlzLl9jYW1lcmFDb25maWdzLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2FtZXJhLCBjb250ZXh0LCBsYXN0UGFzcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBhc3NlcnQodGhpcy5fY2FtZXJhQ29uZmlncy5yZW1haW5pbmdQYXNzZXMgPT09IDApO1xuICAgICAgICB9XG5cbiAgICAgICAgcHJpdmF0ZSBfaW5pdE1hdGVyaWFscyhwcGw6IHJlbmRlcmluZy5CYXNpY1BpcGVsaW5lKTogbnVtYmVyIHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pbml0aWFsaXplZCkge1xuICAgICAgICAgICAgICAgIHJldHVybiAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZXR1cFBpcGVsaW5lQ29uZmlncyhwcGwsIHRoaXMuX2NvbmZpZ3MpO1xuXG4gICAgICAgICAgICAvLyBXaGVuIGFkZCBuZXcgZWZmZWN0IGFzc2V0LCBwbGVhc2UgYWRkIGl0cyB1dWlkIHRvIHRoZSBkZXBlbmRlbnRBc3NldHMgaW4gY2MuY29uZmlnLmpzb24uXG4gICAgICAgICAgICB0aGlzLl9jb3B5QW5kVG9uZW1hcE1hdGVyaWFsLl91dWlkID0gYGJ1aWx0aW4tcGlwZWxpbmUtdG9uZS1tYXBwaW5nLW1hdGVyaWFsYDtcbiAgICAgICAgICAgIHRoaXMuX2NvcHlBbmRUb25lbWFwTWF0ZXJpYWwuaW5pdGlhbGl6ZSh7IGVmZmVjdE5hbWU6ICdwaXBlbGluZS9wb3N0LXByb2Nlc3MvdG9uZS1tYXBwaW5nJyB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuX2NvcHlBbmRUb25lbWFwTWF0ZXJpYWwuZWZmZWN0QXNzZXQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZCA9IHRydWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbml0aWFsaXplZCA/IDAgOiAxO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmVuZGVyaW5nLnNldEN1c3RvbVBpcGVsaW5lKCdCdWlsdGluJywgbmV3IEJ1aWx0aW5QaXBlbGluZUJ1aWxkZXIoKSk7XG5cbn0gLy8gaWYgKHJlbmRlcmluZylcbiJdfQ==